\chapter{Introduction}\label{Ch2_Introduction}

\section{What is the formalization of mathematics?}

Formalization of mathematics is the art of teaching a computer what a piece of mathematics means, that is, it is the process of carefully writing down a mathematical statement typically in first order logic or higher order logic and then scrutinously justifying each step of the proof to a computer program that checks the validity of every step of the reasoning. 

TODO:

- Brief explanation of type theory and curry-howard isomorphism.

- Example of formal proof and comparison with informal proof.


% \begin{minted}{lean}
% theorem add_comm (a b : Nat) : a + b = b + a :=
%   Nat.add_comm a b
% \end{minted}


\section{Fermat's Last Theorem}

TODO:

-History of Fermat's Equation

-Problem statements

-Developments in number theory that lead to the resolution of the conjecture.


\section{Formalizing Fermat's Last Theorem}

Following the sequence of success stories ranging from the Liquid Tensor Experiment to the formalization of the Polynomial Freiman-Rusza conjecture. 

Prof. Kevin Buzzard from Imperial College London has received a five-year grant that will allow him to lead the formalization of Fermat's Last Theorem. This grant kicked in in October of 2024. 

At the time of writing, since October of 2024, a digital blueprint has been set up to manage the project.

Alongside other infrastructure like the project dashboard, mathematicians around the world can claim tasks that are set by Prof. Kevin Buzzard and if in return a task is returned with a "sorry" free proof then one can claim the glory of having completed the task.

TODO:

- Current goal of the formalization

- Explain somewhat the modern approach and the highly sought after Modularity Lifting Theorem.

- My task: Classification of finite subgroups of $\PGL_2(\bar{\F}_p)$



\section{Classification of finite subgroups of the Projective General Linear group over the algebraically closed field}

TODO:

-Why are the finite subgroups of  $\PGL_2(\bar{\F}_p)$ relevant to number theory: i.e: Automorphic forms, Galois representations, etc.


The primary concern of this project is to formalise Theorem 2.47 of [DTT] which states:

\begin{enumerate}
    \item If $H$ is finite subgroup of $\PGL_2(\C)$ then $H$ is isomorphic to one of the following groups: the cyclic group $C_n$ of order $n$ ($n \in \Z_{>0}$), the dihedral group $D_{2n}$ of order $2n$ ($n \in \Z_{>1}$), $A_4$, $S_4$ or $A_5$.
\item If $H$ is a finite subgroup of $\PGL_2(\Fbar_p)$ then one of the following holds:
\begin{enumerate}
    \item $H$ is conjugate to a subgroup of the upper triangular matrices;
    \item $H$ is conjugate to $\PGL_2(\F_{\ell^r})$ and $\PSL_2(\F_{\ell^{r}})$ for some $r \in \Z_{>0}$;
    \item $H$ is isomorphic to $A_4$, $S_4$, $A_5$ or the dihedral group $D_{2r}$ of order $2r$ for some $r \in \Z_{>1}$ not divisible by $\ell$

\end{enumerate}
    Where $\ell$ is assumed to be an odd prime.
\end{enumerate}


By definition the Projective General Linear Group is:

\begin{equation}
    \PGL_n(F) = \GL_n(F) / (Z(\GL_n(F))) = \GL_n(F) / (F^\times I) 
\end{equation}

Similarly, the Projective Special Linear Group is:

\begin{equation}
    \PSL_n(F) = \SL_n(F) / (Z(\SL_n(F))) = \SL_n(F) / (\langle -I\rangle)
\end{equation}

Given we are working over an algebraically closed field, it turns out that for any $n \in \N$, $\PGL_n(F)$ is isomorphic to $\PSL_n(F)$.

This isomorphism will be crucial as it will allow us to focus on classifying finite subgroups of $SL_2(F)$ to classify the finite subgroups of $\PGL_2(F)$.

\section{Over an algebraically closed field PSL is isomorphic to the projective PGL}


When $F$ is algebraically closed and $\textrm{char}(F) \neq 2$ we can construct an isomorphism between the projective special linear group and the projective general linear group.
\begin{definition}
\label{SL_monoidHom_PGL}
\lean{SL_monoidHom_PGL}
\leanok
    Let $\varphi : \SL_n(R) \rightarrow \PGL_n(R)$ be the injection of $\PSL_n(R)$ into $\PGL_n(R)$ defined by
    \[
     S \mapsto i(S) \;  (R^\times I) 
    \]

    where $i : \SL_n(F) \hookrightarrow \GL_n(F)$ is the natural injection of the special linear group into the general linear group.
\end{definition}

\begin{lemma}
\label{center_SL_le_ker}
\uses{SL_monoidHom_PGL}
\lean{center_SL_le_ker}
\leanok
Let $R$ be a non-trivial commutative ring, then $Z(\SL_n(R)) \subseteq \ker (\varphi)$.
\end{lemma}

\begin{proof}
If $x \in Z(\SL_n(R))$ then $x = \omega I$ where $\omega$ is a primitive root of unity.

Given the kernel of $\varphi$.
\end{proof}



\begin{definition}
\label{PSL_monoidHom_PGL}
\uses{center_SL_le_ker, SL_monoidHom_PGL}
\lean{PSL_monoidHom_PGL}
\leanok
    Given $Z(\SL_n(F)) \ker \varphi$ as shown in \ref{center_SL_le_ker}, by the universal property there exists a unique homomorphism $\bar{\varphi} : \PSL_n(F) \rightarrow \PGL_n(F)$ which is the lift of $\varphi$. 
    Where $\varphi = \bar{\varphi} \circ \pi_{Z(\SL_n(F))}$ and $\pi_{Z(\SL_n(F))} : \SL_n(F) \rightarrow \PSL_n(F)$ is the canonical homomorphism from the group into its quotient.
\end{definition}

\begin{lemma}
\label{GeneralLinearGroup.Center.mem_center_general_linear_group_iff}
\lean{GeneralLinearGroup.Center.mem_center_general_linear_group_iff}
Let $R$ be a commutative ring, then $G \in GL_n(F)$ belongs to center of $\GL_n(R)$, $Z(\GL_n(R))$ if and only if $G = r \cdot I$ where $r \in R^\times$.
\end{lemma}

\begin{proof}
    \begin{itemize}
    \item Suppose $G \in GL_n(F)$ belongs to $Z(\GL_n(F))$ then for all $H \in \GL_n(F)$ we have that $G H = H G$. We will find it sufficient to only consider the case where $H$ is a transvection matrices.
    Let $1 \leq i < j \leq n$, then the transvection matrices are of the form $T_{ij} = I + E_{ij}$ where $E_{ij}$ is the standard basis matrix given by
    \[
    E_{{ij}_{kl}} = \begin{cases}
    1 & \text{if $i = k$ and $l = j$}\\
    0 & \text{otherwise}
    \end{cases}
    \] 

    Given $T_{ij} G = (I + E_{ij}) G = G T_{ij} (I + E_{ij})$, and addition is commutative we can use the cancellation law to yield that
    
    \[
    E_{ij} G = G + E_{ij}
    \]

    But $G$ only commutes with $E_{ij}$ for all $i \neq j$ if $G = r \cdot I$ for some $r \in R^\times$.
    
    \item Suppose $G = r \smul I$ for some $r \in R^\times$ then it is clear that for all $H \in \GL_n(F)$ that $r \cdot I  H = r \cdot H = H \cdot r = H (r \cdot I)$
    \end{itemize}
\end{proof}

\begin{lemma}
\label{Injective_PSL_monoidHom_PGL}
\lean{Injective_PSL_monoidHom_PGL}
\uses{PSL_monoidHom_PGL, GeneralLinearGroup.Center.mem_center_general_linear_group_iff}
\leanok
    The homomorphism $\bar{\varphi}$ is injective.
\end{lemma}
\begin{proof}

To show $\bar{\varphi}$ is injective we must show that $\ker \bar{\varphi} \leq \bot_{\PSL_n(F)}$ where $\bot_{\PSL_n(F)}$ is the trivial subgroup of $\PSL_n(F)$.

Let $[S] \in \PSL_n(F)$ and suppose $[S] \in \ker \bar{\varphi}$. If $[S] \in \ker \bar{\varphi}$ then $\bar{\varphi} ([S]) = [1]_{\PGL_n(F)}$. But on the other hand, $\bar{\varphi} ([S]) = \varphi(s)$ and so $\varphi(S) = 1_{\PGL_n(F)}$

and thus $S \in Z(\GL_n(F))$, from \ref{GeneralLinearGroup.Center.mem_center_general_linear_group_iff} it follows that $s = r \cdot I$ for some $r \in R^\times$. But given the restriction of $S \in \SL_n(F)$ we know that 

\begin{equation*}
    \det(S) = \det(r \cdot I) = r^n = 1 \implies \text{$r$ is a $n$ \textsuperscript{th} root of unity}
\end{equation*}

Therefore, given elements of $Z(\SL_n(F))$ are those matrices of the form $\omega \cdot I$ where $\omega$ is a $n$\textsuperscript{th} root of unity, we can conclude that $[S] = [1]_{\PSL_n(F)}$ and thus $\ker \bar{\varphi} \leq \bot_{\PSL_n(F)}$ as required.

Which shows that the homomorphism $\bar{\varphi}$ is injective.
\end{proof}

Before we can show that $\bar{\varphi}$ is surjective we need the following lemma which allows us to find a suitable representative for an arbitrary element of $\PGL_n(F)$.

\begin{lemma}
\label{exists_SL_eq_scaled_GL_of_IsAlgClosed}
\lean{exists_SL_eq_scaled_GL_of_IsAlgClosed}
\leanok
If $F$ is an algebraically closed field then for every $G \in \GL_n(F)$ there exists a nonzero constant $\alpha \in F^\times$ and an element $S \in \SL_n(F)$ such that 
\begin{equation*}
    G = \alpha \cdot S
\end{equation*}
\end{lemma}

\begin{proof}
Let $G \in \GL_n(R)$ then define
\begin{equation*}
    P(X) := X^n - \det(G)
\end{equation*}

By assumption $F$ is algebraically closed and $\det(G) \in F^\times$ thus there exists a root $\alpha \in F^\times$ such that 

\begin{equation*}
    \alpha^n - \det(G) = 0 \iff \alpha = \sqrt[n]{\det(G)} 
\end{equation*}

Let $S = \frac{1}{\alpha} G$, by construction $S \in \SL_n(F)$ as 

\begin{equation*}
    \det(S) = (\frac{1}{\alpha})det(G) = \frac{1}{\det(G)} \det(G) = 1
\end{equation*}
\end{proof}

\begin{lemma}
\label{Surjective_PSL_monoidHom_PGL}
\uses{PSL_monoidHom_PGL, exists_SL_eq_scaled_GL_of_IsAlgClosed}
\lean{Surjective_PSL_monoidHom_PGL}
    The map $\bar{\varphi}$ is surjective.
\end{lemma}

\begin{proof}
    Let $G \; (F^\times I) = [G] \in \PGL_n(F)$, then $G \in \GL_n(F)$ we can find a representative of $[G']$, that lies within the special linear group.
    Given elements of the special linear group are matrices with determinant equal to one, we must scale $G$ to a suitable factor to yield a representative which lies within $\SL_n(F)$. Suppose $\det(G) \ne 1$ and let
    \[
    P(X) := X^n - \det(G) \in F[X]
    \]
    By assumption, $F$ is algebraically closed so there exists a root $\alpha \ne 0\in F$ such that 
    \[
    \alpha^n - \det(G) = 0 \iff \alpha^n = \det(G)
    \]
    We can define
    \[
    G' := \frac{1}{\alpha} \cdot G \quad \text{where} \quad \det(G') = \frac{1}{\alpha^n} \det(G) = 1.
    \]
    Thus $G' \in \SL_n(F) \leq \GL_n(F)$ and given $G' = \frac{1}{\alpha} G$ we have that $G'  \; (F^\times I) = G \; (F^\times I)$.
    
    Therefore, $\varphi(G') = i(G') (F^\times I) = G' (F^\times I) = G (F^\times I)$.
\end{proof}

\begin{lemma}
\label{Bijective_PSL_monoidHom_PGL}
\uses{Injective_PSL_monoidHom_PGL, Surjective_PSL_monoidHom_PGL}
\lean{Bijective_PSL_monoidHom}
    The map $\bar{\varphi}$ is bijective
\end{lemma}

\begin{proof}
 We have shown that $\bar{\varphi}$ is injective in \ref{Injective_PSL_monoidHom_PGL} and have shown that $\bar{\varphi}$ is surjective in \ref{Surjective_PSL_monoidHom_PGL}. 
 Therefore,$\bar{\varphi}$ defines a bijection from $\PSL_n(F)$ to $\PGL_n(F)$.
\end{proof}

\begin{theorem}
    If $F$ is an algebraically closed field, then the map $\bar{\varphi} : \PSL_n(F) \rightarrow \PGL_n(F)$ defines a group isomorphism between $\PSL_n(F)$ and $\PGL_n(F)$.
\end{theorem}

\begin{proof}
    The map $\bar{\varphi}$ was shown to be a bijection in \ref{Bijective_PSL_monoidHom_PGL} and given $\bar{\varphi}$ is mulitplicative as it was defined to be the lift of the homomorphism $\varphi$, we can conclude that 
    $\bar{\varphi}$ defines a group isomorphism between $\PSL_n(F)$ and $ºPGL_n(F)$
\end{proof}



% \begin{center}
% \begin{tikzcd}
% 	{\SL_n(F)} && {\SL_n(F)} \\
% 	&& {} \\
% 	{\PSL_n(F)} && {\PGL_n(F)}
% 	\arrow["i", from=1-1, to=1-3]
% 	\arrow["{\textrm{can}_{\langle-I\rangle}}"', from=1-1, to=3-1]
% 	\arrow["{\textrm{can}_{F^\times I}}", from=1-3, to=3-3]
% 	\arrow[dotted, from=3-1, to=3-3]
% \end{tikzcd}
% \end{center}
% \end{proof}

This isomorphism will be essential to the classification of finite subgroups of $\PGL_2(\bar{\F}_p)$, as we only need understand a the classification of subgroups of $\PSL_2(F)$ structure to reach our desired result.


\section{Christopher Butler's exposition}

Following from the isomorphism defined in the previous section, we can now proceed to classify the finite subgroups of $\PGL_2(\bar{\F}_p)$ by classifying the finite subgroups of $\PSL_2(\bar{\F}_p)$. 
In turn, one can begin classifying the finite subgroups of $\PSL_2(\Fbar_p)$ by classifying the finite subgroups of $\SL_2(\Fbar_p)$ and then considering what happens after quotienting by the center, $Z(\SL_2(F)) = \langle -I\rangle$.

We now turn our attention to the more general setting when $F$ is an arbitrary field that is algebraically closed, as this will turn out to be sufficient for our purposes.

Given $|\langle -I \rangle| = 2$ when $\textrm{char} F \ne 2$ and $\langle -I\rangle = \bot$ when $\textrm{char} F = 2$.
When a finite subgroup of $\SL_2(F)$ is sent through the canonical mapping $\pi_{Z(\SL_2(F))} : \SL_2(F) \rightarrow \PSL_2(F)$ the resulting subgroup will at most shrink by a factor of two or remain intact should the center not be contained within the subgroup. 

We now proceed to classify all finite subgroups of $\SL_2(F)$ when $F$ is algebraically closed field.