<!DOCTYPE html>
<html lang="en">
<head>
<script>
  MathJax = { 
    tex: {
		    inlineMath: [['$','$'], ['\\(','\\)']]
	} }
</script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
</script>
<meta name="generator" content="plasTeX" />
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>The Maximal Abelian Subgroup Class Equation</title>
<link rel="next" href="Ch7_DicksonsClassificationTheorem.html" title="Dickson’s Classification Theorem for finite subgroups of \operatorname{SL}2(F)" />
<link rel="prev" href="Ch5_PropertiesOfSLOverAlgClosedField.html" title="Properties of the two dimensional \operatorname{SL}2(F)" />
<link rel="up" href="index.html" title="Classification of finite subgroups of PGL" />
<link rel="stylesheet" href="styles/theme-white.css" />
<link rel="stylesheet" href="styles/amsthm.css" />
<link rel="stylesheet" href="styles/showmore.css" />
<link rel="stylesheet" href="styles/blueprint.css" />
<link rel="stylesheet" href="styles/extra_styles.css" />
</head>

<body>
<header>
<svg  id="toc-toggle" class="icon icon-list-numbered "><use xlink:href="symbol-defs.svg#icon-list-numbered"></use></svg>
<h1 id="doc_title"><a href="index.html">Classification of finite subgroups of PGL</a></h1>
</header>

<div class="wrapper">
<nav class="toc">
<ul class="sub-toc-0">
<li class="">
  <a href="Ch1_AbstractAndAcknowledgements.html"><span class="toc_ref">1</span> <span class="toc_entry">Abstract and Summary</span></a>
  <span class="expand-toc">▶</span>
  <ul class="sub-toc-1">
     <li class="">
  <a href="Ch1_AbstractAndAcknowledgements.html#a0000000003"><span class="toc_ref">1.1</span> <span class="toc_entry">Acknowledgements</span></a>
 </li>
<li class="">
  <a href="Ch1_AbstractAndAcknowledgements.html#a0000000004"><span class="toc_ref">1.2</span> <span class="toc_entry">Summary</span></a>
 </li>
<li class="">
  <a href="Ch1_AbstractAndAcknowledgements.html#a0000000005"><span class="toc_ref">1.3</span> <span class="toc_entry">How to read this blueprint</span></a>
  <span class="expand-toc">▶</span>
  <ul class="sub-toc-2">
     <li class="">
  <a href="Ch1_AbstractAndAcknowledgements.html#a0000000006"><span class="toc_ref">1.3.1</span> <span class="toc_entry">Navigating the blueprint</span></a>
 </li>
<li class="">
  <a href="Ch1_AbstractAndAcknowledgements.html#a0000000007"><span class="toc_ref">1.3.2</span> <span class="toc_entry">Note on <span class="ttfamily">remarks</span></span></a>
 </li>
<li class="">
  <a href="Ch1_AbstractAndAcknowledgements.html#a0000000010"><span class="toc_ref">1.3.3</span> <span class="toc_entry">Distinguishing my work from Christopher Butler’s work</span></a>
 </li>

  </ul>
 </li>
<li class="">
  <a href="Ch1_AbstractAndAcknowledgements.html#a0000000011"><span class="toc_ref">1.4</span> <span class="toc_entry">Christopher Butler’s acknowledgements and popular science summary</span></a>
  <span class="expand-toc">▶</span>
  <ul class="sub-toc-2">
     <li class="">
  <a href="Ch1_AbstractAndAcknowledgements.html#a0000000012"><span class="toc_ref">1.4.1</span> <span class="toc_entry">Christopher Butler’s Abstract </span></a>
 </li>
<li class="">
  <a href="Ch1_AbstractAndAcknowledgements.html#a0000000013"><span class="toc_ref">1.4.2</span> <span class="toc_entry">Acknowledgements from Christopher Butler</span></a>
 </li>
<li class="">
  <a href="Ch1_AbstractAndAcknowledgements.html#a0000000014"><span class="toc_ref">1.4.3</span> <span class="toc_entry">Christopher Butler’s popular science summary</span></a>
 </li>

  </ul>
 </li>

  </ul>
 </li>
<li class="">
  <a href="Ch2_Introduction.html"><span class="toc_ref">2</span> <span class="toc_entry">Introduction</span></a>
  <span class="expand-toc">▶</span>
  <ul class="sub-toc-1">
     <li class="">
  <a href="Ch2_Introduction.html#a0000000015"><span class="toc_ref">2.1</span> <span class="toc_entry">What is the formalisation of mathematics?</span></a>
  <span class="expand-toc">▶</span>
  <ul class="sub-toc-2">
     <li class="">
  <a href="Ch2_Introduction.html#a0000000016"><span class="toc_ref"></span> <span class="toc_entry">What is Lean?</span></a>
 </li>

  </ul>
 </li>
<li class="">
  <a href="Ch2_Introduction.html#a0000000017"><span class="toc_ref">2.2</span> <span class="toc_entry">Fermat’s Last Theorem</span></a>
  <span class="expand-toc">▶</span>
  <ul class="sub-toc-2">
     <li class="">
  <a href="Ch2_Introduction.html#a0000000018"><span class="toc_ref"></span> <span class="toc_entry">Problem statement and its history</span></a>
 </li>

  </ul>
 </li>
<li class="">
  <a href="Ch2_Introduction.html#a0000000019"><span class="toc_ref">2.3</span> <span class="toc_entry">Formalising Fermat’s Last Theorem</span></a>
  <span class="expand-toc">▶</span>
  <ul class="sub-toc-2">
     <li class="">
  <a href="Ch2_Introduction.html#a0000000020"><span class="toc_ref"></span> <span class="toc_entry">The first target of the formalisation of Fermat’s Last Theorem</span></a>
 </li>

  </ul>
 </li>
<li class="">
  <a href="Ch2_Introduction.html#a0000000021"><span class="toc_ref">2.4</span> <span class="toc_entry">Classification of finite subgroups of the \(\operatorname{PGL}_2(\bar{\mathbb {F}}_p)\) within Fermat’s Last Theorem</span></a>
 </li>
<li class="">
  <a href="Ch2_Introduction.html#a0000000022"><span class="toc_ref">2.5</span> <span class="toc_entry">Overview and reduction to the classification problem</span></a>
 </li>

  </ul>
 </li>
<li class="">
  <a href="Ch3_Preliminaries.html"><span class="toc_ref">3</span> <span class="toc_entry">Preliminaries</span></a>
  <span class="expand-toc">▶</span>
  <ul class="sub-toc-1">
     <li class="">
  <a href="Ch3_Preliminaries.html#a0000000023"><span class="toc_ref">3.1</span> <span class="toc_entry">Some Elementary Theorems</span></a>
 </li>
<li class="">
  <a href="Ch3_Preliminaries.html#a0000000024"><span class="toc_ref">3.2</span> <span class="toc_entry">Sylow Theory</span></a>
 </li>
<li class="">
  <a href="Ch3_Preliminaries.html#a0000000025"><span class="toc_ref">3.3</span> <span class="toc_entry">Group Action</span></a>
 </li>
<li class="">
  <a href="Ch3_Preliminaries.html#a0000000026"><span class="toc_ref">3.4</span> <span class="toc_entry">Conjugation</span></a>
 </li>
<li class="">
  <a href="Ch3_Preliminaries.html#a0000000027"><span class="toc_ref">3.5</span> <span class="toc_entry">Automorphism</span></a>
 </li>
<li class="">
  <a href="Ch3_Preliminaries.html#a0000000028"><span class="toc_ref">3.6</span> <span class="toc_entry">Direct Product</span></a>
 </li>

  </ul>
 </li>
<li class="">
  <a href="Ch4_ReductionOfProblem.html"><span class="toc_ref">4</span> <span class="toc_entry">Reduction of classification of finite subgroups of \(\operatorname{PGL}_2(\bar{\mathbb {F}}_p)\) to classification of finite subgroups of \(\operatorname{PSL}_2(\bar{\mathbb {F}}_p)\)</span></a>
  <span class="expand-toc">▶</span>
  <ul class="sub-toc-1">
     <li class="">
  <a href="Ch4_ReductionOfProblem.html#a0000000029"><span class="toc_ref">4.1</span> <span class="toc_entry">Over an algebraically closed field \(\operatorname{PSL}_n(F)\) is isomorphic to the projective \(\operatorname{PGL}_n(F)\)</span></a>
 </li>
<li class="">
  <a href="Ch4_ReductionOfProblem.html#a0000000030"><span class="toc_ref">4.2</span> <span class="toc_entry">Christopher Butler’s exposition</span></a>
 </li>

  </ul>
 </li>
<li class="">
  <a href="Ch5_PropertiesOfSLOverAlgClosedField.html"><span class="toc_ref">5</span> <span class="toc_entry">Properties of the two dimensional \(\operatorname{SL}_2(F)\)</span></a>
  <span class="expand-toc">▶</span>
  <ul class="sub-toc-1">
     <li class="">
  <a href="Ch5_PropertiesOfSLOverAlgClosedField.html#a0000000031"><span class="toc_ref">5.1</span> <span class="toc_entry">General Notation</span></a>
 </li>
<li class="">
  <a href="Ch5_PropertiesOfSLOverAlgClosedField.html#a0000000032"><span class="toc_ref">5.2</span> <span class="toc_entry">Subsets of \(\operatorname{SL}_2(F)\)</span></a>
  <span class="expand-toc">▶</span>
  <ul class="sub-toc-2">
     <li class="">
  <a href="Ch5_PropertiesOfSLOverAlgClosedField.html#a0000000033"><span class="toc_ref"></span> <span class="toc_entry">Special matrices of \(\operatorname{SL}_2(F)\)</span></a>
 </li>
<li class="">
  <a href="Ch5_PropertiesOfSLOverAlgClosedField.html#a0000000034"><span class="toc_ref"></span> <span class="toc_entry">Special subgroups of \(\operatorname{SL}_2(F)\)</span></a>
 </li>

  </ul>
 </li>
<li class="">
  <a href="Ch5_PropertiesOfSLOverAlgClosedField.html#a0000000035"><span class="toc_ref">5.3</span> <span class="toc_entry">The Center of \(\operatorname{SL}_2(F)\)</span></a>
 </li>
<li class="">
  <a href="Ch5_PropertiesOfSLOverAlgClosedField.html#a0000000036"><span class="toc_ref">5.4</span> <span class="toc_entry">Conjugacy of the Elements of \(\operatorname{SL}_2(F)\)</span></a>
  <span class="expand-toc">▶</span>
  <ul class="sub-toc-2">
     <li class="">
  <a href="Ch5_PropertiesOfSLOverAlgClosedField.html#a0000000037"><span class="toc_ref"></span> <span class="toc_entry">Classification of elements of \(\operatorname{SL}_2(F)\) up to conjugation</span></a>
 </li>

  </ul>
 </li>
<li class="">
  <a href="Ch5_PropertiesOfSLOverAlgClosedField.html#a0000000038"><span class="toc_ref">5.5</span> <span class="toc_entry">Centralizers &amp; Normalizers</span></a>
  <span class="expand-toc">▶</span>
  <ul class="sub-toc-2">
     <li class="">
  <a href="Ch5_PropertiesOfSLOverAlgClosedField.html#a0000000039"><span class="toc_ref"></span> <span class="toc_entry">Normalizers</span></a>
 </li>
<li class="">
  <a href="Ch5_PropertiesOfSLOverAlgClosedField.html#a0000000040"><span class="toc_ref"></span> <span class="toc_entry">Centralisers</span></a>
 </li>

  </ul>
 </li>
<li class="">
  <a href="Ch5_PropertiesOfSLOverAlgClosedField.html#a0000000041"><span class="toc_ref">5.6</span> <span class="toc_entry">The Projective Line &amp; Triple Transitivity</span></a>
 </li>

  </ul>
 </li>
<li class=" active current">
  <a href="Ch6_MaximalAbelianSubgroupClassEquation.html"><span class="toc_ref">6</span> <span class="toc_entry">The Maximal Abelian Subgroup Class Equation</span></a>
  <span class="expand-toc">▼</span>
  <ul class="sub-toc-1 active">
     <li class="">
  <a href="Ch6_MaximalAbelianSubgroupClassEquation.html#a0000000042"><span class="toc_ref">6.1</span> <span class="toc_entry">A finite subgroup of \(\operatorname{SL}_2(F)\)</span></a>
 </li>
<li class="">
  <a href="Ch6_MaximalAbelianSubgroupClassEquation.html#a0000000043"><span class="toc_ref">6.2</span> <span class="toc_entry">Maximal Abelian Subgroups</span></a>
 </li>
<li class="">
  <a href="Ch6_MaximalAbelianSubgroupClassEquation.html#a0000000044"><span class="toc_ref">6.3</span> <span class="toc_entry">Conjugacy of Maximal Abelian Subgroups</span></a>
 </li>
<li class="">
  <a href="Ch6_MaximalAbelianSubgroupClassEquation.html#a0000000045"><span class="toc_ref">6.4</span> <span class="toc_entry">Constructing The Class Equation</span></a>
 </li>

  </ul>
 </li>
<li class="">
  <a href="Ch7_DicksonsClassificationTheorem.html"><span class="toc_ref">7</span> <span class="toc_entry">Dickson’s Classification Theorem for finite subgroups of \(\operatorname{SL}_2(F)\)</span></a>
  <span class="expand-toc">▶</span>
  <ul class="sub-toc-1">
     <li class="">
  <a href="Ch7_DicksonsClassificationTheorem.html#a0000000046"><span class="toc_ref">7.1</span> <span class="toc_entry">Five Lemmas</span></a>
 </li>
<li class="">
  <a href="Ch7_DicksonsClassificationTheorem.html#a0000000047"><span class="toc_ref">7.2</span> <span class="toc_entry">The Six Cases</span></a>
 </li>
<li class="">
  <a href="Ch7_DicksonsClassificationTheorem.html#a0000000048"><span class="toc_ref">7.3</span> <span class="toc_entry">Dickson’s Classification Theorem</span></a>
 </li>
<li class="">
  <a href="Ch7_DicksonsClassificationTheorem.html#a0000000049"><span class="toc_ref">7.4</span> <span class="toc_entry">Classification of finite subgroups of \(\operatorname{PGL}_2(\bar{\mathbb {F}}_p)\)</span></a>
 </li>

  </ul>
 </li>
<li class="">
  <a href="sect0001.html"><span class="toc_ref">8</span> <span class="toc_entry">Bibliography</span></a>
 </li>
<li ><a href="dep_graph_document.html">Dependency graph</a></li>
</ul>
</nav>

<div class="content">
<div class="content-wrapper">


<div class="main-text">
<h1 id="Ch6_MaximalAbelianSubgroupClassEquation">6 The Maximal Abelian Subgroup Class Equation</h1>

<h1 id="a0000000042">6.1 A Finite Subgroup of \(\operatorname{SL}_2(F)\)</h1>
<p>We now return to the realm of finite groups and consider \(G\) to be an arbitrary finite subgroup of \(\operatorname{SL}_2(F)\). We will still continue to use \(Z\) to denote the centre of \(\operatorname{SL}_2(F)\), and will use \(Z(G)\) whenever we refer to the centre of \(G\). <br /><br />Observe that if \(Z\) is not contained in \(G\), then \(Z\) must contain a non-identity element, thus \(|Z| = 2\) and \(p \neq 2\) by Lemma <a href="Ch5_PropertiesOfSLOverAlgClosedField.html#SpecialSubgroups.card_Z_eq_two_of_two_ne_zero">5.40</a>. Recall that \(\operatorname{SL}_2(F)\) has a unique element of order 2 by Lemma <a href="Ch5_PropertiesOfSLOverAlgClosedField.html#SpecialSubgroups.exists_unique_orderOf_eq_two">5.39</a>, \(- I_L\), which is not in \(G\), therefore \(G\) has no element of order 2. <br /><br />By Cauchy’s Theorem, which says that if a prime \(p\) divides the order of a finite group, then the group contains an element of order \(p\), we deduce that 2 does not divide the order of \(G\). <br /><br />This means that \(|G|\) and \(|Z|\) are relatively prime, so \(G \cap Z = \{  I_L \} \) and we can use Corollary <a href="Ch3_Preliminaries.html#directproductZ">3.26</a> to show that \(GZ \cong G \times Z\). </p>
<p>This shows that regardless of whether \(G\) contains \(Z\) or not, its structure is uniquely determined by \(GZ\), so it suffices to only consider the case when \(Z \subset G\). </p>
<h1 id="a0000000043">6.2 Maximal Abelian Subgroups</h1>
<div class="definition_thmwrapper theorem-style-definition" id="IsMaximalAbelian">
  <div class="definition_thmheading">
    <span class="definition_thmcaption">
    Definition
    </span>
    <span class="definition_thmlabel">6.1</span>
    <span class="definition_thmtitle">Maximal Abelian Subgroup</span>
    <div class="thm_header_extras">

    
    ✓
        </div>
    <div class="thm_header_hidden_extras">

    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#IsMaximalAbelian">#</a>
    
    
    
    <button class="modal lean">L∃∀N</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="https://AlexBrodbelt.github.io/ClassificationOfFiniteSubgroupsOfPGL/docs/find/#doc/IsMaximalAbelian" class="lean_decl">IsMaximalAbelian</a></li>
          
        </ul>
    
      </div>
    </div>

    
        </div>
  </div>
  <div class="definition_thmcontent">
  <p>   Let \(H\) and \(J\) be subgroups of a group \(G\) where \(H\) is abelian. \(H\) is called <b class="bfseries">maximal abelian</b> if \(J\) is not abelian whenever \(H \subsetneq J\). </p>

  </div>
</div>
<div class="remark_thmwrapper theorem-style-remark" id="a0000000258">
  <div class="remark_thmheading">
    <span class="remark_thmcaption">
    Remark
    </span>
    <span class="remark_thmlabel">6.2</span>
    <div class="thm_header_extras">

        </div>
    <div class="thm_header_hidden_extras">

    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#a0000000258">#</a>
    
    
    
        </div>
  </div>
  <div class="remark_thmcontent">
  <p>After the suggestion from Edward van de Meent, the definition in Lean was stated in positive form: </p>
<p>A subgroup \(H\) is said to be a maximal abelian subgroup of \(G\) if for every \(J\) subgroup of \(G\) satisfying \(H \le J\) we have that \(J \le H\). Which overall implies \(H = J\) by antisymmetry of the partial order. </p>
<p>In Lean this statement looks like the following: </p>
<p><small class="footnotesize"> <pre class="verbatim">
    def IsMaximalAbelian {L : Type*} [Group L] (G : Subgroup L) : Prop := Maximal (IsCommutative) G
  </pre> </small> </p>
<p>Where the definition of <span class="ttfamily">Maximal</span> in mathlib implicitly recognises the existence of a \(\le \) operator (a more primitive notion of a partial order) and is: </p>
<p><small class="footnotesize"> <pre class="verbatim">
      def Maximal (P : α → Prop) (x : α) : Prop := P x ∧ ∀ ⦃y⦄, P y → x ≤ y → y ≤ x
    </pre> </small> </p>
<p>Which informally means that an object \(M\) that satisfies a property is maximal if any other object \(K\) that also satisfies the property and is related to \(M\) by \(M \le K\) then in fact we must have the symmetric relation \(K \le M\). </p>
<p>When we define, \(\le \;  := \;  \subseteq \) this corresponds to the the natural notion of maximal. </p>

  </div>
</div>
<div class="definition_thmwrapper theorem-style-definition" id="IsElementaryAbelian">
  <div class="definition_thmheading">
    <span class="definition_thmcaption">
    Definition
    </span>
    <span class="definition_thmlabel">6.3</span>
    <span class="definition_thmtitle">Elementary Abelian</span>
    <div class="thm_header_extras">

    
    ✓
        </div>
    <div class="thm_header_hidden_extras">

    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#IsElementaryAbelian">#</a>
    
    
    
    <button class="modal lean">L∃∀N</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="https://AlexBrodbelt.github.io/ClassificationOfFiniteSubgroupsOfPGL/docs/find/#doc/IsElementaryAbelian" class="lean_decl">IsElementaryAbelian</a></li>
          
        </ul>
    
      </div>
    </div>

    
        </div>
  </div>
  <div class="definition_thmcontent">
  <p>   A group \(G\) is said to be <b class="bfseries">elementary abelian</b> if it is abelian and every non-trivial element has order \(p\), where \(p\) is prime. </p>

  </div>
</div>
<div class="remark_thmwrapper theorem-style-remark" id="a0000000259">
  <div class="remark_thmheading">
    <span class="remark_thmcaption">
    Remark
    </span>
    <span class="remark_thmlabel">6.4</span>
    <div class="thm_header_extras">

        </div>
    <div class="thm_header_hidden_extras">

    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#a0000000259">#</a>
    
    
    
        </div>
  </div>
  <div class="remark_thmcontent">
  <p>In Lean we define the notion of a subgroup of \(H\) of \(G\) being elementary abelian the following way: <small class="footnotesize"> <pre class="verbatim">
      def IsElementaryAbelian {G : Type*} [Group G] (p : ℕ) (H : Subgroup G) : Prop :=
      IsCommutative H ∧ ∀ h : H, h ≠ 1 → orderOf h = p
  </pre> </small> </p>

  </div>
</div>
<div class="definition_thmwrapper theorem-style-definition" id="MaximalAbelianSubgroupsOf">
  <div class="definition_thmheading">
    <span class="definition_thmcaption">
    Definition
    </span>
    <span class="definition_thmlabel">6.5</span>
    <div class="thm_header_extras">

    
    ✓
        </div>
    <div class="thm_header_hidden_extras">

    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroupsOf">#</a>
    
    
    <button class="modal"><svg  class="icon icon-mindmap "><use xlink:href="symbol-defs.svg#icon-mindmap"></use></svg>
</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Uses</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#IsMaximalAbelian">Definition 6.1</a></li>
          
        </ul>
    
      </div>
    </div>

    
    
    <button class="modal lean">L∃∀N</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="https://AlexBrodbelt.github.io/ClassificationOfFiniteSubgroupsOfPGL/docs/find/#doc/MaximalAbelianSubgroupsOf" class="lean_decl">MaximalAbelianSubgroupsOf</a></li>
          
        </ul>
    
      </div>
    </div>

    
        </div>
  </div>
  <div class="definition_thmcontent">
  <p>   Let \(\mathfrak {M}\) denote the set of all maximal abelian subgroups of \(G\). </p>

  </div>
</div>
<p> <small class="footnotesize"> <pre class="verbatim">
def MaximalAbelianSubgroupsOf { L : Type*} [Group L] (G : Subgroup L) : Set (Subgroup L) :=
  { K : Subgroup L | IsMaximalAbelian (K.subgroupOf G) ∧ K ≤ G}
</pre> </small> </p>
<div class="remark_thmwrapper theorem-style-remark" id="a0000000260">
  <div class="remark_thmheading">
    <span class="remark_thmcaption">
    Remark
    </span>
    <span class="remark_thmlabel">6.6</span>
    <div class="thm_header_extras">

        </div>
    <div class="thm_header_hidden_extras">

    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#a0000000260">#</a>
    
    
    
        </div>
  </div>
  <div class="remark_thmcontent">
  <p>When a set/object with some additional structure has been defined informally, when one wants to formalise results about the object it is often the case a decision has to be made about whether the set is defined in Lean as a set, whether it is defined as its own type or whether it should be a subtype of a more general type. </p>
<p>In this case, I have opted to define it as a set but later on when using quotients we shall see an example of how it is beneficial to define an object as a type/subtype in its own right. </p>

  </div>
</div>
<div class="example_thmwrapper theorem-style-remark" id="a0000000261">
  <div class="example_thmheading">
    <span class="example_thmcaption">
    Example
    </span>
    <span class="example_thmlabel">6.7</span>
    <div class="thm_header_extras">

        </div>
    <div class="thm_header_hidden_extras">

    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#a0000000261">#</a>
    
    
    
        </div>
  </div>
  <div class="example_thmcontent">
  <p>For example, in <span class="ttfamily">mathlib</span> the set of \(n \times n\) matrices, \(\textrm{Mat}(n; R)\) is defined as its own type. The General Linear Group is defined as the units of the \(\textrm{Mat}(n; R)^\times \) which is another type in itself. However, the Special Linear Group is defined as a subtype of \(\textrm{Mat}(n; R)\). It is defined as: </p>
<p><small class="footnotesize"><pre class="verbatim">
    def SpecialLinearGroup :=  
      { A : Matrix n n R // A.det = 1 }
  </pre>
<p>Crucially, Lean does not understand subtypes to be definitionally equal to subsets! </p>
</small> </p>

  </div>
</div>

<p>Maximal abelian subgroups play an important role in determining the structure of \(G\). In particular, every element in \(G\) must be contained in some maximal abelian subgroup, since every element commutes at least with itself and \(Z\). This will allow us to decompose \(G\) into the conjugacy classes of these maximal abelian subgroups. Note also that unless \(G=Z\), \(Z\) is not a maximal abelian subgroup, because for each \(x \in G \!  \setminus \!  Z\), \(\langle Z,x \rangle \) is clearly a larger abelian subgroup than \(Z\). <br /></p>
<p>We will shortly prove an important theorem regarding the maximal abelian subgroups of \(G\), but in order to do so we require the following two lemmas. <br /></p>
<div class="lemma_thmwrapper theorem-style-plain" id="IsElementaryAbelian.dvd_card">
  <div class="lemma_thmheading">
    <span class="lemma_thmcaption">
    Lemma
    </span>
    <span class="lemma_thmlabel">6.8</span>
    <div class="thm_header_extras">

        </div>
    <div class="thm_header_hidden_extras">

    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#IsElementaryAbelian.dvd_card">#</a>
    
    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#a0000000262"><svg  class="icon icon-cogs "><use xlink:href="symbol-defs.svg#icon-cogs"></use></svg>
</a>
    
    
    
    <button class="modal lean">L∃∀N</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="https://AlexBrodbelt.github.io/ClassificationOfFiniteSubgroupsOfPGL/docs/find/#doc/IsElementaryAbelian.dvd_card" class="lean_decl">IsElementaryAbelian.dvd_card</a></li>
          
        </ul>
    
      </div>
    </div>

    
        </div>
  </div>
  <div class="lemma_thmcontent">
  <p>  If \(G\) is a finite group of order \(p^m\) where \(p\) is prime and \(m {\gt} 0\), then \(p\) divides \(|Z(G)|\). </p>

  </div>
</div>
<div class="proof_wrapper" id="a0000000262">
  <div class="proof_heading">
    <span class="proof_caption">
    Proof
    </span>
    <span class="expand-proof">▶</span>
  </div>
  <div class="proof_content">
  <p>Let \(C(x)\) be the set of elements of \(G\) which are conjugate in \(G\) to \(x\), we call this the conjugacy class of \(x\). Bhattacharya shows that the set of all conjugacy classes form a partition of \(G\) <span class="cite">
	[
	<a href="sect0001.html#bhattacharya" >5</a>
	, 
	p.112
	]
</span>. Now consider the following rearranged class equation of \(G\), where \(S\) is a subset of \(G\) containing exactly one element from each conjugacy class not contained in \(Z(G)\). </p>
<div class="equation" id="cen2">
<p>
  <div class="equation_content">
    \begin{equation}  \label{cen2} |G| - \sum _{x \in S} [G:N_G(x)] = |Z(G)|. \end{equation}
  </div>
  <span class="equation_label">1</span>
</p>
</div>
<p>Since \(|G| = p^m\), each subgroup of \(G\) is of order \(p^k\) for some \(k \leq m\). In particular each \(N_G(x)\) has order \(p^k\) and is strictly contained in \(G\) since \(x \not\in Z(G)\) by assumption. Thus each \([G:N_G(x)] {\gt} 1\), and are therefore divisible by \(p\). Since \(p\) divides the left hand side of (<a href="Ch6_MaximalAbelianSubgroupClassEquation.html#cen2">1</a>), it must also divide the right, thus \(p\) divides \(|Z(G)|\). </p>

  </div>
</div>
<p> <small class="footnotesize"> <pre class="verbatim">
lemma dvd_card {G : Type*} [Group G] (p : ℕ) (H : Subgroup G)
  [Finite H] (hH : IsElementaryAbelian p H) (bot_lt_H: ⊥ &lt; H) : p ∣ (Nat.card H) := by
  simp [@SetLike.lt_iff_le_and_exists] at bot_lt_H
  obtain ⟨h, h_in_H, h_ne_one⟩ := bot_lt_H
  have order_eq_p : @orderOf H _ ⟨h, h_in_H⟩ = p := by
    apply hH.right ⟨h, h_in_H⟩
    simp [h_ne_one]
  rw [← order_eq_p]
  let inst : Fintype (H :) := Fintype.ofFinite ↥H
  have order_dvd_card := @orderOf_dvd_card H _ _ ⟨h, h_in_H⟩
  simp at order_dvd_card ⊢
  exact order_dvd_card
</pre> </small> </p>
<div class="lemma_thmwrapper theorem-style-plain" id="order_ne_char">
  <div class="lemma_thmheading">
    <span class="lemma_thmcaption">
    Lemma
    </span>
    <span class="lemma_thmlabel">6.9</span>
    <div class="thm_header_extras">

    
    ✓
        </div>
    <div class="thm_header_hidden_extras">

    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#order_ne_char">#</a>
    
    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#a0000000263"><svg  class="icon icon-cogs "><use xlink:href="symbol-defs.svg#icon-cogs"></use></svg>
</a>
    
    
    
    <button class="modal lean">L∃∀N</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="https://AlexBrodbelt.github.io/ClassificationOfFiniteSubgroupsOfPGL/docs/find/#doc/order_ne_char" class="lean_decl">order_ne_char</a></li>
          
        </ul>
    
      </div>
    </div>

    
        </div>
  </div>
  <div class="lemma_thmcontent">
  <p>  The order of an element in the group of units of a field \(F^\times \) cannot be equal to \(\textrm{char}(F)\). </p>

  </div>
</div>
<div class="proof_wrapper" id="a0000000263">
  <div class="proof_heading">
    <span class="proof_caption">
    Proof
    </span>
    <span class="expand-proof">▶</span>
  </div>
  <div class="proof_content">
  <p>Suppose for a contradiction that there indeed exists an element \(x \in F^\times \) of order \(p\), where \(x^p = \textrm{Frob}(x) = 1\). where \(\textrm{Frob}\) is the frobenius endomorphism. </p>
<p>Since \(\textrm{Frob}(x) = \textrm{Frob}(1) = 1 \iff \textrm{Frob}(x - 1) = 0 = \textrm{Frob}(0)\) and using the fact the frobenius endomorphism is injective we can conclude that \(x - 1 = 0 \iff x = 1\) but this is a contradiction as the order of \(o(1) = 1 \ne p\). Therefore, no such element can exist. </p>

  </div>
</div>
<p> <small class="footnotesize"> <pre class="verbatim">
lemma order_ne_char (F : Type*) [Field F] {p : ℕ} [hp' : Fact (Nat.Prime p)] [hC : CharP F p] :
  ∀ x : Fˣ, orderOf x ≠ p := by
  intro x
  by_contra H
  have := ExpChar.pow_prime_pow_mul_eq_one_iff p 1 1 (x : F)
  simp only [← H, pow_one, mul_one, ← Units.val_pow_eq_pow_val, pow_orderOf_eq_one x, Units.val_one,
    Units.val_eq_one, true_iff] at this
  exact hp'.out.ne_one (@orderOf_one Fˣ _ ▸ (this ▸ H)).symm
</pre> </small> </p>
<div class="lemma_thmwrapper theorem-style-plain" id="coprime_card_fin_subgroup_of_inj_hom_group_iso_units">
  <div class="lemma_thmheading">
    <span class="lemma_thmcaption">
    Lemma
    </span>
    <span class="lemma_thmlabel">6.10</span>
    <span class="lemma_thmtitle">Injection of a finite subgroup into the group of units of field</span>
    <div class="thm_header_extras">

    
    ✓
        </div>
    <div class="thm_header_hidden_extras">

    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#coprime_card_fin_subgroup_of_inj_hom_group_iso_units">#</a>
    
    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#a0000000264"><svg  class="icon icon-cogs "><use xlink:href="symbol-defs.svg#icon-cogs"></use></svg>
</a>
    
    
    
    <button class="modal lean">L∃∀N</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="https://AlexBrodbelt.github.io/ClassificationOfFiniteSubgroupsOfPGL/docs/find/#doc/coprime_card_fin_subgroup_of_inj_hom_group_iso_units" class="lean_decl">coprime_card_fin_subgroup_of_inj_hom_group_iso_units</a></li>
          
        </ul>
    
      </div>
    </div>

    
        </div>
  </div>
  <div class="lemma_thmcontent">
  <p>   Let \(F\) be a field of characteristic \(p\), let \(H\) be a finite subgroup of a group \(G\), and suppose there exists an monomorphism \(f : H \hookrightarrow F^\times \) then \(|H|\) is coprime to \(p\). </p>

  </div>
</div>
<div class="proof_wrapper" id="a0000000264">
  <div class="proof_heading">
    <span class="proof_caption">
    Proof
    </span>
    <span class="expand-proof">▶</span>
  </div>
  <div class="proof_content">
  <p> The order of the subgroup \(|H|\) is coprime to \(p\) if and only if \(p \nmid |H|\). From <a href="Ch6_MaximalAbelianSubgroupClassEquation.html#order_ne_char">6.9</a> we know that for all \(x \in F^\times \) we have that \(o(x) \ne p\). Contraposing this statement, we now only need show that assuming \(p \mid |H|\) we can deduce that there exists an element \(x\) of order \(p\) within \(F^\times \). </p>
<p>By Cauchy’s theorem, we are guaranteed the existence of an element \(h\) in \(H\) that has oder \(p\), but since \(f\) is a monomorphism, the order of \(f(h)\) equals the order of \(h\) which is \(p\). We have thus found witness and have proved the claim, which overall proves the original statement. </p>

  </div>
</div>
<p> <small class="footnotesize"> <pre class="verbatim">
  lemma coprime_card_fin_subgroup_of_inj_hom_group_iso_units {F G : Type*} [Field F] {p : ℕ}
    [hp' : Fact (Nat.Prime p)] [hC : CharP F p] [Group G] (H : Subgroup G) [Finite H]
    (f : H →* Fˣ) (hf : Injective f) :
    Nat.Coprime (Nat.card H) p := by
    rw [Nat.coprime_comm, Nat.Prime.coprime_iff_not_dvd hp'.out]
    have order_ne_p := @order_ne_char F _ p _ _
    contrapose! order_ne_p
    let H_fintype : Fintype H := Fintype.ofFinite ↥H
    simp only [Nat.card_eq_fintype_card] at order_ne_p
    obtain ⟨h, hh⟩ := exists_prime_orderOf_dvd_card p order_ne_p
    use f h
    rw [orderOf_injective f hf ↑h, ← hh]
  </pre> </small> </p>
<div class="theorem_thmwrapper theorem-style-plain" id="MaximalAbelianSubgroup.centralizer_meet_G_in_MaximalAbelianSubgroups_of_noncentral">
  <div class="theorem_thmheading">
    <span class="theorem_thmcaption">
    Theorem
    </span>
    <span class="theorem_thmlabel">6.11</span>
    <div class="thm_header_extras">

    
    ✓
        </div>
    <div class="thm_header_hidden_extras">

    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.centralizer_meet_G_in_MaximalAbelianSubgroups_of_noncentral">#</a>
    
    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#a0000000265"><svg  class="icon icon-cogs "><use xlink:href="symbol-defs.svg#icon-cogs"></use></svg>
</a>
    
    
    <button class="modal"><svg  class="icon icon-mindmap "><use xlink:href="symbol-defs.svg#icon-mindmap"></use></svg>
</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Uses</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroupsOf">Definition 6.5</a></li>
          
          <li><a href="Ch5_PropertiesOfSLOverAlgClosedField.html#IsCommutative_centralizer_of_not_mem_center">Corollary 5.63</a></li>
          
        </ul>
    
      </div>
    </div>

    
    
    <button class="modal lean">L∃∀N</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="https://AlexBrodbelt.github.io/ClassificationOfFiniteSubgroupsOfPGL/docs/find/#doc/MaximalAbelianSubgroup.centralizer_meet_G_in_MaximalAbelianSubgroups_of_noncentral" class="lean_decl">MaximalAbelianSubgroup.centralizer_meet_G_in_MaximalAbelianSubgroups_of_noncentral</a></li>
          
        </ul>
    
      </div>
    </div>

    
        </div>
  </div>
  <div class="theorem_thmcontent">
  <p>   Let \(G\) be an arbitrary finite subgroup of \(\operatorname{SL}_2(F)\) containing \(Z\). <br />If \(x \in G \!  \setminus \!  Z\) then we have \(C_G(x) \in \mathfrak {M}\).  <br /></p>

  </div>
</div>
<div class="proof_wrapper" id="a0000000265">
  <div class="proof_heading">
    <span class="proof_caption">
    Proof
    </span>
    <span class="expand-proof">▶</span>
  </div>
  <div class="proof_content">
  <p> Let \(x\) be chosen arbitrarily from \(G \!  \setminus \!  Z\). Then by Corollary <a href="Ch5_PropertiesOfSLOverAlgClosedField.html#IsCommutative_centralizer_of_not_mem_center">5.63</a>, \(C_{\operatorname{SL}_2(F)}(x)\) is abelian. By definition, \(C_G(x) = C_{\operatorname{SL}_2(F)}(x) \cap G\), and using the elementary fact that the intersection of two subgroups is itself a subgroup, we have \(C_G(x) {\lt} C_{\operatorname{SL}_2(F)}(x)\). </p>
<p>Now since every subgroup of an abelian group is abelian, \(C_G(x)\) is also abelian. </p>
<p>Now let \(J\) be a maximal abelian subgroup of \(G\) containing \(C_G(x)\). Since \(J\) is abelian and \(x \in C_G(x) \subset J\), we have \(jx=xj\), \(\forall j \in J\), thus \(J \subset C_G(x)\). Therefore \(J=C_G(x)\) and \(C_G(x) \in \mathfrak {M}\). <br /></p>

  </div>
</div>
<p> <small class="footnotesize"> <pre class="verbatim">
theorem centralizer_meet_G_in_MaximalAbelianSubgroups_of_noncentral {F : Type*} [Field F]
  [IsAlgClosed F] [DecidableEq F] (G : Subgroup SL(2,F)) (x : SL(2,F))
  (hx : x ∈ (G.carrier \ (center SL(2,F)))) :
  centralizer {x} ⊓ G ∈ MaximalAbelianSubgroupsOf G := by
  obtain ⟨x_in_G, x_not_in_Z⟩ := hx
  simp at x_not_in_Z
  have IsCommutative_centralizer_S := IsCommutative_centralizer_of_not_mem_center x x_not_in_Z
  dsimp [MaximalAbelianSubgroupsOf]
  split_ands
  · rw [inf_subgroupOf_right]
    apply subgroupOf_isCommutative
  · rintro J hJ hx j j_in_J
    rw [inf_subgroupOf_right, mem_subgroupOf, mem_centralizer_iff]
    simp only [Set.mem_singleton_iff, forall_eq]
    have x_in_J : ⟨x, x_in_G⟩ ∈ J := by
      apply hx
      apply mem_subgroupOf.mpr
      simp
      split_ands
      · exact mem_centralizer_self x
      · exact x_in_G
    have := mul_comm_of_mem_isCommutative J x_in_J j_in_J
    exact SetLike.coe_eq_coe.mpr this
  exact inf_le_right
</pre> </small> </p>
<p>Before we continue proving properties about Maximal Abelian Subgroups, we first need to understand how commutative subgroups interact with subgroups of \(\operatorname{SL}_2(F)\). We now list a few results about commutative subgroups and their interaction with other subgroups: </p>
<div class="corollary_thmwrapper theorem-style-plain" id="IsCommutative_of_IsCommutative_subgroupOf">
  <div class="corollary_thmheading">
    <span class="corollary_thmcaption">
    Corollary
    </span>
    <span class="corollary_thmlabel">6.12</span>
    <div class="thm_header_extras">

    
    ✓
        </div>
    <div class="thm_header_hidden_extras">

    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#IsCommutative_of_IsCommutative_subgroupOf">#</a>
    
    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#a0000000266"><svg  class="icon icon-cogs "><use xlink:href="symbol-defs.svg#icon-cogs"></use></svg>
</a>
    
    
    
    <button class="modal lean">L∃∀N</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="https://AlexBrodbelt.github.io/ClassificationOfFiniteSubgroupsOfPGL/docs/find/#doc/IsCommutative_of_IsCommutative_subgroupOf" class="lean_decl">IsCommutative_of_IsCommutative_subgroupOf</a></li>
          
        </ul>
    
      </div>
    </div>

    
        </div>
  </div>
  <div class="corollary_thmcontent">
  <p>  Let \(H, K\) be two subgroups of a group \(G\) then \(H \sqcap K = H \cap K\) is commutative if \(H \sqcap K\) regarded as a subgroup of \(K\) is commutative. </p>

  </div>
</div>
<div class="proof_wrapper" id="a0000000266">
  <div class="proof_heading">
    <span class="proof_caption">
    Proof
    </span>
    <span class="expand-proof">▶</span>
  </div>
  <div class="proof_content">
  <p>Trivial </p>

  </div>
</div>
<p> <small class="footnotesize"> <pre class="verbatim">
lemma IsCommutative_of_IsCommutative_subgroupOf {G : Type*} [ Group G ] (H K : Subgroup G)
  (hH : IsCommutative (H.subgroupOf K)) : IsCommutative (H ⊓ K) := by
  rw [IsCommutative_iff] at hH ⊢
  intro x y
  have x_in_K : (x : G) ∈ K := x.property.right
  have y_in_K : (y : G) ∈ K := y.property.right
  have x_in_H_subgroupOf_K : ⟨x, x_in_K⟩ ∈ (H.subgroupOf K) := by
    simp [mem_subgroupOf]
    exact x.property.left
  have y_in_H_subgroupOf_K : ⟨y, y_in_K⟩ ∈ (H.subgroupOf K) := by
    simp [mem_subgroupOf]
    exact y.property.left
  specialize hH ⟨⟨x, x_in_K⟩, x_in_H_subgroupOf_K⟩ ⟨⟨y, y_in_K⟩, y_in_H_subgroupOf_K⟩
  simp [SetLike.coe_eq_coe] at hH
  exact SetLike.coe_eq_coe.mp hH
</pre> </small> </p>
<div class="remark_thmwrapper theorem-style-remark" id="a0000000267">
  <div class="remark_thmheading">
    <span class="remark_thmcaption">
    Remark
    </span>
    <span class="remark_thmlabel">6.13</span>
    <div class="thm_header_extras">

        </div>
    <div class="thm_header_hidden_extras">

    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#a0000000267">#</a>
    
    
    
        </div>
  </div>
  <div class="remark_thmcontent">
  <p>The corollary above <a href="Ch6_MaximalAbelianSubgroupClassEquation.html#IsCommutative_of_IsCommutative_subgroupOf">6.12</a> probably seems trivial, but Lean genuinely understands both objects as belonging to completely different types and this result is necessary to be able to jump between the two different perspectives. </p>

  </div>
</div>
<div class="lemma_thmwrapper theorem-style-plain" id="center_mul">
  <div class="lemma_thmheading">
    <span class="lemma_thmcaption">
    Lemma
    </span>
    <span class="lemma_thmlabel">6.14</span>
    <div class="thm_header_extras">

    
    ✓
        </div>
    <div class="thm_header_hidden_extras">

    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#center_mul">#</a>
    
    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#a0000000268"><svg  class="icon icon-cogs "><use xlink:href="symbol-defs.svg#icon-cogs"></use></svg>
</a>
    
    
    
    <button class="modal lean">L∃∀N</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="https://AlexBrodbelt.github.io/ClassificationOfFiniteSubgroupsOfPGL/docs/find/#doc/center_mul" class="lean_decl">center_mul</a></li>
          
        </ul>
    
      </div>
    </div>

    
        </div>
  </div>
  <div class="lemma_thmcontent">
  <p>  Let \(H\) be a subgroup of a group \(G\) then the pointwise set product \(Z(G) H\) is a subgroup of \(G\) </p>

  </div>
</div>
<div class="proof_wrapper" id="a0000000268">
  <div class="proof_heading">
    <span class="proof_caption">
    Proof
    </span>
    <span class="expand-proof">▶</span>
  </div>
  <div class="proof_content">
  
<ol class="enumerate">
  <li><p><span class="ttfamily">one_mem’</span>: Both \(Z(G)\) and \(H\) are subgroups of \(G\) so they contain the identity element, thus \(1 \cdot 1 \in Z(G) H\). </p>
</li>
  <li><p><span class="ttfamily">mul_mem’</span>: Let \(z_1 h_1, z_2 h_2 \in Z(G) H\) then \(z_1h_1z_2h_2 = z_1z_2 h_1h_2 \in Z(G) H\) as \(z_i\) is in the center. </p>
</li>
  <li><p><span class="ttfamily">inv_mem’</span>: Let \(zh \in Z(G) H\) then \(z^{-1} h^{-1} \in Z(G) H\) and \(z h z^{-1} h^{-1} = zz^{-1}h h^{-1} = 1\). </p>
</li>
</ol>

  </div>
</div>
<p><small class="footnotesize"> <pre class="verbatim">
  def center_mul  {G : Type* } [Group G] (H : Subgroup G) : Subgroup G where
    carrier := (center G : Set G) * (H : Set G)
    mul_mem' := by
      intro x y ⟨z₁, hz₁, a₁, ha₁, h₁⟩ ⟨z₂, hz₂, a₂, ha₂, h₂⟩
      simp at h₁ h₂
      rw [← h₁, ← h₂, mul_assoc, ← mul_assoc a₁, Eq.symm (hz₂.comm a₁)]
      use z₁ * z₂
      split_ands
      · exact mul_mem hz₁ hz₂
      use a₁ * a₂
      split_ands
      · exact mul_mem ha₁ ha₂
      group
    one_mem' := by
      use 1
      split_ands
      · exact one_mem (center G)
      use 1
      split_ands
      · apply one_mem
      simp_rw [mul_one]
    inv_mem' := by
      intro x ⟨z, hz, a, ha, h⟩
      simp [Set.mem_mul]
      use z⁻¹
      split_ands
      · exact (Subgroup.inv_mem_iff (center G)).mpr hz
      use a⁻¹
      split_ands
      · exact (Subgroup.inv_mem_iff H).mpr ha
      simp at h
      rw [eq_inv_iff_mul_eq_one, ← h, mul_assoc, ← mul_assoc a⁻¹, Eq.symm (hz.comm a⁻¹)]
      group
  </pre> </small> </p>
<div class="lemma_thmwrapper theorem-style-plain" id="IsComm_of_center_join_IsComm">
  <div class="lemma_thmheading">
    <span class="lemma_thmcaption">
    Lemma
    </span>
    <span class="lemma_thmlabel">6.15</span>
    <span class="lemma_thmtitle"> The join of a commutative subgroup with the center of a group is commutative</span>
    <div class="thm_header_extras">

    
    ✓
        </div>
    <div class="thm_header_hidden_extras">

    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#IsComm_of_center_join_IsComm">#</a>
    
    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#a0000000269"><svg  class="icon icon-cogs "><use xlink:href="symbol-defs.svg#icon-cogs"></use></svg>
</a>
    
    
    
    <button class="modal lean">L∃∀N</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="https://AlexBrodbelt.github.io/ClassificationOfFiniteSubgroupsOfPGL/docs/find/#doc/IsComm_of_center_join_IsComm" class="lean_decl">IsComm_of_center_join_IsComm</a></li>
          
        </ul>
    
      </div>
    </div>

    
        </div>
  </div>
  <div class="lemma_thmcontent">
  <p>   Let \(H\) be a commutative subgroup of \(G\) then the subgroup \(Z(G) \sqcup H\) is a commutative subgroup of \(G\). </p>

  </div>
</div>
<div class="proof_wrapper" id="a0000000269">
  <div class="proof_heading">
    <span class="proof_caption">
    Proof
    </span>
    <span class="expand-proof">▶</span>
  </div>
  <div class="proof_content">
  <p> Let \(x, y \in Z(G) \sqcup H\) recalling that the supremum can be thought of taking the closure we know that if \(x\) and \(y\) belong to the closure then since \(Z(G) H\) is a subgroup of \(G\) and \(Z(G) \sqcup H \subseteq Z(G) H\) we know that \(x, y \in Z(G) H\) and thus there exist \(z_1 h_1 = x\) and \(z_2 h_2 = y\). Therefore, we can now show that \(x\) and \(y\) commute: </p>
<div class="displaymath" id="a0000000270">
  \begin{align*}  x y & = z_1 h_1 z_2 h_2\\ &  = z_1 z_2 h_1 h_2 \tag {as $z_2$ is in the center}\\ & = z_2 z_1 h_2 h_1 \tag {as $H$ is a commutative subgroup}\\ & = z_2 h_2 z_1 h_1 \tag {as $z_1$ is in the center} \end{align*}
</div>

  </div>
</div>
<p> <small class="footnotesize"> <pre class="verbatim">
lemma IsComm_of_center_join_IsComm {G : Type* } [Group G] (H : Subgroup G)
  (hH : IsCommutative H) : IsCommutative (center G ⊔ H) :=  by
  rw [IsCommutative_iff]
  rintro ⟨x, hx⟩ ⟨y, hy⟩
  have center_mul_subset_center_mul :
    ((center G) :  Set G) * H ⊆ (center_mul H) := by simp [center_mul]
  rw [@sup_eq_closure_mul, mem_closure] at hx hy
  specialize hx (center_mul H) center_mul_subset_center_mul
  specialize hy (center_mul H) center_mul_subset_center_mul
  rcases hx with ⟨z₁, hz₁, h₁, hh₁, h₁'⟩
  rcases hy with ⟨z₂, hz₂, h₂, hh₂, h₂'⟩
  simp at hz₁ hz₂ h₁' h₂' ⊢
  rw [← h₁', ← h₂', mul_assoc, ← mul_assoc h₁, (hz₂.comm h₁).symm,
   mul_assoc z₂, mul_assoc z₂, ← mul_assoc h₂, (hz₁.comm h₂).symm,
   mul_comm_of_mem_isCommutative H hh₁ hh₂, ← mul_assoc,
   Eq.symm (hz₂.comm z₁)]
  group
</pre> </small> </p>
<div class="lemma_thmwrapper theorem-style-plain" id="MaximalAbelianSubgroup.center_le">
  <div class="lemma_thmheading">
    <span class="lemma_thmcaption">
    Lemma
    </span>
    <span class="lemma_thmlabel">6.16</span>
    <span class="lemma_thmtitle">\(Z\) is contained within any Maximal Abelian Subgroup of a subgroup containing \(Z\)</span>
    <div class="thm_header_extras">

    
    ✓
        </div>
    <div class="thm_header_hidden_extras">

    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.center_le">#</a>
    
    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#a0000000271"><svg  class="icon icon-cogs "><use xlink:href="symbol-defs.svg#icon-cogs"></use></svg>
</a>
    
    
    <button class="modal"><svg  class="icon icon-mindmap "><use xlink:href="symbol-defs.svg#icon-mindmap"></use></svg>
</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Uses</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroupsOf">Definition 6.5</a></li>
          
          <li><a href="Ch5_PropertiesOfSLOverAlgClosedField.html#SpecialSubgroups.Z">Definition 5.35</a></li>
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#IsCommutative_of_IsCommutative_subgroupOf">Corollary 6.12</a></li>
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#IsComm_of_center_join_IsComm">Lemma 6.15</a></li>
          
        </ul>
    
      </div>
    </div>

    
    
    <button class="modal lean">L∃∀N</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="https://AlexBrodbelt.github.io/ClassificationOfFiniteSubgroupsOfPGL/docs/find/#doc/MaximalAbelianSubgroup.center_le" class="lean_decl">MaximalAbelianSubgroup.center_le</a></li>
          
        </ul>
    
      </div>
    </div>

    
        </div>
  </div>
  <div class="lemma_thmcontent">
  <p>    Let \(H\) be a subgroup of a group \(G\), if \(Z(G) \le H\) then for any maximal abelian subgroup of \(H\), \(A\) we have that \(Z(G) \le A\) </p>

  </div>
</div>
<div class="proof_wrapper" id="a0000000271">
  <div class="proof_heading">
    <span class="proof_caption">
    Proof
    </span>
    <span class="expand-proof">▶</span>
  </div>
  <div class="proof_content">
  
<p>Suppose for a contradiction that \(Z(G) \not\le A\), then there exists \(z \in Z(G)\) which does not belong to \(A\). </p>
<p>We construct the larger subgroup \(A \sqcup Z(G)\) which is abelian by <a href="Ch6_MaximalAbelianSubgroupClassEquation.html#IsComm_of_center_join_IsComm">6.15</a>. Since \(A\) is a maximal abelian subgroup and \(A \le A \sqcup Z(G)\) we must have that \(A \sqcup Z(G) \le A\), but this is impossible because \(z \in A \sqcup Z(G)\) but \(z \notin A \le A \sqcup Z(G)\), thus a contradiction. </p>

  </div>
</div>
<p> <small class="footnotesize"> <pre class="verbatim">
lemma center_le {G : Type*} [Group G] (H A : Subgroup G) (hA : A ∈ MaximalAbelianSubgroupsOf H)
  (hH : center G ≤ H) : center G ≤ A := by
  by_contra h
  rw [SetLike.not_le_iff_exists] at h
  -- We will yield that K is less than or equal to A
  have contr := hA.left.right
  let K := (center G ⊔ A).subgroupOf H
  have A_IsComm : IsCommutative A :=
    inf_of_le_left hA.right ▸ IsCommutative_of_IsCommutative_subgroupOf A H hA.left.left
  have A_join_cen_IsComm : IsCommutative (center G ⊔ A) := IsComm_of_center_join_IsComm _ A_IsComm
  have K_IsComm : IsCommutative K := subgroupOf_isCommutative H (center G ⊔ A)
  have A_le_cen_join_A : A.subgroupOf H ≤ (center G ⊔ A).subgroupOf H := by
    simp [← map_subtype_le_map_subtype, hA.right]

  specialize contr K_IsComm A_le_cen_join_A
  obtain ⟨z, hz, z_not_in_A⟩ := h
  have z_in_H : z ∈ H := by apply hH hz
  have : ¬ K ≤ A.subgroupOf H := by
    simp only [SetLike.not_le_iff_exists, Subtype.exists, K]
    use z, z_in_H
    split_ands
    · simp only [mem_subgroupOf]; exact mem_sup_left hz
    · simp only [mem_subgroupOf]; exact z_not_in_A
  contradiction
</pre> </small> </p>
<div class="lemma_thmwrapper theorem-style-plain" id="MaximalAbelianSubgroup.le_centralizer_of_mem">
  <div class="lemma_thmheading">
    <span class="lemma_thmcaption">
    Lemma
    </span>
    <span class="lemma_thmlabel">6.17</span>
    <div class="thm_header_extras">

    
    ✓
        </div>
    <div class="thm_header_hidden_extras">

    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.le_centralizer_of_mem">#</a>
    
    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#a0000000272"><svg  class="icon icon-cogs "><use xlink:href="symbol-defs.svg#icon-cogs"></use></svg>
</a>
    
    
    <button class="modal"><svg  class="icon icon-mindmap "><use xlink:href="symbol-defs.svg#icon-mindmap"></use></svg>
</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Uses</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroupsOf">Definition 6.5</a></li>
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#IsCommutative_of_IsCommutative_subgroupOf">Corollary 6.12</a></li>
          
        </ul>
    
      </div>
    </div>

    
    
    <button class="modal lean">L∃∀N</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="https://AlexBrodbelt.github.io/ClassificationOfFiniteSubgroupsOfPGL/docs/find/#doc/MaximalAbelianSubgroup.le_centralizer_of_mem" class="lean_decl">MaximalAbelianSubgroup.le_centralizer_of_mem</a></li>
          
        </ul>
    
      </div>
    </div>

    
        </div>
  </div>
  <div class="lemma_thmcontent">
  <p>   Let \(H\) be a subgroup of a group \(G\), let \(A\) be a maximal abelian subgroup of \(H\), and let \(x \in A\) then \(A \le C_G(x)\). </p>

  </div>
</div>
<div class="proof_wrapper" id="a0000000272">
  <div class="proof_heading">
    <span class="proof_caption">
    Proof
    </span>
    <span class="expand-proof">▶</span>
  </div>
  <div class="proof_content">
  <p> Let \(H\) be a subgroup of a group \(G\) and let \(A\) be a maximal abelian subgroup of \(H\), let \(a \in A\), because \(x \in A\) and \(A\) is maximal abelian and thus abelian, we have that \(a x = x a\). Therefore, \(a \in C_G(x)\) as required </p>

  </div>
</div>
<p> <small class="footnotesize"> <pre class="verbatim">
lemma le_centralizer_of_mem {G : Type*} [Group G] {A H : Subgroup G}
  (hA : A ∈ MaximalAbelianSubgroupsOf H) {x : G} (x_in_A : x ∈ A) : A ≤ centralizer {x} := by
  intro a a_in_A
  obtain ⟨⟨A_IsCommutative', -⟩, A_le_G⟩ := hA
  have hA : IsCommutative (A ⊓ H) := IsCommutative_of_IsCommutative_subgroupOf A H A_IsCommutative'
  have A_meet_G_eq_A : A ⊓ H = A := inf_of_le_left A_le_G
  have := @mul_comm_of_mem_isCommutative G _ A (A_meet_G_eq_A ▸ hA) x a x_in_A a_in_A
  simp [mem_centralizer_iff]
  exact this
</pre> </small> </p>
<div class="lemma_thmwrapper theorem-style-plain" id="MaximalAbelianSubgroup.not_le_of_ne">
  <div class="lemma_thmheading">
    <span class="lemma_thmcaption">
    Lemma
    </span>
    <span class="lemma_thmlabel">6.18</span>
    <div class="thm_header_extras">

    
    ✓
        </div>
    <div class="thm_header_hidden_extras">

    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.not_le_of_ne">#</a>
    
    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#a0000000273"><svg  class="icon icon-cogs "><use xlink:href="symbol-defs.svg#icon-cogs"></use></svg>
</a>
    
    
    <button class="modal"><svg  class="icon icon-mindmap "><use xlink:href="symbol-defs.svg#icon-mindmap"></use></svg>
</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Uses</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroupsOf">Definition 6.5</a></li>
          
        </ul>
    
      </div>
    </div>

    
    
    <button class="modal lean">L∃∀N</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="https://AlexBrodbelt.github.io/ClassificationOfFiniteSubgroupsOfPGL/docs/find/#doc/MaximalAbelianSubgroup.not_le_of_ne" class="lean_decl">MaximalAbelianSubgroup.not_le_of_ne</a></li>
          
        </ul>
    
      </div>
    </div>

    
        </div>
  </div>
  <div class="lemma_thmcontent">
  <p>   Let \(H\) be a subgroup of a group \(G\) and let \(A \ne B\) be maximal abelian subgroups of \(H\) then \(B \not\le A\). </p>

  </div>
</div>
<div class="proof_wrapper" id="a0000000273">
  <div class="proof_heading">
    <span class="proof_caption">
    Proof
    </span>
    <span class="expand-proof">▶</span>
  </div>
  <div class="proof_content">
  <p>Suppose for a contradiction that \(B \le A\), then by the maximality of \(B\) and because \(A\) is commutative as it is maximal abelian we must have that \(A \le B\). But this shows \(A = B\) by antisymmetry, a contradiction. </p>

  </div>
</div>
<p> <small class="footnotesize"> <pre class="verbatim">
lemma lt_cen_meet_G {G : Type*} [Group G] {A B H : Subgroup G}
  (hA : A ∈ MaximalAbelianSubgroupsOf H)  (hB : B ∈ MaximalAbelianSubgroupsOf H)
  (A_ne_B: A ≠ B) {x : G} (x_in_A : x ∈ A) (x_in_B : x ∈ B):
  A &lt; centralizer {x} ⊓ H := by
  suffices (A : Set G) &lt; centralizer {x} ⊓ H by exact this
  apply lt_of_lt_of_le (b := (A : Set G) ∪ B)
  · have not_B_le_A : ¬ B ≤ A := not_le_of_ne A B H hA hB A_ne_B
    rw [Set.lt_iff_ssubset, Set.ssubset_iff_subset_ne]
    split_ands
    · exact Set.subset_union_left
    · symm
      apply ne_of_not_le
      intro h
      simp at h
      contradiction
  · simp only [coe_inf, Set.le_eq_subset, Set.subset_inter_iff, Set.union_subset_iff,
    SetLike.coe_subset_coe]
    split_ands
    · exact le_centralizer_of_mem hA x_in_A
    · exact le_centralizer_of_mem hB x_in_B
    · exact hA.right
    · exact hB.right
</pre> </small> </p>
<div class="lemma_thmwrapper theorem-style-plain" id="MaximalAbelianSubgroup.lt_cen_meet_G">
  <div class="lemma_thmheading">
    <span class="lemma_thmcaption">
    Lemma
    </span>
    <span class="lemma_thmlabel">6.19</span>
    <div class="thm_header_extras">

    
    ✓
        </div>
    <div class="thm_header_hidden_extras">

    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.lt_cen_meet_G">#</a>
    
    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#a0000000274"><svg  class="icon icon-cogs "><use xlink:href="symbol-defs.svg#icon-cogs"></use></svg>
</a>
    
    
    <button class="modal"><svg  class="icon icon-mindmap "><use xlink:href="symbol-defs.svg#icon-mindmap"></use></svg>
</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Uses</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroupsOf">Definition 6.5</a></li>
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.not_le_of_ne">Lemma 6.18</a></li>
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.le_centralizer_of_mem">Lemma 6.17</a></li>
          
        </ul>
    
      </div>
    </div>

    
    
    <button class="modal lean">L∃∀N</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="https://AlexBrodbelt.github.io/ClassificationOfFiniteSubgroupsOfPGL/docs/find/#doc/MaximalAbelianSubgroup.lt_cen_meet_G" class="lean_decl">MaximalAbelianSubgroup.lt_cen_meet_G</a></li>
          
        </ul>
    
      </div>
    </div>

    
        </div>
  </div>
  <div class="lemma_thmcontent">
  <p>   Let \(H\) be a subgroup of \(G\), let \(A \ne B\) be maximal abelian subgroups of \(H\) and let \(x \in A \cap B\) then \(A {\lt} C_G(x) \sqcap H\). </p>

  </div>
</div>
<div class="proof_wrapper" id="a0000000274">
  <div class="proof_heading">
    <span class="proof_caption">
    Proof
    </span>
    <span class="expand-proof">▶</span>
  </div>
  <div class="proof_content">
  <p> To show the inequality holds within the subgroup complete lattice, it suffices to show the inequality holds on the complete lattice of underlying subsets. </p>
<p>We show that the inequality holds by transitivity. Since \(A {\lt} A \cup B\) because <a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.not_le_of_ne">6.18</a> guarantees \(B \not\le A\), furthermore, \(A \cup B \le C_G(x)\) by <a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.le_centralizer_of_mem">6.17</a> where we use the fact that both \(x \in A\) and \(x \in B\); and \(A \cup B \le H\) since \(A, B \le H\). We can conclude that indeed, \(A \cup B \le C_G(x) \sqcap H\). </p>
<p>Overall, by transitivity we have that \(A {\lt} C_G(x) \sqcap H\). </p>

  </div>
</div>
<p> <small class="footnotesize"> <pre class="verbatim">
lemma lt_cen_meet_G {G : Type*} [Group G] {A B H : Subgroup G}
  (hA : A ∈ MaximalAbelianSubgroupsOf H)  (hB : B ∈ MaximalAbelianSubgroupsOf H)
  (A_ne_B: A ≠ B) {x : G} (x_in_A : x ∈ A) (x_in_B : x ∈ B):
  A &lt; centralizer {x} ⊓ H := by
  suffices (A : Set G) &lt; centralizer {x} ⊓ H by exact this
  apply lt_of_lt_of_le (b := (A : Set G) ∪ B)
  · have not_B_le_A : ¬ B ≤ A := not_le_of_ne A B H hA hB A_ne_B
    rw [Set.lt_iff_ssubset, Set.ssubset_iff_subset_ne]
    split_ands
    · exact Set.subset_union_left
    · symm
      apply ne_of_not_le
      intro h
      simp at h
      contradiction
  · simp only [coe_inf, Set.le_eq_subset, Set.subset_inter_iff, Set.union_subset_iff,
    SetLike.coe_subset_coe]
    split_ands
    · exact le_centralizer_of_mem hA x_in_A
    · exact le_centralizer_of_mem hB x_in_B
    · exact hA.right
    · exact hB.right
</pre> </small> </p>
<div class="theorem_thmwrapper theorem-style-plain" id="MaximalAbelianSubgroup.center_eq_meet_of_ne_MaximalAbelianSubgroups">
  <div class="theorem_thmheading">
    <span class="theorem_thmcaption">
    Theorem
    </span>
    <span class="theorem_thmlabel">6.20</span>
    <div class="thm_header_extras">

        </div>
    <div class="thm_header_hidden_extras">

    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.center_eq_meet_of_ne_MaximalAbelianSubgroups">#</a>
    
    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#a0000000275"><svg  class="icon icon-cogs "><use xlink:href="symbol-defs.svg#icon-cogs"></use></svg>
</a>
    
    
    <button class="modal"><svg  class="icon icon-mindmap "><use xlink:href="symbol-defs.svg#icon-mindmap"></use></svg>
</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Uses</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroupsOf">Definition 6.5</a></li>
          
          <li><a href="Ch5_PropertiesOfSLOverAlgClosedField.html#SpecialSubgroups.Z">Definition 5.35</a></li>
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.centralizer_meet_G_in_MaximalAbelianSubgroups_of_noncentral">Theorem 6.11</a></li>
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.center_le">Lemma 6.16</a></li>
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.lt_cen_meet_G">Lemma 6.19</a></li>
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.le_centralizer_of_mem">Lemma 6.17</a></li>
          
        </ul>
    
      </div>
    </div>

    
    
    <button class="modal lean">L∃∀N</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="https://AlexBrodbelt.github.io/ClassificationOfFiniteSubgroupsOfPGL/docs/find/#doc/MaximalAbelianSubgroup.center_eq_meet_of_ne_MaximalAbelianSubgroups" class="lean_decl">MaximalAbelianSubgroup.center_eq_meet_of_ne_MaximalAbelianSubgroups</a></li>
          
        </ul>
    
      </div>
    </div>

    
        </div>
  </div>
  <div class="theorem_thmcontent">
  <p>   For any two distinct subgroups \(A\) and \(B\) of \(\mathfrak {M}\), we have </p>
<div class="displaymath" id="a0000000276">
  \begin{align*}  A \cap B = Z. \end{align*}
</div>

  </div>
</div>
<div class="proof_wrapper" id="a0000000275">
  <div class="proof_heading">
    <span class="proof_caption">
    Proof
    </span>
    <span class="expand-proof">▶</span>
  </div>
  <div class="proof_content">
  <p> Consider \(x \in A \cap B\), since both \(A\) and \(B\) are abelian, \(x\) commutes with each \(a \in A\) and \(b \in B\) and thus \(C_G(x)\) contains both \(A\) and \(B\). If \(x \in G \setminus Z\), then \(C_G(x) \in \mathfrak {M}\) by <a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.centralizer_meet_G_in_MaximalAbelianSubgroups_of_noncentral">6.11</a> and because \(A\) and \(B\) are distinct we have \(A \subsetneq A \cup B \subset C_G(x)\). </p>
<p>This contradicts the fact that \(A\) is maximum abelian and thus \(x \in Z\). Finally, note that Z is contained in every maximal abelian subgroup, since otherwise we would have the contradiction that \(\langle A, Z \rangle \) would generate a larger abelian subgroup than \(A\). Hence \(A \cap B = Z\). <br /></p>

  </div>
</div>
<p> <small class="footnotesize"> <pre class="verbatim">
theorem center_eq_meet_of_ne_MaximalAbelianSubgroups {F : Type*} [Field F] [IsAlgClosed F]
  [DecidableEq F] (A B G : Subgroup SL(2,F)) (hA : A ∈ MaximalAbelianSubgroupsOf G)
  (hB : B ∈ MaximalAbelianSubgroupsOf G) (A_ne_B: A ≠ B)(center_le_G : center SL(2,F) ≤ G) :
  A ⊓ B = center SL(2,F) := by
  ext x
  constructor
  · rintro ⟨x_in_A, x_in_B⟩
    simp at x_in_A x_in_B
    by_cases hx : x ∈ G.carrier \ (center SL(2,F))
    · have cen_meet_G_in_MaximalAbelianSubgroups :=
        centralizer_meet_G_in_MaximalAbelianSubgroups_of_noncentral G x hx
      obtain ⟨⟨cen_meet_G_IsCommutative, _h⟩, -⟩ :=
        cen_meet_G_in_MaximalAbelianSubgroups
      simp only [inf_subgroupOf_right] at cen_meet_G_IsCommutative
      have cen_meet_G_le_A : centralizer {x} ⊓ G ≤ A := by
        suffices (centralizer {x}).subgroupOf G ≤ A.subgroupOf G by
          simp only [← map_subtype_le_map_subtype, subgroupOf_map_subtype, le_inf_iff, inf_le_right,
            and_true] at this
          exact this
        -- apply maximality of A
        apply hA.left.right
        exact cen_meet_G_IsCommutative
        simp only [← map_subtype_le_map_subtype, subgroupOf_map_subtype, le_inf_iff, inf_le_right,
          and_true]
        rw [inf_of_le_left hA.right]
        exact le_centralizer_of_mem hA x_in_A
        -- obtain a contradiction
      have not_cen_meet_G_le_A :=
        not_le_of_lt &lt;| lt_cen_meet_G hA hB A_ne_B x_in_A x_in_B
      contradiction
    · simp at hx
      specialize hx (hA.right x_in_A)
      exact hx
  · intro hx
    have cen_le_A := center_le G A hA center_le_G
    have cen_le_B := center_le G B hB center_le_G
    exact le_inf cen_le_A cen_le_B hx
</pre> </small> </p>
<div class="lemma_thmwrapper theorem-style-plain" id="MaximalAbelianSubgroup.singleton_of_cen_eq_G">
  <div class="lemma_thmheading">
    <span class="lemma_thmcaption">
    Lemma
    </span>
    <span class="lemma_thmlabel">6.21</span>
    <div class="thm_header_extras">

    
    ✓
        </div>
    <div class="thm_header_hidden_extras">

    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.singleton_of_cen_eq_G">#</a>
    
    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#a0000000277"><svg  class="icon icon-cogs "><use xlink:href="symbol-defs.svg#icon-cogs"></use></svg>
</a>
    
    
    <button class="modal"><svg  class="icon icon-mindmap "><use xlink:href="symbol-defs.svg#icon-mindmap"></use></svg>
</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Uses</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroupsOf">Definition 6.5</a></li>
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#IsMaximalAbelian">Definition 6.1</a></li>
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.center_le">Lemma 6.16</a></li>
          
        </ul>
    
      </div>
    </div>

    
    
    <button class="modal lean">L∃∀N</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="https://AlexBrodbelt.github.io/ClassificationOfFiniteSubgroupsOfPGL/docs/find/#doc/MaximalAbelianSubgroup.singleton_of_cen_eq_G" class="lean_decl">MaximalAbelianSubgroup.singleton_of_cen_eq_G</a></li>
          
        </ul>
    
      </div>
    </div>

    
        </div>
  </div>
  <div class="lemma_thmcontent">
  <p>   Let \(H\) be a subgroup of \(G\) and suppose \(H = Z(G)\) then the maximal abelian subgroups are \(\mathfrak {M} = \{ Z(G)\} \). </p>

  </div>
</div>
<div class="proof_wrapper" id="a0000000277">
  <div class="proof_heading">
    <span class="proof_caption">
    Proof
    </span>
    <span class="expand-proof">▶</span>
  </div>
  <div class="proof_content">
  <p> We show that \(A \in \mathfrak {M}\) if and only if \(A = Z(G)\) </p>
<ul class="itemize">
  <li><p>Suppose \(A\) is a maximal abelian subgroup of \(H\), then by <a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.center_le">6.16</a> \(Z(G) \le A\). Furthermore, \(A \le H = Z(G)\); which overall shows \(A = Z(G)\) as required. </p>
</li>
  <li><p>Suppose \(A = Z(G)\) we now show that \(A\) is a maximal abelian subgroup. On the one hand, \(A = Z(G)\) so it follows that \(A\) is abelian. On the other hand, we need to show that \(Z(G)\) is maximal. Let \(B\) be a subgroup of \(H\) that is commutative and such that \(Z(G) \sqcap H \le B\), we show that it follows that \(B \le Z(G) \sqcap H\). But this follows trivially as \(B \leq H = Z(G) \sqcap H = \top \). </p>
</li>
</ul>

  </div>
</div>
<p> <small class="footnotesize"> <pre class="verbatim">
lemma singleton_of_cen_eq_G {G : Type*} [Group G] (H : Subgroup G) (hH : H = center G) :
  MaximalAbelianSubgroupsOf H = {center G} := by
  ext A
  have cen_le_G : center G ≤ H := le_of_eq hH.symm
  constructor
  · intro hA
    have center_le_A := center_le H A hA cen_le_G
    have A_le_center := hH ▸ hA.right
    -- A = center G
    simp [le_antisymm A_le_center center_le_A]
  · rintro ⟨rfl⟩
    simp [MaximalAbelianSubgroupsOf, IsMaximalAbelian]
    split_ands
    · exact subgroupOf_isCommutative H (center G)
    · intro A _A_IsComm _cen_le_A
      simp_rw [← hH]
      simp only [subgroupOf_self, le_top]
    exact cen_le_G
</pre> </small> </p>
<div class="lemma_thmwrapper theorem-style-plain" id="MaximalAbelianSubgroup.IsCyclic_and_card_Coprime_CharP_of_center_eq">
  <div class="lemma_thmheading">
    <span class="lemma_thmcaption">
    Lemma
    </span>
    <span class="lemma_thmlabel">6.22</span>
    <div class="thm_header_extras">

    
    ✓
        </div>
    <div class="thm_header_hidden_extras">

    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.IsCyclic_and_card_Coprime_CharP_of_center_eq">#</a>
    
    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#a0000000278"><svg  class="icon icon-cogs "><use xlink:href="symbol-defs.svg#icon-cogs"></use></svg>
</a>
    
    
    <button class="modal"><svg  class="icon icon-mindmap "><use xlink:href="symbol-defs.svg#icon-mindmap"></use></svg>
</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Uses</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroupsOf">Definition 6.5</a></li>
          
          <li><a href="Ch5_PropertiesOfSLOverAlgClosedField.html#SpecialSubgroups.Z">Definition 5.35</a></li>
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.singleton_of_cen_eq_G">Lemma 6.21</a></li>
          
          <li><a href="Ch5_PropertiesOfSLOverAlgClosedField.html#SpecialSubgroups.card_Z_eq_two_of_two_ne_zero">Lemma 5.40</a></li>
          
          <li><a href="Ch5_PropertiesOfSLOverAlgClosedField.html#SpecialSubgroups.IsCyclic_Z">Lemma 5.42</a></li>
          
          <li><a href="Ch5_PropertiesOfSLOverAlgClosedField.html#SpecialSubgroups.card_Z_eq_one_of_two_eq_zero">Lemma 5.41</a></li>
          
        </ul>
    
      </div>
    </div>

    
    
    <button class="modal lean">L∃∀N</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="https://AlexBrodbelt.github.io/ClassificationOfFiniteSubgroupsOfPGL/docs/find/#doc/MaximalAbelianSubgroup.IsCyclic_and_card_Coprime_CharP_of_center_eq" class="lean_decl">MaximalAbelianSubgroup.IsCyclic_and_card_Coprime_CharP_of_center_eq</a></li>
          
        </ul>
    
      </div>
    </div>

    
        </div>
  </div>
  <div class="lemma_thmcontent">
  <p>   If \(G = Z(G)\) then an element \(A\) of \(\mathfrak {M}\), the maximal abelian subgroups of \(G\) is a cyclic group whose order is relatively prime to \(p\). </p>

  </div>
</div>
<div class="proof_wrapper" id="a0000000278">
  <div class="proof_heading">
    <span class="proof_caption">
    Proof
    </span>
    <span class="expand-proof">▶</span>
  </div>
  <div class="proof_content">
  <p> Here \(G\) is the only element of \(\mathfrak {M}\). If \(p \neq 2\) then \(|G|=2\) and \(G\) is a cyclic group whose order is relatively prime to \(p\). If \(p=2\) then \(G = I_G\) which is trivially cyclic. <br /></p>

  </div>
</div>
<p> <small class="footnotesize"> <pre class="verbatim">
  theorem IsCyclic_and_card_Coprime_CharP_of_center_eq {F : Type*} [Field F] {p : ℕ}
    (hp : Nat.Prime p) [C : CharP F p] (A G : Subgroup SL(2,F)) (hA : A ∈ MaximalAbelianSubgroupsOf G)
    (hG : G = center SL(2,F)) : IsCyclic A ∧ Nat.Coprime (Nat.card A) p := by
    rw [singleton_of_cen_eq_G G hG] at hA
    simp at hA
    rw [center_SL2_eq_Z] at hA
    rw [hA]
    split_ands
    · exact IsCyclic_Z
    · by_cases h : p ≠ 2
      · have two_ne_zero : (2 : F) ≠ 0 := by
          intro h'
          have : ((2 : ℕ ) : F) = (2 : F) := by rfl
          rw [← this, CharP.cast_eq_zero_iff F p 2,
           Nat.prime_dvd_prime_iff_eq hp Nat.prime_two] at h'
          contradiction
        have NeZero_two : NeZero (2 : F) := { out := two_ne_zero }
        rw [card_Z_eq_two_of_two_ne_zero, Nat.coprime_two_left]
        exact Nat.Prime.odd_of_ne_two hp h
      · simp at h
        let C' : CharP F 2 := by exact CharP.congr p h
        have two_eq_zero : (2 : F) = 0 := CharTwo.two_eq_zero
        rw [card_Z_eq_one_of_two_eq_zero two_eq_zero]
        exact Nat.gcd_one_left p
  </pre> </small> </p>
<div class="corollary_thmwrapper theorem-style-plain" id="mem_centralizer_self">
  <div class="corollary_thmheading">
    <span class="corollary_thmcaption">
    Corollary
    </span>
    <span class="corollary_thmlabel">6.23</span>
    <div class="thm_header_extras">

    
    ✓
        </div>
    <div class="thm_header_hidden_extras">

    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#mem_centralizer_self">#</a>
    
    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#a0000000279"><svg  class="icon icon-cogs "><use xlink:href="symbol-defs.svg#icon-cogs"></use></svg>
</a>
    
    
    
    <button class="modal lean">L∃∀N</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="https://AlexBrodbelt.github.io/ClassificationOfFiniteSubgroupsOfPGL/docs/find/#doc/mem_centralizer_self" class="lean_decl">mem_centralizer_self</a></li>
          
        </ul>
    
      </div>
    </div>

    
        </div>
  </div>
  <div class="corollary_thmcontent">
  <p>  Let \(G\) be a group then centralizer of an element \(x \in G\), \(C_G(x)\) contains \(x\). </p>

  </div>
</div>
<div class="proof_wrapper" id="a0000000279">
  <div class="proof_heading">
    <span class="proof_caption">
    Proof
    </span>
    <span class="expand-proof">▶</span>
  </div>
  <div class="proof_content">
  <p>An element always commutes with itself. </p>

  </div>
</div>
<p> <small class="footnotesize"> <pre class="verbatim">
    lemma mem_centralizer_self {G : Type*} [Group G] (x : G) : x ∈ centralizer {x} := by
      rintro y ⟨rfl⟩; rfl
  </pre> </small> </p>
<div class="lemma_thmwrapper theorem-style-plain" id="MaximalAbelianSubgroup.center_not_mem">
  <div class="lemma_thmheading">
    <span class="lemma_thmcaption">
    Lemma
    </span>
    <span class="lemma_thmlabel">6.24</span>
    <div class="thm_header_extras">

    
    ✓
        </div>
    <div class="thm_header_hidden_extras">

    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.center_not_mem">#</a>
    
    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#a0000000280"><svg  class="icon icon-cogs "><use xlink:href="symbol-defs.svg#icon-cogs"></use></svg>
</a>
    
    
    <button class="modal"><svg  class="icon icon-mindmap "><use xlink:href="symbol-defs.svg#icon-mindmap"></use></svg>
</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Uses</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroupsOf">Definition 6.5</a></li>
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#mem_centralizer_self">Corollary 6.23</a></li>
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.centralizer_meet_G_in_MaximalAbelianSubgroups_of_noncentral">Theorem 6.11</a></li>
          
        </ul>
    
      </div>
    </div>

    
    
    <button class="modal lean">L∃∀N</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="https://AlexBrodbelt.github.io/ClassificationOfFiniteSubgroupsOfPGL/docs/find/#doc/MaximalAbelianSubgroup.center_not_mem" class="lean_decl">MaximalAbelianSubgroup.center_not_mem</a></li>
          
        </ul>
    
      </div>
    </div>

    
        </div>
  </div>
  <div class="lemma_thmcontent">
  <p>   Let \(F\) be an algebraically closed field, let \(G\) be a subgroup of \(\operatorname{SL}_2(F)\) where \(G \ne Z(\operatorname{SL}_2(F))\) then the center is not a maximal abelian subgroup of \(G\), \(Z \notin \mathfrak {M}\). </p>

  </div>
</div>
<div class="proof_wrapper" id="a0000000280">
  <div class="proof_heading">
    <span class="proof_caption">
    Proof
    </span>
    <span class="expand-proof">▶</span>
  </div>
  <div class="proof_content">
  <p> We split on the case where \(Z \le G\) and \(Z \not\le G\). </p>
<ul class="itemize">
  <li><p>In the case where \(Z \le G\) </p>
<p>Since \(Z \le G\) and \(Z \ne G\) it follows that \(Z {\lt} G\), and so there must exist an \(x\) element in \(G\) which does not belong to \(Z\). Therefore, since \(x \in G \setminus Z\) by <a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.centralizer_meet_G_in_MaximalAbelianSubgroups_of_noncentral">6.11</a> \(C_{\operatorname{SL}_2(F)}(x) \sqcap G \in \mathfrak {M}\), but since \(x \notin Z\) yet \(x \in C_{\operatorname{SL}_2(F)} \sqcap G\) by <a href="Ch6_MaximalAbelianSubgroupClassEquation.html#mem_centralizer_self">6.23</a> it follows that \(Z {\lt} C_{\operatorname{SL}_2(F)}(x) \sqcap G\), thus \(Z\) is not a maximal abelian subgroup. </p>
</li>
  <li><p>In the case where \(Z \not\le G\) </p>
<p>Suppose for a contradiction \(Z\) is maximal abelian subgroup of \(G\), then it follows that \(Z \le G\); this contradicts the assumption that \(Z \not\le G\). Thus \(Z\) is not a maximal abelian subgroup of \(G\) in this case either. </p>
</li>
</ul>

  </div>
</div>
<p> <small class="footnotesize"> <pre class="verbatim">
lemma center_not_mem {F : Type*} [Field F] [IsAlgClosed F] [DecidableEq F] (G : Subgroup SL(2,F))
  (hG : center SL(2,F) ≠ G) : center SL(2,F) ∉ MaximalAbelianSubgroupsOf G := by
  intro h
  by_cases h' : center SL(2,F) ≤ G
  · obtain ⟨x, x_in_G, x_not_in_cen⟩ := SetLike.exists_of_lt (lt_of_le_of_ne h' hG)
    have centra_ne_cen : centralizer {x} ⊓ G ≠ center SL(2,F) := by
      apply ne_of_gt
      rw [SetLike.lt_iff_le_and_exists]
      split_ands
      · exact le_inf (Subgroup.center_le_centralizer ({x} : Set SL(2,F))) h'
      · exact ⟨x, ⟨mem_centralizer_self x, x_in_G⟩, x_not_in_cen⟩
    have centra_mem_MaxAbSub :=
      centralizer_meet_G_in_MaximalAbelianSubgroups_of_noncentral
        G x (Set.mem_diff_of_mem x_in_G x_not_in_cen)
    have cen_le_centra : center SL(2, F) ≤ centralizer {x} ⊓ G :=
      le_inf (center_le_centralizer {x}) h'
    have cen_le_centra' : (center SL(2, F)).subgroupOf G ≤ (centralizer {x} ⊓ G).subgroupOf G := by
      simp [← map_subtype_le_map_subtype]; rw [inf_of_le_left h']; exact center_le_centralizer {x}
    have centra_le_cen := h.left.right centra_mem_MaxAbSub.left.left cen_le_centra'
    simp [← map_subtype_le_map_subtype] at centra_le_cen
    absurd centra_ne_cen (le_antisymm centra_le_cen cen_le_centra)
    trivial
  · absurd h' h.right
    trivial
</pre> </small> </p>
<div class="lemma_thmwrapper theorem-style-plain" id="MaximalAbelianSubgroup.le_centralizer_meet">
  <div class="lemma_thmheading">
    <span class="lemma_thmcaption">
    Lemma
    </span>
    <span class="lemma_thmlabel">6.25</span>
    <div class="thm_header_extras">

    
    ✓
        </div>
    <div class="thm_header_hidden_extras">

    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.le_centralizer_meet">#</a>
    
    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#a0000000281"><svg  class="icon icon-cogs "><use xlink:href="symbol-defs.svg#icon-cogs"></use></svg>
</a>
    
    
    <button class="modal"><svg  class="icon icon-mindmap "><use xlink:href="symbol-defs.svg#icon-mindmap"></use></svg>
</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Uses</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroupsOf">Definition 6.5</a></li>
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.le_centralizer_of_mem">Lemma 6.17</a></li>
          
        </ul>
    
      </div>
    </div>

    
    
    <button class="modal lean">L∃∀N</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="https://AlexBrodbelt.github.io/ClassificationOfFiniteSubgroupsOfPGL/docs/find/#doc/MaximalAbelianSubgroup.le_centralizer_meet" class="lean_decl">MaximalAbelianSubgroup.le_centralizer_meet</a></li>
          
        </ul>
    
      </div>
    </div>

    
        </div>
  </div>
  <div class="lemma_thmcontent">
  <p>   Let \(H\) be a subgroup of a group \(G\), let \(A\) be a maximal abelian subgroup of \(H\), and suppose \(x \in A \subseteq G\) then \(A \le C_{\operatorname{SL}_2(F)}(x) \sqcap H\). </p>

  </div>
</div>
<div class="proof_wrapper" id="a0000000281">
  <div class="proof_heading">
    <span class="proof_caption">
    Proof
    </span>
    <span class="expand-proof">▶</span>
  </div>
  <div class="proof_content">
  
<p>Since \(x \in A\) by <a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.le_centralizer_of_mem">6.17</a> we have that \(A \le C_{\operatorname{SL}_2(F)}(x)\) and considering \(A\) is a maximal abelian subgroup of \(G\), it follows that \(A \le C_{\operatorname{SL}_2(F)}(x) \sqcap G\). </p>

  </div>
</div>
<p> <small class="footnotesize"> <pre class="verbatim">
theorem le_centralizer_meet {G : Type*} [Group G] (A H : Subgroup G)
  (hA : A ∈ MaximalAbelianSubgroupsOf H) (x : G) (x_in_A : x ∈ A) :
  A ≤ centralizer {x} ⊓ H := by
  apply le_inf
  exact le_centralizer_of_mem hA x_in_A
  apply hA.right
</pre> </small> </p>
<div class="lemma_thmwrapper theorem-style-plain" id="MaximalAbelianSubgroup.eq_centralizer_meet_of_center_lt">
  <div class="lemma_thmheading">
    <span class="lemma_thmcaption">
    Lemma
    </span>
    <span class="lemma_thmlabel">6.26</span>
    <div class="thm_header_extras">

    
    ✓
        </div>
    <div class="thm_header_hidden_extras">

    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.eq_centralizer_meet_of_center_lt">#</a>
    
    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#a0000000282"><svg  class="icon icon-cogs "><use xlink:href="symbol-defs.svg#icon-cogs"></use></svg>
</a>
    
    
    <button class="modal"><svg  class="icon icon-mindmap "><use xlink:href="symbol-defs.svg#icon-mindmap"></use></svg>
</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Uses</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroupsOf">Definition 6.5</a></li>
          
          <li><a href="Ch5_PropertiesOfSLOverAlgClosedField.html#SpecialSubgroups.Z">Definition 5.35</a></li>
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.centralizer_meet_G_in_MaximalAbelianSubgroups_of_noncentral">Theorem 6.11</a></li>
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.le_centralizer_meet">Lemma 6.25</a></li>
          
        </ul>
    
      </div>
    </div>

    
    
    <button class="modal lean">L∃∀N</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="https://AlexBrodbelt.github.io/ClassificationOfFiniteSubgroupsOfPGL/docs/find/#doc/MaximalAbelianSubgroup.eq_centralizer_meet_of_center_lt" class="lean_decl">MaximalAbelianSubgroup.eq_centralizer_meet_of_center_lt</a></li>
          
        </ul>
    
      </div>
    </div>

    
        </div>
  </div>
  <div class="lemma_thmcontent">
  <p>   Let \(F\) be an algebraically closed field, let \(G\) and \(A\) be a subgroup of \(\operatorname{SL}_2(F)\) where \(A\) is a maximal abelian subgroup of \(G\) and \(Z(\operatorname{SL}_2(F)) {\lt} A\) then there exists an element \(x \in G \setminus Z(SL(2)) \subseteq \operatorname{SL}_2(F)\) such that \(A = C_{\operatorname{SL}_2(F)}(x) \sqcap G = C_{G}(x)\). </p>

  </div>
</div>
<div class="proof_wrapper" id="a0000000282">
  <div class="proof_heading">
    <span class="proof_caption">
    Proof
    </span>
    <span class="expand-proof">▶</span>
  </div>
  <div class="proof_content">
  <p> Since \(Z {\lt} A\), there exists a \(x \in A \setminus Z\), we will show this is our desired witness. Since \(x \in A \setminus Z \subseteq G \setminus Z\) as \(A \le G\), by <a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.centralizer_meet_G_in_MaximalAbelianSubgroups_of_noncentral">6.11</a> \(C_{\operatorname{SL}_2(F)} \sqcap G \in \mathfrak {M}\). By <a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.le_centralizer_meet">6.25</a> it follows that \(A \le C_{\operatorname{SL}_2(F)}(X) \sqcap G\). Similarly, by the maximality of \(A\) we also have that \(C_{\operatorname{SL}_2(F)}(x) \sqcap G \le A\). Therefore, \(C_{\operatorname{SL}_2(F)}(x) \sqcap G = A\). </p>

  </div>
</div>
<p> <small class="footnotesize"> <pre class="verbatim">
lemma eq_centralizer_meet_of_center_lt {F : Type*} [Field F] [IsAlgClosed F] [DecidableEq F]
  (A G : Subgroup SL(2,F)) (center_lt : center SL(2,F) &lt; A) (hA : A ∈ MaximalAbelianSubgroupsOf G) :
  ∃ x : SL(2,F), x ∈ G.carrier \ center SL(2,F) ∧ A = centralizer {x} ⊓ G := by
  rw [SetLike.lt_iff_le_and_exists] at center_lt
  obtain ⟨-, x, x_in_A, x_not_in_center⟩ := center_lt
  have hx : x ∈ G.carrier \ center SL(2,F) := Set.mem_diff_of_mem (hA.right x_in_A) x_not_in_center
  obtain ⟨⟨centra_meet_G_IsComm, -⟩, -⟩ :=
    centralizer_meet_G_in_MaximalAbelianSubgroups_of_noncentral G x hx
  -- We show centralizer {x} ⊓ G ≤ A
  have A_le_centralizer_meet_G := (le_centralizer_meet A G hA x x_in_A)
  have A_le_centralizer_meet_G' : A.subgroupOf G ≤ (centralizer {x} ⊓ G).subgroupOf G := by
    simp [← map_subtype_le_map_subtype]
    exact le_trans inf_le_left &lt;| le_trans A_le_centralizer_meet_G inf_le_left
  -- by using the maximality of A and using the fact A ≤ centralizer {x} ⊓ G
  have centralizer_meet_G_le_A := hA.left.right centra_meet_G_IsComm A_le_centralizer_meet_G'
  simp [← map_subtype_le_map_subtype] at centralizer_meet_G_le_A
  -- We show A = centralizer {x} ⊓ G
  exact ⟨x, hx, le_antisymm A_le_centralizer_meet_G centralizer_meet_G_le_A⟩
</pre> </small> </p>
<div class="theorem_thmwrapper theorem-style-plain" id="MaximalAbelianSubgroup.IsCyclic_and_card_coprime_CharP_of_IsConj_d">
  <div class="theorem_thmheading">
    <span class="theorem_thmcaption">
    Theorem
    </span>
    <span class="theorem_thmlabel">6.27</span>
    <div class="thm_header_extras">

    
    ✓
        </div>
    <div class="thm_header_hidden_extras">

    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.IsCyclic_and_card_coprime_CharP_of_IsConj_d">#</a>
    
    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#a0000000283"><svg  class="icon icon-cogs "><use xlink:href="symbol-defs.svg#icon-cogs"></use></svg>
</a>
    
    
    
    <button class="modal lean">L∃∀N</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="https://AlexBrodbelt.github.io/ClassificationOfFiniteSubgroupsOfPGL/docs/find/#doc/MaximalAbelianSubgroup.IsCyclic_and_card_coprime_CharP_of_IsConj_d" class="lean_decl">MaximalAbelianSubgroup.IsCyclic_and_card_coprime_CharP_of_IsConj_d</a></li>
          
        </ul>
    
      </div>
    </div>

    
        </div>
  </div>
  <div class="theorem_thmcontent">
  
<p> Let \(F\) be an algebraically closed field of characteristic \(p\) and let \(G\) be a finite subgroup of \(\operatorname{SL}_2(F)\) containing \(Z\), let \(A\) be a subgroup of \(\operatorname{SL}_2(F)\) which is a maximal abelian subgroup of \(G\) and furthermore suppose that \(A = C_{\operatorname{SL}_2(F)}(x) \sqcap G\) where \(x \in \operatorname{SL}_2(F) \setminus Z\) and that \(x\) is conjugate to \(d_\delta \) for some \(\delta \in F^\times \) then \(A\) is cyclic and the cardinality of \(A\) is coprime to \(p\). </p>

  </div>
</div>
<div class="proof_wrapper" id="a0000000283">
  <div class="proof_heading">
    <span class="proof_caption">
    Proof
    </span>
    <span class="expand-proof">▶</span>
  </div>
  <div class="proof_content">
  <p> If \(\pmb {x}\) is <b class="bfseries">conjugate to</b> \(\pmb {d_\delta }\) <b class="bfseries">in</b> \(\operatorname{SL}_2(f)\). There is a \(y \in \operatorname{SL}_2(F)\) such that \(x = y d_\delta y^{-1}\). Since \(x \not\in Z\), we have \(d_\delta \not\in Z\), because otherwise we get the contradiction, </p>
<div class="displaymath" id="a0000000284">
  \begin{align*}  x = y d_\delta y^{-1} = d_\delta \in Z. \end{align*}
</div>
<p> Thus \(\omega \neq \pm 1\). Let \(A = C_G(x)\), since \(C_G(x) \in \mathfrak {M}\) by part (i). Observe that </p>
<div class="displaymath" id="a0000000285">
  \begin{align*}  C_G(d_\delta ) & {\lt} C_{\operatorname{SL}_2(F)}(d_\delta ) \\ & = D \\ & \cong F^\times . \end{align*}
</div>
<p>Since \(A\) is conjugate to \(C_G(d_\delta )\) by Proposition <a href="Ch5_PropertiesOfSLOverAlgClosedField.html#centralizer_d_eq_D">5.61</a>, we have that \(A\) is isomorphic to a finite subgroup of \(F^\times \), \(A\) is cyclic. By Lagrange’s Theorem any finite subgroup of \(F^\times \) has an order which divides \(p^m - 1\) for some \(m \in \mathbb {Z}^+\), and since \(p \nmid (p^m - 1)\), \(|A|\) is relatively prime to \(p\). <br /></p>

  </div>
</div>
<p> <small class="footnotesize"> <pre class="verbatim">
theorem IsCyclic_and_card_coprime_CharP_of_IsConj_d {F : Type*} [Field F]
  [IsAlgClosed F] [DecidableEq F] {p : ℕ} [hp' : Fact (Nat.Prime p)] [hC : CharP F p]
  (G : Subgroup SL(2,F)) [hG₀ : Finite G] (A : Subgroup SL(2,F)) (x : SL(2,F))
  (x_not_in_center : x ∉ center SL(2,F)) (A_eq_centra : A = centralizer {x} ⊓ G )
  (δ : Fˣ) (x_IsConj_d : IsConj (d δ) x ) :
  (IsCyclic A ∧ Nat.Coprime (Nat.card A) p) := by
  simp [center_SL2_eq_Z] at x_not_in_center
  have δ_ne_one : δ ≠ 1 := by rintro rfl; simp_all
  have δ_ne_neg_one : δ ≠ -1 := by rintro rfl; simp_all
  obtain ⟨c, c_smul_D_eq_centralizer⟩ :=
      conjugate_centralizers_of_IsConj (SpecialMatrices.d δ) x x_IsConj_d
  rw [centralizer_d_eq_D δ δ_ne_one δ_ne_neg_one] at c_smul_D_eq_centralizer
  -- A = conj c • D ⊓ G ≤ conj c • D F
  have A_le_conj_D :=
      le_trans (le_of_eq A_eq_centra) &lt;|
      le_trans inf_le_left (le_of_eq c_smul_D_eq_centralizer.symm)
  -- to prove A has cardinality coprime to p we construct the following homomorphism
  -- compose the monoid homomorphisms of inclusions and isomorphisms
  let f₁ : A →* (conj c • D F:) := inclusion A_le_conj_D
  let f₂ : (conj c • D F:) →* D F := (MulEquiv.subgroupMap (conj c) (D F)).symm.toMonoidHom
  let f₃ : (D F) →* Fˣ := (D_iso_units F).toMonoidHom
  let f : A →* Fˣ := f₃.comp (f₂.comp f₁)
  -- f is injective
  have f_inj : Injective f := by
    dsimp [f]
    apply Injective.comp
    exact MulEquiv.injective (D_iso_units F)
    apply Injective.comp
    -- we construct the monoid homomorphism from the isomorphism
    exact MulEquiv.injective (MulEquiv.subgroupMap (conj c) (D F)).symm
    -- we construct the inclusion monoid homomorphism
    exact inclusion_injective A_le_conj_D
  -- to prove A is cyclic we construct the following homomorphism
  -- `F *← Fˣ *← A`
  let f' : A →* F := (Units.coeHom F).comp f
  have f'_inj : Injective f' := by
    dsimp [f']
    apply Injective.comp
    exact Units.coeHom_injective
    exact f_inj
  let inst : Finite A := A_eq_centra  ▸ Set.Finite.subset hG₀ inf_le_right
  split_ands
    -- A is cyclic as it is finite and there exists a monoid monomorphism into F
  · exact isCyclic_of_subgroup_isDomain f' f'_inj
    -- cardinality of A is coprime to p, the characteristic of F as Fˣ has no element of order p
    -- after looking at the Frobenius endomorphism
  · exact coprime_card_fin_subgroup_of_inj_hom_group_iso_units A f f_inj
</pre> </small> </p>
<div class="remark_thmwrapper theorem-style-remark" id="a0000000286">
  <div class="remark_thmheading">
    <span class="remark_thmcaption">
    Remark
    </span>
    <span class="remark_thmlabel">6.28</span>
    <span class="remark_thmtitle">Formalising properties preserved by isomorphisms in Lean</span>
    <div class="thm_header_extras">

        </div>
    <div class="thm_header_hidden_extras">

    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#a0000000286">#</a>
    
    
    
        </div>
  </div>
  <div class="remark_thmcontent">
  <p> Formalising the argument above required fleshing out many more details than the informal proof led one to believe. The bottleneck of the argument was the following part: " </p>
<div class="displaymath" id="a0000000287">
  \begin{align*}  C_G(d_\delta ) & {\lt} C_{\operatorname{SL}_2(F)}(d_\delta ) \\ & = D \\ & \cong F^\times . \end{align*}
</div>
<p>Since \(A\) is conjugate to \(C_G(d_\delta )\) by Proposition <a href="Ch5_PropertiesOfSLOverAlgClosedField.html#centralizer_d_eq_D">5.61</a>, we have that \(A\) is isomorphic to a finite subgroup of \(F^\times \), \(A\) is cyclic. " </p>
<p>This argument which has been left intact in the proof, had to be heavily modified since it was necessary to explicitly construct a group monomorphism of \(f : A \hookrightarrow F^\times \) by composing the following maps </p>
<div class="centered"> <div class="tikzcd" id="a0000000288">
    <img src="images/img-0001.svg" class="tikzcd-vector" alt="\begin{tikzcd} 
	A &amp; {cDc^{-1}} &amp; D &amp; {F^\times}
	\arrow[hook, from=1-1, to=1-2]
	\arrow[hook, two heads, from=1-2, to=1-3]
	\arrow[hook, two heads, from=1-3, to=1-4]
\end{tikzcd}" />
</div> </div>
<p>From this monomorphism we then use the <span class="ttfamily">mathlib</span> theorem <span class="ttfamily">isCyclic_of_subgroup_isDomain</span> to prove \(A\) is cyclic; the theorem says: </p>
<p>If a finite subgroup has a monomorphism into the unit group of an integral domain, then the subgroup is cyclic. In Lean: </p>
<p><small class="footnotesize"> <pre class="verbatim">
  theorem isCyclic_of_subgroup_isDomain {R G : Type} [CommRing R] 
    [IsDomain R] [Group G] [Finite G] (f : G →* R) (hf : Injective f) : IsCyclic G
  </pre> </small> </p>
<p>This illustrates a typical issue one runs into when formalising mathematics: </p>
<p>Often the result you are looking for is a special case of a more general theorem. </p>
<p>Similarly, to prove the cardinality of \(A\) is coprime to \(p\) we use <a href="Ch6_MaximalAbelianSubgroupClassEquation.html#coprime_card_fin_subgroup_of_inj_hom_group_iso_units">6.10</a>, which required proving some more intermediate results which involved the Frobenius endomorphism and other results from field theory. </p>

  </div>
</div>
<p>To deal with the case when \(x\) is conjugate to \(s_\sigma \) for some \(\sigma \in F\) we first need the following lemmas: </p>
<div class="lemma_thmwrapper theorem-style-plain" id="MaximalAbelianSubgroup.centralizer_eq_conj_SZ_of_IsConj_s_or_IsConj_neg_s">
  <div class="lemma_thmheading">
    <span class="lemma_thmcaption">
    Lemma
    </span>
    <span class="lemma_thmlabel">6.29</span>
    <div class="thm_header_extras">

    
    ✓
        </div>
    <div class="thm_header_hidden_extras">

    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.centralizer_eq_conj_SZ_of_IsConj_s_or_IsConj_neg_s">#</a>
    
    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#a0000000289"><svg  class="icon icon-cogs "><use xlink:href="symbol-defs.svg#icon-cogs"></use></svg>
</a>
    
    
    <button class="modal"><svg  class="icon icon-mindmap "><use xlink:href="symbol-defs.svg#icon-mindmap"></use></svg>
</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Uses</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="Ch5_PropertiesOfSLOverAlgClosedField.html#SpecialSubgroups.SZ">Definition 5.44</a></li>
          
          <li><a href="Ch5_PropertiesOfSLOverAlgClosedField.html#SpecialMatrices.s">Definition 5.7</a></li>
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroupsOf">Definition 6.5</a></li>
          
          <li><a href="Ch5_PropertiesOfSLOverAlgClosedField.html#SpecialSubgroups.Z">Definition 5.35</a></li>
          
          <li><a href="Ch5_PropertiesOfSLOverAlgClosedField.html#conjugate_centralizers_of_IsConj">Proposition 5.62</a></li>
          
          <li><a href="Ch5_PropertiesOfSLOverAlgClosedField.html#centralizer_s_eq_SZ">Proposition 5.60</a></li>
          
          <li><a href="Ch5_PropertiesOfSLOverAlgClosedField.html#centralizer_neg_eq_centralizer">Corollary 5.59</a></li>
          
          <li><a href="Ch5_PropertiesOfSLOverAlgClosedField.html#SpecialSubgroups.center_SL2_eq_Z">Lemma 5.38</a></li>
          
        </ul>
    
      </div>
    </div>

    
    
    <button class="modal lean">L∃∀N</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="https://AlexBrodbelt.github.io/ClassificationOfFiniteSubgroupsOfPGL/docs/find/#doc/MaximalAbelianSubgroup.centralizer_eq_conj_SZ_of_IsConj_s_or_IsConj_neg_s" class="lean_decl">MaximalAbelianSubgroup.centralizer_eq_conj_SZ_of_IsConj_s_or_IsConj_neg_s</a></li>
          
        </ul>
    
      </div>
    </div>

    
        </div>
  </div>
  <div class="lemma_thmcontent">
  
<p>Let \(F\) be an algebraically closed field, let \(G\) be a subgroup of \(\operatorname{SL}_2(F)\), let \(A \in \mathfrak {M}\), suppose \(A = C_{\operatorname{SL}_2(F)}\sqcap G\) for some \(x\) in \(G \setminus Z \subseteq \operatorname{SL}_2(F)\) which is conjugate to either \(s_\sigma \) or \(-s_\sigma \) for \(\sigma \ne 0\) then there exists a \(c \in \operatorname{SL}_2(F)\) such that \(cSZc^{-1} = C_{\operatorname{SL}_2(F)}(x)\) </p>

  </div>
</div>
<div class="proof_wrapper" id="a0000000289">
  <div class="proof_heading">
    <span class="proof_caption">
    Proof
    </span>
    <span class="expand-proof">▶</span>
  </div>
  <div class="proof_content">
  <p> Since \(x \notin Z\), \(x\) is not conjugate to either \(s_0 = I \in Z\) or \(-s_0 = -I \in Z\). </p>
<p>Given conjugate elements have conjugate centralizers by <a href="Ch5_PropertiesOfSLOverAlgClosedField.html#conjugate_centralizers_of_IsConj">5.62</a> it follows that </p>
<div class="displaymath" id="a0000000290">
  \[  C_{\operatorname{SL}_2(F)}(x) = c C_{\operatorname{SL}_2(F)}(s_\sigma )c^{-1}  \]
</div>
<p>Where the last equality is a result of <a href="Ch5_PropertiesOfSLOverAlgClosedField.html#centralizer_s_eq_SZ">5.60</a>. </p>

  </div>
</div>
<p> <small class="footnotesize"> <pre class="verbatim">
lemma centralizer_eq_conj_SZ_of_IsConj_s_or_IsConj_neg_s {F : Type*} [Field F]
  [IsAlgClosed F] [DecidableEq F] (A G : Subgroup SL(2,F)) (σ : F) (x : SL(2,F))
  (x_IsConj_s_or_neg_s : IsConj (s σ) x ∨ IsConj (- s σ) x)
  (x_in_G : x ∈ G.carrier) (x_not_in_center : x ∉ center SL(2,F)) (hx : centralizer {x} ⊓ G = A) :
  ∃ c : SL(2,F), conj c • SZ F = centralizer {x} := by
  simp [center_SL2_eq_Z, ← ne_eq] at x_not_in_center
  obtain ⟨x_ne_one, x_ne_neg_one⟩ := x_not_in_center
  have σ_ne_zero : σ ≠ 0 := by
    rintro rfl
    simp at x_IsConj_s_or_neg_s
    symm at x_IsConj_s_or_neg_s
    rcases x_IsConj_s_or_neg_s with (rfl | rfl) &lt;;&gt; contradiction
  rcases x_IsConj_s_or_neg_s with (x_IsConj_s | x_IsConj_neg_s)
  · obtain ⟨c, c_smul_SZ_eq_centralizer⟩ :=
      conjugate_centralizers_of_IsConj (s σ) x x_IsConj_s
    rw [centralizer_s_eq_SZ σ_ne_zero] at c_smul_SZ_eq_centralizer
    exact Exists.intro c c_smul_SZ_eq_centralizer
  · obtain ⟨c, c_smul_SZ_eq_centralizer⟩ :=
      conjugate_centralizers_of_IsConj (- s σ) x x_IsConj_neg_s
    rw [← centralizer_neg_eq_centralizer,
      centralizer_s_eq_SZ σ_ne_zero] at c_smul_SZ_eq_centralizer
    exact Exists.intro c c_smul_SZ_eq_centralizer
</pre> </small> </p>
<p>We need the following computations that will allow us to treat the complete lattice structure as a complete <i class="itshape">distributive</i> lattice, that is, a complete lattice that furthermore satisfies \((H \sqcup K) \sqcap L = (H \sqcap L) \sqcup (K \sqcap L)\). </p>
<p>An interesting remark on lattices is that the two distinct distributivity laws imply one another. </p>
<div class="lemma_thmwrapper theorem-style-plain" id="MaximalAbelianSubgroup.conj_S_join_Z_meet_G_eq_conj_S_meet_G_join_Z">
  <div class="lemma_thmheading">
    <span class="lemma_thmcaption">
    Lemma
    </span>
    <span class="lemma_thmlabel">6.30</span>
    <div class="thm_header_extras">

    
    ✓
        </div>
    <div class="thm_header_hidden_extras">

    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.conj_S_join_Z_meet_G_eq_conj_S_meet_G_join_Z">#</a>
    
    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#a0000000291"><svg  class="icon icon-cogs "><use xlink:href="symbol-defs.svg#icon-cogs"></use></svg>
</a>
    
    
    <button class="modal"><svg  class="icon icon-mindmap "><use xlink:href="symbol-defs.svg#icon-mindmap"></use></svg>
</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Uses</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="Ch5_PropertiesOfSLOverAlgClosedField.html#SpecialSubgroups.S">Definition 5.20</a></li>
          
          <li><a href="Ch5_PropertiesOfSLOverAlgClosedField.html#SpecialSubgroups.Z">Definition 5.35</a></li>
          
          <li><a href="Ch5_PropertiesOfSLOverAlgClosedField.html#SpecialSubgroups.center_SL2_eq_Z">Lemma 5.38</a></li>
          
        </ul>
    
      </div>
    </div>

    
    
    <button class="modal lean">L∃∀N</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="https://AlexBrodbelt.github.io/ClassificationOfFiniteSubgroupsOfPGL/docs/find/#doc/MaximalAbelianSubgroup.conj_S_join_Z_meet_G_eq_conj_S_meet_G_join_Z" class="lean_decl">MaximalAbelianSubgroup.conj_S_join_Z_meet_G_eq_conj_S_meet_G_join_Z</a></li>
          
        </ul>
    
      </div>
    </div>

    
        </div>
  </div>
  <div class="lemma_thmcontent">
  <p>   Let \(c \in \operatorname{SL}_2(F)\) and \(G\) be a subgroup of \(\operatorname{SL}_2(F)\) then \(c(S \sqcup Z)c^{-1} \sqcap G = (cSc^{-1} \sqcap G) \sqcup Z\) </p>

  </div>
</div>
<div class="proof_wrapper" id="a0000000291">
  <div class="proof_heading">
    <span class="proof_caption">
    Proof
    </span>
    <span class="expand-proof">▶</span>
  </div>
  <div class="proof_content">
  <p> We show this by direct computation </p>
<div class="displaymath" id="a0000000292">
  \begin{align*}  c(S \sqcup Z)c^{-1} \sqcap G & = (cSc^{-1} \sqcup Z) \sqcap G \tag {because $c$ and $c^{-1}$ commute with elements in $Z$}\\ & = (cSc^{-1} \sqcap G) \sqcup (Z \sqcap G) \tag {see the reasoning below $\dagger $}\\ & = (cSc^{-1} \sqcap G) \sqcup Z \tag {since $Z \le G$} \end{align*}
</div>
<p>The justification for \(\dagger \) is the following, it sufficient to prove that \((cSc^{-1} \sqcup Z) \sqcap G\) and \((cSc^{-1} \sqcap G) \sqcup (Z \sqcap G)\) are equal as subsets. Considering \(A \sqcap B = A cap B\) and for a if either subgroup is normal \(A \sqcup B = AB\) where the right hand side is the pointwise product. Thus proving </p>
<div class="displaymath" id="a0000000293">
  \[  (cSc^{-1} \sqcup Z) \sqcap G = (cSc^{-1} \sqcap G) \sqcup (Z \sqcap G)  \]
</div>
<p>is equivalent to showing the subset equality </p>
<div class="displaymath" id="a0000000294">
  \[  (cSc^{-1}Z) \cap G = (cSc^{-1} \cap G)Z  \]
</div>
<p>We show this by antisymmetry </p>
<ul class="itemize">
  <li><p>We show \((cSc^{-1}Z) \cap G \subseteq (cSc^{-1} \cap G)Z\) </p>
<p>Let \(csc^{-1}z \in (cSc^{-1}Z) \cap G\), since \(z \in Z \subseteq G\) we have that \(csc^{-1}zz^{-1} = csc^{-1} \in (cSc^{-1} \cap G)\) it then follows that \(csc^{-1}z \in (cSc^{-1} \cap G)Z\) </p>
</li>
  <li><p>We show \((cSc^{-1}Z) \cap G \supseteq (cSc^{-1} \cap G)Z\) </p>
<p>Let \(csc^{-1}z (cSc^{-1} \cap G)Z\) then since \(csc^{-1} \in (cSc^{-1}Z)\), we only need show </p>
<p>\(csc^{-1}z \in G\), by assumption \(csc^{-1} \in G\) and since \(z \in Z\subseteq G\), the claim follows. </p>
</li>
</ul>

  </div>
</div>
<p> <small class="footnotesize"> <pre class="verbatim">
lemma conj_S_join_Z_meet_G_eq_conj_S_meet_G_join_Z {F : Type*} [Field F]{G : Subgroup SL(2,F)}
  (center_le_G : center SL(2,F) ≤ G) (c : SL(2,F)) :
  (conj c • (S F ⊔ Z F)) ⊓ G = conj c • S F ⊓ G ⊔ Z F :=
  calc
  (conj c • (S F ⊔ Z F)) ⊓ G = (conj c • S F ⊔ Z F) ⊓ G := by
    simp [smul_sup, ← center_SL2_eq_Z, smul_normal c]
  _ = (conj c • S F ⊓ G) ⊔ (Z F ⊓ G) := by
        ext y
        rw [← SetLike.mem_coe, ← Z_eq_Z_meet_G F G center_le_G, ← center_SL2_eq_Z,
          Subgroup.coe_inf, Subgroup.mul_normal (N := center SL(2,F)), ← SetLike.mem_coe,
          Subgroup.mul_normal (N := center SL(2,F)), Subgroup.coe_inf]
        constructor
        · rintro ⟨⟨s, s_in_S, z, hz, rfl⟩, y_in_G⟩
          simp at y_in_G ⊢
          use s
          split_ands
          · exact s_in_S
          · rw [← mul_one s, ← mul_inv_cancel z, ← mul_assoc]
            exact Subgroup.mul_mem G y_in_G &lt;| inv_mem (center_le_G hz)
          use z
        · rintro ⟨s, ⟨s_in_S, s_in_G⟩, z, z_in_Z, rfl⟩
          simp
          split_ands
          · use s
            split_ands
            exact s_in_S
            use z
          exact Subgroup.mul_mem G s_in_G &lt;| center_le_G z_in_Z
  _ = (conj c • S F ⊓ G) ⊔ Z F := by rw [← Z_eq_Z_meet_G F G center_le_G]
</pre> </small> </p>
<p>We also need the following computation: </p>
<div class="lemma_thmwrapper theorem-style-plain" id="MaximalAbelianSubgroup.conj_inv_conj_eq">
  <div class="lemma_thmheading">
    <span class="lemma_thmcaption">
    Lemma
    </span>
    <span class="lemma_thmlabel">6.31</span>
    <div class="thm_header_extras">

    
    ✓
        </div>
    <div class="thm_header_hidden_extras">

    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.conj_inv_conj_eq">#</a>
    
    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#a0000000295"><svg  class="icon icon-cogs "><use xlink:href="symbol-defs.svg#icon-cogs"></use></svg>
</a>
    
    
    <button class="modal"><svg  class="icon icon-mindmap "><use xlink:href="symbol-defs.svg#icon-mindmap"></use></svg>
</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Uses</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="Ch5_PropertiesOfSLOverAlgClosedField.html#SpecialSubgroups.Z">Definition 5.35</a></li>
          
          <li><a href="Ch5_PropertiesOfSLOverAlgClosedField.html#SpecialSubgroups.S">Definition 5.20</a></li>
          
          <li><a href="Ch5_PropertiesOfSLOverAlgClosedField.html#SpecialSubgroups.center_SL2_eq_Z">Lemma 5.38</a></li>
          
        </ul>
    
      </div>
    </div>

    
    
    <button class="modal lean">L∃∀N</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="https://AlexBrodbelt.github.io/ClassificationOfFiniteSubgroupsOfPGL/docs/find/#doc/MaximalAbelianSubgroup.conj_inv_conj_eq" class="lean_decl">MaximalAbelianSubgroup.conj_inv_conj_eq</a></li>
          
        </ul>
    
      </div>
    </div>

    
        </div>
  </div>
  <div class="lemma_thmcontent">
  <p>   Let \(c \in \operatorname{SL}_2(F)\) and \(G\) be a subgroup of \(\operatorname{SL}_2(F)\) then </p>
<div class="displaymath" id="a0000000296">
  \[  c^{-1}(c(S \sqcap G)c^{-1} \sqcup Z)c = (S \sqcap c^{-1}Gc) \sqcup Z  \]
</div>

  </div>
</div>
<div class="proof_wrapper" id="a0000000295">
  <div class="proof_heading">
    <span class="proof_caption">
    Proof
    </span>
    <span class="expand-proof">▶</span>
  </div>
  <div class="proof_content">
  <p> Since every element of \(Z\) commutes with every element of \(\operatorname{SL}_2(F)\) the claim follows. </p>

  </div>
</div>
<p> <small class="footnotesize"> <pre class="verbatim">
lemma conj_inv_conj_eq (F : Type*) [Field F](G : Subgroup SL(2,F)) (c : SL(2,F)):
  conj c⁻¹ • ((conj c • S F ⊓ G) ⊔ Z F) = (S F ⊓ conj c⁻¹ • G) ⊔ Z F := by
  simp only [smul_inf, ← center_SL2_eq_Z, smul_normal c⁻¹, smul_sup]
  simp [map_inv, inv_smul_smul]
</pre> </small> </p>
<div class="corollary_thmwrapper theorem-style-plain" id="IsElementaryAbelian.subgroupOf">
  <div class="corollary_thmheading">
    <span class="corollary_thmcaption">
    Corollary
    </span>
    <span class="corollary_thmlabel">6.32</span>
    <div class="thm_header_extras">

    
    ✓
        </div>
    <div class="thm_header_hidden_extras">

    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#IsElementaryAbelian.subgroupOf">#</a>
    
    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#a0000000297"><svg  class="icon icon-cogs "><use xlink:href="symbol-defs.svg#icon-cogs"></use></svg>
</a>
    
    
    <button class="modal"><svg  class="icon icon-mindmap "><use xlink:href="symbol-defs.svg#icon-mindmap"></use></svg>
</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Uses</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#IsElementaryAbelian">Definition 6.3</a></li>
          
        </ul>
    
      </div>
    </div>

    
    
    <button class="modal lean">L∃∀N</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="https://AlexBrodbelt.github.io/ClassificationOfFiniteSubgroupsOfPGL/docs/find/#doc/IsElementaryAbelian.subgroupOf" class="lean_decl">IsElementaryAbelian.subgroupOf</a></li>
          
        </ul>
    
      </div>
    </div>

    
        </div>
  </div>
  <div class="corollary_thmcontent">
  <p>   If a subgroup \(H\) of a group \(G\) is an elementary abelian subgroup then for any subgroup \(K\) we have that \(H \sqcap K\) is also an elementary abelian subgroup. </p>

  </div>
</div>
<div class="proof_wrapper" id="a0000000297">
  <div class="proof_heading">
    <span class="proof_caption">
    Proof
    </span>
    <span class="expand-proof">▶</span>
  </div>
  <div class="proof_content">
  <p>The only difficulty is verifying is that every element is thought of as an element of \(K\), since we are restricting the subgroup \(H\) to be a subgroup of \(K\) by taking the infimum \(H \sqcap K\). </p>

  </div>
</div>
<p> <small class="footnotesize"> <pre class="verbatim">
lemma subgroupOf {G : Type*} [Group G]
  (H K : Subgroup G) {p : ℕ} [Fact (Nat.Prime p)] (hH : IsElementaryAbelian p H) :
  IsElementaryAbelian p (H.subgroupOf K) := by
  refine ⟨?IsCommutative, ?orderOf_eq_p⟩
  case IsCommutative =&gt;
    let IsCommutative_H : IsCommutative H := hH.left
    exact subgroupOf_isCommutative K H
  case orderOf_eq_p =&gt;
    rintro ⟨h, hh⟩ h_ne_one
    have h_in_H := hh
    simp [mem_subgroupOf] at h_in_H
    have h_ne_one' : ⟨(h : G), h_in_H⟩ ≠ (1 : H) := by
      simp
      rintro rfl
      simp_all
    have order_of_eq_p' := hH.right ⟨(h : G), h_in_H⟩ h_ne_one'
    simp [← order_of_eq_p']
</pre> </small> </p>
<div class="lemma_thmwrapper theorem-style-plain" id="MaximalAbelianSubgroup.exists_noncenter_of_card_center_lt_card_center_Sylow">
  <div class="lemma_thmheading">
    <span class="lemma_thmcaption">
    Lemma
    </span>
    <span class="lemma_thmlabel">6.33</span>
    <div class="thm_header_extras">

    
    ✓
        </div>
    <div class="thm_header_hidden_extras">

    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.exists_noncenter_of_card_center_lt_card_center_Sylow">#</a>
    
    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#a0000000298"><svg  class="icon icon-cogs "><use xlink:href="symbol-defs.svg#icon-cogs"></use></svg>
</a>
    
    
    <button class="modal"><svg  class="icon icon-mindmap "><use xlink:href="symbol-defs.svg#icon-mindmap"></use></svg>
</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Uses</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="Ch5_PropertiesOfSLOverAlgClosedField.html#SpecialSubgroups.center_SL2_eq_Z">Lemma 5.38</a></li>
          
          <li><a href="Ch5_PropertiesOfSLOverAlgClosedField.html#SpecialSubgroups.card_Z_eq_one_of_two_eq_zero">Lemma 5.41</a></li>
          
          <li><a href="Ch5_PropertiesOfSLOverAlgClosedField.html#SpecialSubgroups.card_Z_eq_two_of_two_ne_zero">Lemma 5.40</a></li>
          
          <li><a href="Ch5_PropertiesOfSLOverAlgClosedField.html#SpecialSubgroups.Z">Definition 5.35</a></li>
          
          <li><a href="Ch5_PropertiesOfSLOverAlgClosedField.html#SpecialSubgroups.center_SL2_eq_Z">Lemma 5.38</a></li>
          
          <li><a href="Ch5_PropertiesOfSLOverAlgClosedField.html#SpecialSubgroups.card_Z_eq_one_of_two_eq_zero">Lemma 5.41</a></li>
          
          <li><a href="Ch5_PropertiesOfSLOverAlgClosedField.html#SpecialSubgroups.card_Z_eq_two_of_two_ne_zero">Lemma 5.40</a></li>
          
        </ul>
    
      </div>
    </div>

    
    
    <button class="modal lean">L∃∀N</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="https://AlexBrodbelt.github.io/ClassificationOfFiniteSubgroupsOfPGL/docs/find/#doc/MaximalAbelianSubgroup.exists_noncenter_of_card_center_lt_card_center_Sylow" class="lean_decl">MaximalAbelianSubgroup.exists_noncenter_of_card_center_lt_card_center_Sylow</a></li>
          
        </ul>
    
      </div>
    </div>

    
        </div>
  </div>
  <div class="lemma_thmcontent">
  <p>   Let \(G\) be a finite subgroup of \(\operatorname{SL}_2(F)\), let \(S\) be a \(p\)-Sylow subgroup of \(G\) where \(p\) is the characteristic of the field \(F\) and furthermore suppose \(p \le |Z|\) then there exists a noncenter element in \(S\), that is, \(S \setminus Z \ne \varnothing \). </p>

  </div>
</div>
<div class="proof_wrapper" id="a0000000298">
  <div class="proof_heading">
    <span class="proof_caption">
    Proof
    </span>
    <span class="expand-proof">▶</span>
  </div>
  <div class="proof_content">
  <p> We show that independent of the characteristic of the field \(F\), \(|Z| {\lt} |S|\) and therefore, regardless to what \(Z\) and \(S\) actually look like, there must exist an element in \(S\) that does not belong to \(Z\). </p>
<ul class="itemize">
  <li><p>When \(p = \textrm{char}(F) = 2\) </p>
<p>by <a href="Ch5_PropertiesOfSLOverAlgClosedField.html#SpecialSubgroups.card_Z_eq_one_of_two_eq_zero">5.41</a> it follows \(|Z| = 1 {\lt} 2 = p \leq |S|\), as required. </p>
</li>
  <li><p>When \(p = \textrm{char}(F) \ne 2\) </p>
<p>by <a href="Ch5_PropertiesOfSLOverAlgClosedField.html#SpecialSubgroups.card_Z_eq_two_of_two_ne_zero">5.40</a> it follows \(|Z| = 2 {\lt} 3 \le p \le |S|\), as required. </p>
</li>
</ul>

  </div>
</div>
<p> <small class="tiny"> <pre class="verbatim">
lemma exists_noncenter_of_card_center_lt_card_center_Sylow (F : Type*) [Field F] {p : ℕ}
  [hp' : Fact (Nat.Prime p)] [hC : CharP F p] (G : Subgroup SL(2,F)) [Finite G] (S : Sylow p G)
  (p_le_card_center_S : p ≤ Nat.card ↥(center S)) :
  ∃ x ∈ (Subgroup.map (G.subtype.comp S.toSubgroup.subtype) (center S)), x ∉ center SL(2,F) := by
  let fintype_G : Fintype G := Fintype.ofFinite ↥G
  let fintype_center_S : Fintype (center S) := Fintype.ofFinite ↥(center S)
  let fintype_set_center_S :
    Fintype (center SL(2, F)) := Fintype.ofFinite ↥(center SL(2, F))
  let fintype_map :
        Fintype
          ((Subgroup.map (G.subtype.comp S.toSubgroup.subtype) (center S)) : Set SL(2,F)) := by
        rw [Subgroup.coe_map, MonoidHom.coe_comp]
        exact Fintype.ofFinite ↑(⇑G.subtype ∘ ⇑(S.toSubgroup).subtype '' ↑(center S))
  let fintype_image :
        Fintype
          ↑((⇑(G.subtype.comp S.toSubgroup.subtype) '' (center S)) : Set SL(2,F)) := fintype_map
  have : Fintype.card
        ((Subgroup.map (G.subtype.comp S.toSubgroup.subtype) (center S)) : Set SL(2,F)) =
          Fintype.card (center S) := by
        apply Set.card_image_of_injective
        rw [MonoidHom.coe_comp]
        refine Injective.comp ?h1 ?h2
        · exact subtype_injective G
        · exact subtype_injective S.toSubgroup
  let inst₁ : CommRing F := Field.toCommRing
  let inst₂ : NoZeroDivisors F := IsLeftCancelMulZero.to_noZeroDivisors F
  have card_center_lt_card_center_S :
    Fintype.card ((center SL(2,F)) : Set SL(2,F)) &lt;
      Fintype.card
        ((Subgroup.map (G.subtype.comp S.toSubgroup.subtype) (center S)) : Set SL(2,F)) := by
    by_cases hp : p = 2
    · calc
      Fintype.card (center SL(2, F)) = Nat.card (center SL(2,F)) := Fintype.card_eq_nat_card
      _ = 1 := by
        rw [center_SL2_eq_Z, card_Z_eq_one_of_two_eq_zero];
        simp only [hp] at hC
        exact CharTwo.two_eq_zero
      _ &lt; 2 := by norm_num
      _ ≤ Nat.card ↥(center S) := hp ▸ p_le_card_center_S
      _ = Fintype.card (center S) := Nat.card_eq_fintype_card
      _ = Fintype.card ↑↑(Subgroup.map (G.subtype.comp S.toSubgroup.subtype) (center S)) := by
        symm
        apply Set.card_image_of_injective
        rw [MonoidHom.coe_comp]
        apply Injective.comp
        exact subtype_injective G
        exact subtype_injective _
    · let two_ne_zero : NeZero (2 : F) := ne_zero_two_of_char_ne_two F hp
      calc
      Fintype.card (center SL(2, F)) = Nat.card (center SL(2,F)) := Fintype.card_eq_nat_card
      _ = 2 := by rw [center_SL2_eq_Z, card_Z_eq_two_of_two_ne_zero]
      _ &lt; 3 := by norm_num
      _ ≤ p := Nat.Prime.three_le_of_ne_two hp'.out hp
      _ ≤ Nat.card ↥(center S) := p_le_card_center_S
      _ = Fintype.card (center S) := Nat.card_eq_fintype_card
      _ = Fintype.card ↑↑(Subgroup.map (G.subtype.comp S.toSubgroup.subtype) (center S)) := by
        symm
        apply Set.card_image_of_injective
        rw [MonoidHom.coe_comp]
        apply Injective.comp
        exact subtype_injective G
        exact subtype_injective _
  have coe₁ :
    Set.ncard ((center SL(2,F)) : Set SL(2,F)) = Fintype.card (center SL(2, F)) := by
      rw [Fintype.card_eq_nat_card]; rfl
  have coe₂ :
    Set.ncard ((Subgroup.map (G.subtype.comp S.toSubgroup.subtype) (center S)) : Set SL(2,F))
      = Fintype.card
          ((Subgroup.map (G.subtype.comp S.toSubgroup.subtype) (center S)) : Set SL(2,F)) := by
            rw [Fintype.card_eq_nat_card]; rfl
  have ncard_center_lt_ncard_center_S : Set.ncard ((center SL(2,F)) : Set SL(2,F)) &lt;
    Set.ncard ((Subgroup.map (G.subtype.comp S.toSubgroup.subtype) (center S)) : Set SL(2,F)) := by
        rw [coe₁, coe₂]
        exact card_center_lt_card_center_S
  exact Set.exists_mem_not_mem_of_ncard_lt_ncard ncard_center_lt_ncard_center_S
</pre> </small> </p>
<p>To show the Sylowness of the subgroup we shall construct we need the following lemma: </p>
<div class="lemma_thmwrapper theorem-style-plain" id="MaximalAbelianSubgroup.mul_center_inj">
  <div class="lemma_thmheading">
    <span class="lemma_thmcaption">
    Lemma
    </span>
    <span class="lemma_thmlabel">6.34</span>
    <div class="thm_header_extras">

    
    ✓
        </div>
    <div class="thm_header_hidden_extras">

    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.mul_center_inj">#</a>
    
    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#a0000000299"><svg  class="icon icon-cogs "><use xlink:href="symbol-defs.svg#icon-cogs"></use></svg>
</a>
    
    
    
    <button class="modal lean">L∃∀N</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="https://AlexBrodbelt.github.io/ClassificationOfFiniteSubgroupsOfPGL/docs/find/#doc/MaximalAbelianSubgroup.mul_center_inj" class="lean_decl">MaximalAbelianSubgroup.mul_center_inj</a></li>
          
        </ul>
    
      </div>
    </div>

    
        </div>
  </div>
  <div class="lemma_thmcontent">
  <p>  Let \(S\) and \(Q\) be subgroups of a group \(\operatorname{SL}_2(F)\) where \(S \le Q\) and furthermore, we have the added condition that either \(I = -I\) or \(-I \notin S\) and suppose \(SZ = QZ\) then \(S = Q\) </p>

  </div>
</div>
<div class="proof_wrapper" id="a0000000299">
  <div class="proof_heading">
    <span class="proof_caption">
    Proof
    </span>
    <span class="expand-proof">▶</span>
  </div>
  <div class="proof_content">
  <p> We prove that \(Q = S\) by antisymmetry, but since \(Q \le S\) by assumption, we only need show that \(S \le Q\) </p>
<p>Let \(s \in S\) and \(s = s \cdot I \in S Z = QZ\) we can find a \(q \in Q\) and \(z \in Z\) such that \(s = q z\). By <a href="Ch5_PropertiesOfSLOverAlgClosedField.html#SpecialSubgroups.center_SL2_eq_Z">5.38</a> we only need split on the case where \(z = I\) or \(z = -I\). If \(z = I\) then we are done \(s = q \in Q\). </p>
<p>However, if \(z = -1\) since either \(I = -I\) or \(-I \notin S\) we split in to two cases </p>
<ul class="itemize">
  <li><p>In the first case we can conclude \(s = q (-I) = q I = q \in Q\) </p>
</li>
  <li><p>In the second case where \(-I \notin S\) we yield a contradiction since \(q^{-1} s = -I \in S\) where this last inclusion follows because \(q \in Q \le S\). </p>
</li>
</ul>

  </div>
</div>
<p><small class="footnotesize"> <pre class="verbatim">
  theorem mul_center_inj {F : Type*} [Field F] (S Q : Subgroup SL(2,F))
  (Q_le_S : Q ≤ S) (h' : (1 : SL(2,F)) = -1 ∨ -1 ∉ S)
  (hSQ : S.carrier * center SL(2,F) = Q.carrier * center SL(2,F)) : S = Q := by
  symm
  apply le_antisymm Q_le_S
  intro s s_in_S
  have key : s * 1 ∈ S.carrier * center SL(2,F) := by
    use s, s_in_S, 1, Subgroup.one_mem _
  simp [hSQ] at key
  obtain ⟨q, q_in_Q, z, z_in_center, hx⟩ := key
  simp [center_SL2_eq_Z] at z_in_center
  rcases z_in_center with (rfl | rfl)
  · simp at hx
    simp [← hx]
    exact q_in_Q
  · rcases h' with (one_eq_neg_one | h')
    · rw [one_eq_neg_one] at hx
      simp at hx
      rw [← hx]
      exact q_in_Q
    -- order of every element must divide p^S and 2 does not divide p^S
    · have neg_one_in_S : q⁻¹ * s ∈ S := by
        refine Subgroup.mul_mem S ?q_inv_in_S s_in_S
        apply Subgroup.inv_mem
        apply Q_le_S q_in_Q
      have : -1 = q⁻¹ * s := by rw [← hx]; group
      rw [← this] at neg_one_in_S
      contradiction
</pre> </small> </p>
<div class="theorem_thmwrapper theorem-style-plain" id="MaximalAbelianSubgroup.A_eq_Q_join_Z_of_IsConj_s_or_neg_s">
  <div class="theorem_thmheading">
    <span class="theorem_thmcaption">
    Theorem
    </span>
    <span class="theorem_thmlabel">6.35</span>
    <div class="thm_header_extras">

    
    ✓
        </div>
    <div class="thm_header_hidden_extras">

    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.A_eq_Q_join_Z_of_IsConj_s_or_neg_s">#</a>
    
    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#a0000000300"><svg  class="icon icon-cogs "><use xlink:href="symbol-defs.svg#icon-cogs"></use></svg>
</a>
    
    
    <button class="modal"><svg  class="icon icon-mindmap "><use xlink:href="symbol-defs.svg#icon-mindmap"></use></svg>
</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Uses</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroupsOf">Definition 6.5</a></li>
          
          <li><a href="Ch5_PropertiesOfSLOverAlgClosedField.html#SpecialMatrices.s">Definition 5.7</a></li>
          
          <li><a href="Ch5_PropertiesOfSLOverAlgClosedField.html#SpecialSubgroups.Z">Definition 5.35</a></li>
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.centralizer_eq_conj_SZ_of_IsConj_s_or_IsConj_neg_s">Lemma 6.29</a></li>
          
          <li><a href="Ch5_PropertiesOfSLOverAlgClosedField.html#SpecialSubgroups.S_join_Z_eq_SZ">Lemma 5.46</a></li>
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.conj_S_join_Z_meet_G_eq_conj_S_meet_G_join_Z">Lemma 6.30</a></li>
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.conj_inv_conj_eq">Lemma 6.31</a></li>
          
          <li><a href="Ch5_PropertiesOfSLOverAlgClosedField.html#SpecialSubgroups.center_SL2_eq_Z">Lemma 5.38</a></li>
          
          <li><a href="Ch5_PropertiesOfSLOverAlgClosedField.html#SpecialMatrices.order_s_eq_char">Lemma 5.12</a></li>
          
          <li><a href="Ch3_Preliminaries.html#orderOf_injective">Proposition 3.20</a></li>
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.center_le">Lemma 6.16</a></li>
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.IsCyclic_and_card_coprime_CharP_of_IsConj_d">Theorem 6.27</a></li>
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#IsElementaryAbelian.subgroupOf">Corollary 6.32</a></li>
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.exists_noncenter_of_card_center_lt_card_center_Sylow">Lemma 6.33</a></li>
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.mul_center_inj">Lemma 6.34</a></li>
          
          <li><a href="Ch3_Preliminaries.html#SpecialSubgroups.prod_mulEquiv_join_of_disjoint_of_normal">Lemma 3.24</a></li>
          
        </ul>
    
      </div>
    </div>

    
    
    <button class="modal lean">L∃∀N</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="https://AlexBrodbelt.github.io/ClassificationOfFiniteSubgroupsOfPGL/docs/find/#doc/MaximalAbelianSubgroup.A_eq_Q_join_Z_of_IsConj_s_or_neg_s" class="lean_decl">MaximalAbelianSubgroup.A_eq_Q_join_Z_of_IsConj_s_or_neg_s</a></li>
          
        </ul>
    
      </div>
    </div>

    
        </div>
  </div>
  <div class="theorem_thmcontent">
  <p>   Let \(F\) be an algebraically closed field of characteristic \(p\) and let \(G\) be a finite subgroup of \(\operatorname{SL}_2(F)\) containing \(Z\), let \(A\) be a subgroup of \(\operatorname{SL}_2(F)\) which is a maximal abelian subgroup of \(G\) and furthermore suppose \(Z {\lt} A\) and \(A = C_{\operatorname{SL}_2(F)}(x) \sqcap G\) where \(x \in G \setminus Z \subseteq \operatorname{SL}_2(F)\) and \(x\) is conjugate to \(s_\sigma \) for some \(\sigma \in F\) then there exists a finite nontrivial elementary abelian Sylow \(p\)-subgroup of \(G\) such that \(A = Q \sqcup Z\). </p>

  </div>
</div>
<div class="proof_wrapper" id="a0000000300">
  <div class="proof_heading">
    <span class="proof_caption">
    Proof
    </span>
    <span class="expand-proof">▶</span>
  </div>
  <div class="proof_content">
  <p> If \(\pmb {x}\) <b class="bfseries">conjugate to</b> \(\pmb {\pm s_\sigma }\) <b class="bfseries">in</b> \(\pmb {L}\), then again, let \(A = C_G(x) \in \mathfrak {M}\). \(A\) is conjugate to \(C_G({\pm s_\sigma })\) in \(\operatorname{SL}_2(F)\). Since \(x \notin Z\), we have \(\lambda \neq 0\). Observe that </p>
<div class="displaymath" id="a0000000301">
  \begin{align*}  C_G({\pm s_\sigma }) & {\lt} C_{\operatorname{SL}_2(F)}({\pm s_\sigma }) \\ & = S \times Z \\ & \cong F \times Z. \end{align*}
</div>
<p>So \(A\) is isomorphic to a finite subgroup of \(F \times Z\), call it \(Q \times Z\). Now \(A = Q \times Z \cong QZ\) by Corollary <a href="Ch3_Preliminaries.html#directproductZ">3.26</a>, which means that an arbitrary element of \(A\) is of the form \(q_1z_1\), where \(q_1 \in Q\), \(z_1 \in Z\). </p>
<div class="displaymath" id="a0000000302">
  \begin{align*}  q_1z_1q_2z_2 & = q_2z_2 q_1z_1, \tag {$A \in \mathfrak {M}$} \\ q_1q_2z_1z_2 & = q_2q_1z_1z_2, \tag {$z_1$, $z_2 \in Z$} \\ q_1q_2z_1z_2(z_1z_2)^{-1} & = q_2q_1z_1z_2(z_1z_2)^{-1}, \\ q_1q_2 & = q_2q_1. \end{align*}
</div>
<p> Thus \(Q\) is also abelian. Recall from the proof of Proposition <a href="Ch5_PropertiesOfSLOverAlgClosedField.html#SpecialMatrices.order_s_eq_char">5.12</a> that all non-trivial elements of \(S\) have order \(p\), so each non-trivial element of \(Q\) has order \(p\) which means that \(Q\) is elementary abelian. Thus \(Q\) has order \(p^m\), for some \(m \in \mathbb {Z}^+\). <br /><br />Now let \(S\) be a Sylow \(p\)-subgroup containing \(Q\). We apply Lemma <a href="Ch6_MaximalAbelianSubgroupClassEquation.html#IsElementaryAbelian.dvd_card">6.8</a> to determine that \(p\) divides \(|Z(S)|\), moreover \(|Z(S)| \geq p\). <br /><br />If \(p=2\), then by Lemma <a href="Ch5_PropertiesOfSLOverAlgClosedField.html#SpecialSubgroups.card_Z_eq_one_of_two_eq_zero">5.41</a> \(|Z| = 1\) and hence \(|Z(S)| \geq 2 {\gt} |Z|\).<br />If \(p {\gt} 2\), then by Lemma <a href="Ch5_PropertiesOfSLOverAlgClosedField.html#SpecialSubgroups.card_Z_eq_two_of_two_ne_zero">5.40</a> \(|Z| = 2\) and again we get \(|Z(S)| {\gt} 2 = |Z|\). <br /><br />So \(Z(S)\) must contain at least one element which is not in \(Z\), let \(y\) be one such element. Let \(s_1z_1\) be an arbitrary element of \(S \times Z\). </p>
<div class="displaymath" id="a0000000303">
  \begin{align*}  (s_1z_1)y(s_1z_1)^{-1} & = (s_1z_1)y(z_1^{-1}s_1^{-1}) \\ & = s_1y(z_1z_1^{-1})s_1^{-1} \tag {since $y \in L$, $z_1 \in Z$} \\ & = y(s_1s_1^{-1}) \tag {since $s_1 \in S$, $y \in Z(S)$} \\ & = y \end{align*}
</div>
<p>Thus \(s_1z_1 \in C_G(y)\) and since it was chosen arbitrarily, \(S \times Z \subset C_G(y)\). Also since \(y \in G \!  \setminus \!  Z\) we have \(C_G(y) \in \mathfrak {M}\) by <a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.centralizer_meet_G_in_MaximalAbelianSubgroups_of_noncentral">6.11</a>. </p>

  </div>
</div>
<p> <small class="tiny"> <pre class="verbatim">
theorem A_eq_Q_join_Z_of_IsConj_s_or_neg_s {F : Type*} [Field F]
  [IsAlgClosed F] [DecidableEq F] {p : ℕ} [hp' : Fact (Nat.Prime p)] [hC : CharP F p]
  (G : Subgroup SL(2,F))[hG₀ : Finite G] (A : Subgroup SL(2,F))
  (hA : A ∈ MaximalAbelianSubgroupsOf G) (center_le_G : center SL(2,F) ≤ G)
  (center_lt_A : center SL(2,F) &lt; A) (x : SL(2,F))
  (x_in_G : x ∈ G.carrier) (x_not_in_center : x ∉ center SL(2,F))
  (A_eq_centra : A = centralizer {x} ⊓ G) (σ : F)
  (x_IsConj_t_or_neg_t : IsConj (s σ) x ∨ IsConj (- s σ) x) :
  ∃ Q : Subgroup SL(2,F),
  Nontrivial Q ∧
  Finite Q ∧
  Q ≤ G ∧
  A = Q ⊔ Z F ∧
  IsElementaryAbelian p Q ∧
  ∃ S : Sylow p G, Q.subgroupOf G = S := by
  -- centralizer {x} = conj c • TZ F
  obtain ⟨c, c_smul_TZ_eq_centralizer ⟩:=
    centralizer_eq_conj_SZ_of_IsConj_s_or_IsConj_neg_s
      A G σ x x_IsConj_t_or_neg_t x_in_G x_not_in_center A_eq_centra.symm
  have A_eq_conj_T_join_Z_meet_G : A = (conj c • (S F ⊔ Z F)) ⊓ G := by
      rw [A_eq_centra, S_join_Z_eq_SZ, c_smul_TZ_eq_centralizer]
  -- from the subgroup equality and conjugacy isomorphisms
  -- we construct the isomorphisms and compose all of them
  -- `A = conj c • (S F ⊔ Z F) ⊓ G `
  let f₁ := (MulEquiv.subgroupCongr A_eq_conj_T_join_Z_meet_G)
  -- `(conj c • S F ⊔ Z F) ⊓ G = ((conj c • (S F ⊔ Z F)) ⊓ G) ≃* A`
  let f₂ := (MulEquiv.subgroupCongr (conj_S_join_Z_meet_G_eq_conj_S_meet_G_join_Z center_le_G c))
  -- `conj c⁻¹ • ((conj c • S F ⊔ G) ⊓ Z F) ≃* conj c • S F ⊓ G ⊔ Z F`
  let f₃ := (equivSMul (conj c⁻¹) (conj c • S F ⊓ G ⊔ Z F))
  -- `(S F ⊔ conj c⁻¹ • G) ⊓ Z F = conj c⁻¹ • ((conj c • S F ⊔ G) ⊓ Z F)`
  let f₄ := MulEquiv.subgroupCongr (conj_inv_conj_eq F G c)
  -- Compose all isomorphism together to get the desired isomorphism
  let φ : A ≃* ((S F ⊓ conj c⁻¹ • G) ⊔ Z F :) := ((f₁.trans f₂).trans f₃).trans f₄
  -- the monoid homomorphism composed by the pull back composed with
  -- the inclusion of A into SL(2,F)
  let f : ((S F ⊓ conj c⁻¹ • G) ⊔ Z F :) →* SL(2,F) := A.subtype.comp (φ.symm.toMonoidHom)
  have f_inj : Injective f := by
    apply Injective.comp (Subtype.val_injective) &lt;| MulEquiv.injective φ.symm
  -- pull back `S F ⊓ conj c⁻¹ • G ` along the monoid homomorphism
  let Q := Subgroup.map f ((S F ⊓ conj c⁻¹ • G :).subgroupOf ((S F ⊓ conj c⁻¹ • G) ⊔ Z F :))
  -- necessary for proving Q is p-Sylow
  have nontrivial_Q : Nontrivial Q := by
    refine (nontrivial_iff_ne_bot Q).mpr ?_
    intro Q_eq_bot
    simp only [Q] at Q_eq_bot
    -- injective map has trivial kernel
    rw [(map_eq_bot_iff_of_injective ((S F ⊓ conj c⁻¹ • G).subgroupOf (S F ⊓ conj c⁻¹ • G ⊔ Z F))
          f_inj)] at Q_eq_bot
    have : S F ⊓ conj c⁻¹ • G ≤ S F ⊓ conj c⁻¹ • G ⊔ Z F := le_sup_left
    rw [← bot_subgroupOf, subgroupOf_inj, bot_inf_eq, inf_of_le_left this] at Q_eq_bot
    -- if S F ⊓ conj c⁻¹ • G = ⊥ then there is an isomorphism from A to Z
    -- the different sizes of the cardinality provide a contradiction
    rw [Q_eq_bot, bot_sup_eq, ← center_SL2_eq_Z] at φ
    have card_A_le_two : Nat.card A ≤ Nat.card (center SL(2,F)) :=
      le_of_eq (Nat.card_eq_of_bijective φ &lt;| MulEquiv.bijective φ)
    let fin_center : Finite (center SL(2,F)) := by
      rw [center_SL2_eq_Z]
      infer_instance
    let Fintype_center : Fintype (center SL(2,F)) := Fintype.ofFinite ↥(center SL(2, F))
    let fin_A : Finite A := Set.Finite.subset hG₀ hA.right
    let Fintype_A : Fintype A := Fintype.ofFinite ↥A
    have card_center_lt_card_A : Nat.card (center SL(2,F)) &lt; Nat.card A := by
      calc Nat.card (center SL(2,F)) = Fintype.card (center SL(2,F)) := Nat.card_eq_fintype_card
      _ &lt; Fintype.card A := Set.card_lt_card center_lt_A
      _ = Nat.card A := Fintype.card_eq_nat_card
    linarith
  have Q_le_G : Q ≤ G := by
    let Q₀ := ((S F ⊓ conj c⁻¹ • G).subgroupOf (S F ⊓ conj c⁻¹ • G ⊔ Z F))
    have h₁: Subgroup.map φ.symm.toMonoidHom Q₀ ≤ ⊤ := le_top
    have h₂ :
      Subgroup.map A.subtype (Subgroup.map φ.symm.toMonoidHom Q₀) ≤ Subgroup.map A.subtype ⊤ :=
      map_subtype_le_map_subtype.mpr h₁
    have eq_A : Subgroup.map A.subtype ⊤ = A := by ext; simp
    rw [eq_A, Subgroup.map_map] at h₂
    exact le_trans h₂ hA.right
  have Q_fin : Finite Q := by
    apply Set.Finite.image
    apply Set.Finite.preimage
    · exact Injective.injOn fun ⦃a₁ a₂⦄ a ↦ a
    apply Set.Finite.preimage
    · simp [Set.injOn_subtype_val]
    · apply Set.Finite.inf_of_right
      exact Set.Finite.of_surjOn
          (⇑((MulDistribMulAction.toMonoidEnd (MulAut SL(2, F)) SL(2, F)) (conj c⁻¹)))
          (fun ⦃a⦄ a ↦ a) hG₀
  have orderOf_eq_p : ∀ (h : ↥Q), h ≠ 1 → orderOf h = p := by
    rintro ⟨q, t₀, t₀_in_subgroupOf, hf⟩ q_ne_one
    obtain ⟨⟨σ₀, hσ₀⟩, t₀_in_conj_G⟩ := t₀_in_subgroupOf
    have : ((1 : (S F ⊓ conj c⁻¹ • G ⊔ Z F :)) : SL(2,F)) = 1 := rfl
    -- σ ≠ 0, as otherwise f q = 1 → q = 1; a contradiction
    have σ₀_ne_zero : σ₀ ≠ 0 := by
      intro σ_eq_zero
      simp [σ_eq_zero] at hσ₀
      rw [← this, ← Subtype.ext_iff] at hσ₀
      simp [← hσ₀] at hf
      simp [← hf] at q_ne_one
    have orderOf_t₀_eq_p := @order_s_eq_char F _ p _ _ σ₀ σ₀_ne_zero
    simp [hσ₀] at orderOf_t₀_eq_p
    -- By injectivity of f the orders must be the same
    have orderOf_q_eq_p : orderOf q = p :=
      hf.symm ▸ orderOf_t₀_eq_p ▸ orderOf_injective f f_inj t₀
    rw [← orderOf_q_eq_p]
    exact orderOf_mk q (Exists.intro t₀ ⟨⟨Exists.intro σ₀ hσ₀, t₀_in_conj_G⟩, hf⟩)
  have IsElementaryAbelian_Q : IsElementaryAbelian p Q := by
    refine ⟨?IsCommutative_Q, ?orderOf_eq_p⟩
    case IsCommutative_Q =&gt;
      let CommInst₁ : IsCommutative (S F ⊓ conj c⁻¹ • G) :=
        inf_IsCommutative_of_IsCommutative_left (S F) (conj c⁻¹ • G) (IsCommutative_S F)
      let CommInst₂ : IsCommutative ((S F ⊓ conj c⁻¹ • G).subgroupOf (S F ⊓ conj c⁻¹ • G ⊔ Z F)) :=
        subgroupOf_isCommutative _ _
      exact Subgroup.map_isCommutative _ _
      -- Every element is order p
    case orderOf_eq_p =&gt; exact orderOf_eq_p
  -- We show A is the join of Q and Z
  have A_eq_Q_join_Z : A = Q ⊔ Z F := by
    have ker_f_eq_bot : f.ker = ⊥ := by
      exact (MonoidHom.ker_eq_bot_iff f).mpr f_inj
    have Z_le_A : Z F ≤ A := (le_of_lt ((center_SL2_eq_Z F).symm ▸ center_lt_A))
    have Z_le_range : Z F ≤ f.range := by
      intro z hz
      use (φ.toMonoidHom ⟨z, Z_le_A hz⟩)
      simp [f]
    have map_eq_map_iff := ker_f_eq_bot ▸
      @map_eq_map_iff (S F ⊓ conj c⁻¹ • G ⊔ Z F:) _ SL(2,F)
        _ f (Subgroup.comap f (Z F)) ((Z F).subgroupOf (S F ⊓ conj c⁻¹ • G ⊔ Z F))
    -- Manually check that every element in Z is preserved under f
    let inst : Nonempty ↥(S F ⊓ (conj c)⁻¹ • G ⊔ Z F) := One.instNonempty
    have key :
      Subgroup.map φ.symm.toMonoidHom (((Z F).subgroupOf (S F ⊓ conj c⁻¹ • G ⊔ Z F))) =
        (Z F).subgroupOf A := by
      ext z
      -- easier than unpacking all layers of conjugation and isomorphisms
      constructor
      · intro hz
        simp at hz
        obtain ⟨a, ha, a_mem_Z, rfl⟩ := hz
        simp [mem_subgroupOf] at a_mem_Z ⊢
        rcases a_mem_Z with (rfl | rfl)
        · left; rfl
        · right
          simp [φ, f₁, f₂, f₃, f₄]
      · intro hz
        simp [mem_subgroupOf] at hz ⊢
        rcases hz with (rfl | h)
        · left; rfl
        · right
          have z_eq_neg_one : z = ⟨-1, Z_le_A &lt;| neg_one_mem_Z⟩ := by
            simp only [← h, Subtype.coe_eta]
          simp [z_eq_neg_one]
          have Z_le_join : Z F ≤ S F ⊓ (conj c)⁻¹ • G ⊔ Z F := le_sup_right
          use Z_le_join &lt;| neg_one_mem_Z
          simp [Subtype.ext_iff, φ, f₁, f₂, f₃, f₄]
    have comap_Z_eq_Z : Subgroup.comap f (Z F) = (Z F).subgroupOf (S F ⊓ conj c⁻¹ • G ⊔ Z F) := by
      rw [← sup_bot_eq (Subgroup.comap f (Z F)),
      ← sup_bot_eq ((Z F).subgroupOf (S F ⊓ conj c⁻¹ • G ⊔ Z F)),
      ← map_eq_map_iff, map_comap_eq, inf_of_le_right Z_le_range,
      ← Subgroup.map_map, key, subgroupOf_map_subtype, left_eq_inf]
      exact Z_le_A
    have Q_le_range : Q ≤ f.range := by
      exact map_le_range f ((S F ⊓ conj c⁻¹ • G).subgroupOf (S F ⊓ conj c⁻¹ • G ⊔ Z F))
    have A_le_range : A ≤ f.range := by
      intro a ha
      use (φ.toMonoidHom ⟨a, ha⟩)
      simp [f]
    apply le_antisymm
    · rw [← comap_le_comap_of_le_range A_le_range,
        ← comap_sup_eq_of_le_range f Q_le_range Z_le_range,
        comap_map_eq_self_of_injective f_inj, comap_Z_eq_Z,
        sup_subgroupOf_eq ?h1 ?h2]
      rw [subgroupOf_self]
      exact le_top
      case h1 =&gt; exact SemilatticeSup.le_sup_left (S F ⊓ conj c⁻¹ • G) (Z F)
      case h2 =&gt; exact SemilatticeSup.le_sup_right (S F ⊓ conj c⁻¹ • G) (Z F)
    · have Q_join_Z_le_range : Q ⊔ Z F ≤ f.range := sup_le Q_le_range Z_le_range
      rw [← comap_le_comap_of_le_range Q_join_Z_le_range,
        ← comap_sup_eq_of_le_range f Q_le_range Z_le_range]
      rw [comap_map_eq_self_of_injective f_inj]
      rw [comap_Z_eq_Z, sup_subgroupOf_eq ?h1 ?h2]
      rw [subgroupOf_self]
      case h1 =&gt; exact SemilatticeSup.le_sup_left (S F ⊓ conj c⁻¹ • G) (Z F)
      case h2 =&gt; exact SemilatticeSup.le_sup_right (S F ⊓ conj c⁻¹ • G) (Z F)
      intro q _hq
      simp [f]
  -- Show Q satisfies the desired properties
  use Q
  refine ⟨?Q_is_nontrivial, ?Q_is_finite, ?Q_le_G, ?A_eq_Q_join_Z, ?IsElementaryAbelian, ?IsPSylow⟩
  case Q_is_nontrivial =&gt; exact nontrivial_Q
  -- Q is finite as it is the image of a subgroup of a finite group S F ⊓ conj c⁻¹ • G ⊔ Z F
  case Q_is_finite =&gt; exact Q_fin
  -- Q ≤ A ≤ G, have to extract data before it is sent through the inclusion
  case Q_le_G =&gt; exact Q_le_G
  -- pushing Q ⊔ Z through f⁻¹ will yield (S F ⊓ conj c⁻¹ • G ⊔ Z which is isomorphic to A
  case A_eq_Q_join_Z =&gt; exact A_eq_Q_join_Z
  -- Q is commutative because it is the image of a subgroup of a commutative group
  case IsElementaryAbelian =&gt; exact IsElementaryAbelian_Q
  -- Is p-Sylow
  case IsPSylow =&gt;
    -- as Q.subgroupOf G ≃* Q, Q.subgroupOf G is nontrivial as Q is nontrivial
    have nontrivial_Q_subgroupOf_G: Nontrivial (Q.subgroupOf G) :=
      (subgroupOfEquivOfLe Q_le_G).nontrivial
    -- Q.subgroupOf G is finite as it is the preimage of a finite set on an injective function
    let subgroupOf_fin : Finite (Q.subgroupOf G) := by
      apply Set.Finite.preimage
      · exact Injective.injOn fun ⦃a₁ a₂⦄ a ↦ a
      exact Set.toFinite (Q.subgroupOf G).carrier
    have IsElementaryAbelian_Q_subgroupOf_G :=
      @subgroupOf SL(2,F) _ Q G p _ IsElementaryAbelian_Q
    have bot_lt_Q_subgroupOf_G : ⊥ &lt; Q.subgroupOf G := by
      apply Ne.bot_lt'
      symm
      rw [← nontrivial_iff_ne_bot]
      exact nontrivial_Q_subgroupOf_G
    have IsPGroup_Q_subgroupOf_G:=
      @IsPGroup
        G _ p hp'.out (Q.subgroupOf G) _ IsElementaryAbelian_Q_subgroupOf_G bot_lt_Q_subgroupOf_G
    have exists_Sylow := @IsPGroup.exists_le_sylow p G _ (Q.subgroupOf G) IsPGroup_Q_subgroupOf_G
    obtain ⟨S, hS⟩ := exists_Sylow
    use S
    refine le_antisymm ?Q_le_S ?S_le_Q
    case Q_le_S =&gt;
      exact hS
    case S_le_Q =&gt;
      -- As Q is nontrivial, S must be nontrivial as there is an injection from Q to S
      have nontrivial_S : Nontrivial S := Injective.nontrivial (inclusion_injective hS)
      let nonempty_center_S : Nonempty (center S) := One.instNonempty
      have zero_lt_card_center_S : 0 &lt; Nat.card (center S) := Nat.card_pos
      have p_dvd_card_center_S :=
        @IsPGroup.p_dvd_card_center S p hp'.out _ _ nontrivial_S S.isPGroup'
      have p_le_card_center_S : p ≤ Nat.card (center S) := by
        apply Nat.le_of_dvd zero_lt_card_center_S p_dvd_card_center_S
      -- Given the cardinality of `center S` is greater than cardinality of `center SL(2,F)`,
      -- there must exist an element of center S that does not lie in SL(2,F)
      obtain ⟨y, y_in_center_S, y_not_in_center⟩ :=
        @exists_noncenter_of_card_center_lt_card_center_Sylow F _ p _ _ G _ S p_le_card_center_S
      let inst : CommGroup (center S) := IsCommutative.commGroup (center S)
      have y_commutes_in_S : ∀ w : S, w * y = y * w := by
        intro w
        simp only [mem_map] at y_in_center_S
        obtain ⟨y', y'_in_center, rfl⟩ := y_in_center_S
        have w_eq : (G.subtype.comp S.toSubgroup.subtype) w = ((w : G) : SL(2,F)) := rfl
        -- Pull back w through the inclusion
        rw [← w_eq, ← MonoidHom.map_mul, ← MonoidHom.map_mul]
        congr 1
        rw [mem_center_iff] at y'_in_center
        exact y'_in_center _
      have S_join_Z_le_centra_meet_G :
        ((Subgroup.map G.subtype S.toSubgroup) ⊔ Z F :) ≤ centralizer {y} ⊓ G := by
        intro w hw
        rw [← center_SL2_eq_Z, ← SetLike.mem_coe,  mul_normal (N := center SL(2,F))] at hw
        obtain ⟨s', hs, z, z_in_center, rfl⟩ := hw
        simp at hs
        obtain ⟨s'_in_G, s''_in_S⟩ := hs
        simp
        split_ands
        · simp [mem_centralizer_iff]
          -- Coerce the following equality
          have y_commutes_with_s :
            y * (⟨(⟨s', s'_in_G⟩ : G), s''_in_S⟩ : S) =
              (⟨(⟨s', s'_in_G⟩ : G), s''_in_S⟩ : S)  * y := by
            symm; exact y_commutes_in_S _
          simp at y_commutes_with_s
          simp [mem_center_iff] at z_in_center
          rw [mul_assoc, ← z_in_center y, ← mul_assoc, y_commutes_with_s]
          group
        · exact (Subgroup.mul_mem_cancel_right G (center_le_G z_in_center)).mpr s'_in_G
      have Q_le_range_inclusion_G : Q ≤ G.subtype.range := by simp only [range_subtype, Q_le_G]
      have Q_le_map_S : Q ≤ (Subgroup.map G.subtype S.toSubgroup) := by
        rw [← comap_le_comap_of_le_range Q_le_range_inclusion_G]
        apply le_trans hS
        exact le_comap_map G.subtype ↑S
      -- A = Q ⊔ Z ≤ S ⊔ Z = centralizer {y} ⊓ G
      -- so by the maximality of A and because S ⊔ Z = centralizer {y} ⊓ G is commutative
      -- Q ⊔ Z = S ⊔ Z and Q ≤ S which implies Q = S
      have Q_join_Z_le_S_join_Z : Q ⊔ Z F ≤ (Subgroup.map G.subtype S.toSubgroup) ⊔ Z F :=
        sup_le_sup_right Q_le_map_S (Z F)
      have y_in_G : y ∈ G := by
        simp only [mem_map] at y_in_center_S
        obtain ⟨w, w_in_center_S, hw⟩ := y_in_center_S
        simp at hw
        rw [← hw]
        simp only [← SetLike.mem_coe, Subtype.coe_prop]
      have y_in_G_sdif_center_SL : y ∈ G.carrier \ ↑(center SL(2, F)) := by
        split_ands
        · exact y_in_G
        · exact y_not_in_center
      have centra_y_meet_G_in_MaxAbSub :=
        centralizer_meet_G_in_MaximalAbelianSubgroups_of_noncentral G
      have A_le_centra_meet_G : A ≤ centralizer {y} ⊓ G := by
        apply le_trans &lt;| le_of_eq A_eq_Q_join_Z
        apply le_trans Q_join_Z_le_S_join_Z
        exact S_join_Z_le_centra_meet_G
      have A_le_range : A ≤ G.subtype.range := by simp; exact hA.right
      have A_subgroupOf_G_le_centra_meet_G_subgroupOf_G :
        A.subgroupOf G ≤ (centralizer {y} ⊓ G).subgroupOf G := by
        simp only [Subgroup.subgroupOf, comap_le_comap_of_le_range A_le_range]
        exact A_le_centra_meet_G
      have IsCommutative_centra_y_meet_G : IsCommutative ((centralizer {y} ⊓ G)) := by
        apply inf_IsCommutative_of_IsCommutative_left
        apply IsCommutative_centralizer_of_not_mem_center _ y_not_in_center
      -- A subgroup of commutative group is commutative
      have IsCommutative_centra_y_meet_G_subgroupOf_G :
        IsCommutative ((centralizer {y} ⊓ G).subgroupOf G) := by
        exact subgroupOf_isCommutative G (centralizer {y} ⊓ G)
      have centra_meet_G_le_range : centralizer {y} ⊓ G ≤ G.subtype.range := by simp
      -- By the maximality of A we have that in fact A = centralizer {y} ⊓ G
      have A_eq_centra_y_meet_G : A = centralizer {y} ⊓ G := by
        apply le_antisymm
        · exact A_le_centra_meet_G
        · have centra_meet_G_le_A := @hA.left.right
            ((centralizer {y} ⊓ G).subgroupOf G)
              IsCommutative_centra_y_meet_G_subgroupOf_G
                A_subgroupOf_G_le_centra_meet_G_subgroupOf_G
          simp only [← comap_le_comap_of_le_range centra_meet_G_le_range]
          exact centra_meet_G_le_A
      -- From this equality we have that Q ⊔ Z = S ⊔ Z
      have Q_join_Z_eq_S_join_Z : Q ⊔ Z F = (Subgroup.map G.subtype S.toSubgroup) ⊔ Z F := by
        apply le_antisymm
        · exact Q_join_Z_le_S_join_Z
        · rw [← A_eq_Q_join_Z]
          apply le_trans
          exact S_join_Z_le_centra_meet_G
          exact le_of_eq A_eq_centra_y_meet_G.symm
      simp only [← center_SL2_eq_Z,
        ← SetLike.coe_set_eq, mul_normal (N := center SL(2,F))] at Q_join_Z_eq_S_join_Z
      -- This statement is key to show that from S ⊔ Z = Q ⊔ Z and S ≤ Q we have that S = Q
      have h' : (1 : SL(2,F)) = (-1 : SL(2,F)) ∨ -1 ∉ (Subgroup.map G.subtype S.toSubgroup) := by
        by_cases hp : p = 2
        -- In char F = 2, -1 = 1
        · left
          apply SpecialLinearGroup.neg_one_eq_one_of_two_eq_zero
          simp only [hp] at hC
          apply CharTwo.two_eq_zero
        -- Order of every element is p but -1 has order 2
        · right
          rw [← ne_eq] at hp
          have ne_zero_two : NeZero (2 : F) := @ne_zero_two_of_char_ne_two F _ p hp' hC hp
          intro neg_one_in_S
          have order_neg_one_eq_two : orderOf (-1 : SL(2,F)) = 2 := orderOf_neg_one_eq_two
          have two_dvd_pow_p :=
            @Subgroup.orderOf_dvd_natCard
              SL(2,F) _ (Subgroup.map G.subtype S.toSubgroup) (-1) neg_one_in_S
          have card_image_eq : Nat.card (Subgroup.map G.subtype S) = Nat.card S.toSubgroup := by
            apply card_map_of_injective &lt;| subtype_injective G
          rw [order_neg_one_eq_two, card_image_eq, Sylow.card_eq_multiplicity] at two_dvd_pow_p
          have two_dvd_p : 2 ∣ p := Nat.Prime.dvd_of_dvd_pow Nat.prime_two two_dvd_pow_p
          have two_eq_p : p = 2 :=
            ((Nat.prime_dvd_prime_iff_eq Nat.prime_two hp'.out).mp two_dvd_p).symm
          contradiction
      apply le_of_eq
      have := @mul_center_inj
        F _ (Subgroup.map G.subtype S) Q Q_le_map_S h' Q_join_Z_eq_S_join_Z.symm
      have ker_G_subtype_le_S : G.subtype.ker ≤ S :=
        calc
        G.subtype.ker = ⊥ := ker_subtype G
        _ ≤ S := by apply bot_le
      simp only [Subgroup.subgroupOf, ← this]
      rw [comap_map_eq_self ker_G_subtype_le_S]
</pre> </small> </p>
<div class="lemma_thmwrapper theorem-style-plain" id="MaximalAbelianSubgroup.IsCyclic_and_card_coprime_CharP_or_eq_Q_join_Z_of_center_ne">
  <div class="lemma_thmheading">
    <span class="lemma_thmcaption">
    Lemma
    </span>
    <span class="lemma_thmlabel">6.36</span>
    <div class="thm_header_extras">

    
    ✓
        </div>
    <div class="thm_header_hidden_extras">

    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.IsCyclic_and_card_coprime_CharP_or_eq_Q_join_Z_of_center_ne">#</a>
    
    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#a0000000304"><svg  class="icon icon-cogs "><use xlink:href="symbol-defs.svg#icon-cogs"></use></svg>
</a>
    
    
    <button class="modal"><svg  class="icon icon-mindmap "><use xlink:href="symbol-defs.svg#icon-mindmap"></use></svg>
</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Uses</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroupsOf">Definition 6.5</a></li>
          
          <li><a href="Ch5_PropertiesOfSLOverAlgClosedField.html#SpecialSubgroups.Z">Definition 5.35</a></li>
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.center_not_mem">Lemma 6.24</a></li>
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.eq_centralizer_meet_of_center_lt">Lemma 6.26</a></li>
          
          <li><a href="Ch5_PropertiesOfSLOverAlgClosedField.html#SL2_IsConj_d_or_IsConj_s_or_IsConj_neg_s_of_AlgClosed">Proposition 5.51</a></li>
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.A_eq_Q_join_Z_of_IsConj_s_or_neg_s">Theorem 6.35</a></li>
          
          <li><a href="Ch5_PropertiesOfSLOverAlgClosedField.html#SpecialSubgroups.center_SL2_eq_Z">Lemma 5.38</a></li>
          
          <li><a href="Ch5_PropertiesOfSLOverAlgClosedField.html#conjugate_centralizers_of_IsConj">Proposition 5.62</a></li>
          
          <li><a href="Ch5_PropertiesOfSLOverAlgClosedField.html#centralizer_d_eq_D">Proposition 5.61</a></li>
          
          <li><a href="Ch5_PropertiesOfSLOverAlgClosedField.html#SpecialMatrices.d">Definition 5.5</a></li>
          
          <li><a href="Ch5_PropertiesOfSLOverAlgClosedField.html#SpecialSubgroups.D_iso_units">Definition 5.27</a></li>
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#coprime_card_fin_subgroup_of_inj_hom_group_iso_units">Lemma 6.10</a></li>
          
        </ul>
    
      </div>
    </div>

    
    
    <button class="modal lean">L∃∀N</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="https://AlexBrodbelt.github.io/ClassificationOfFiniteSubgroupsOfPGL/docs/find/#doc/MaximalAbelianSubgroup.IsCyclic_and_card_coprime_CharP_or_eq_Q_join_Z_of_center_ne" class="lean_decl">MaximalAbelianSubgroup.IsCyclic_and_card_coprime_CharP_or_eq_Q_join_Z_of_center_ne</a></li>
          
        </ul>
    
      </div>
    </div>

    
        </div>
  </div>
  <div class="lemma_thmcontent">
  <p>   If \(G \ne Z(G)\) then an element of \(A\) of \(\mathfrak {M}\), the maximal abelian subgroups of \(G\), is either cyclic group whose order is relatively prime to \(p\), the characteristic of the field \(F\); or of the form \(Q \times Z = Q \sqcup Z\) where \(Q\) is an elementary abelian Sylow \(p\)-subgroup of \(G\). </p>

  </div>
</div>
<div class="proof_wrapper" id="a0000000304">
  <div class="proof_heading">
    <span class="proof_caption">
    Proof
    </span>
    <span class="expand-proof">▶</span>
  </div>
  <div class="proof_content">
  <p> Since \(Z \not\in \mathfrak {M}\), each \(A \in \mathfrak {M}\) contains at least one \(x \not\in Z\). By Proposition <a href="Ch5_PropertiesOfSLOverAlgClosedField.html#SL2_IsConj_d_or_IsConj_s_or_IsConj_neg_s_of_AlgClosed">5.51</a> this \(x\) is conjugate to either \(d_\delta \) or \(\pm s_\sigma \) in \(\operatorname{SL}_2(F)\). Furthermore, by <a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.eq_centralizer_meet_of_center_lt">6.26</a> it follows that \(A = C_{\operatorname{SL}_2(F)}(x) \sqcap G\). </p>
<p>In view of <a href="Ch5_PropertiesOfSLOverAlgClosedField.html#conjugate_centralizers_of_IsConj">5.62</a>, it suffices to only consider these cases: <br /><br /> \(\pmb {x}\) <b class="bfseries">conjugate to</b> \(\pmb {d_\delta }\) <b class="bfseries">in</b> \(\operatorname{SL}_2(F)\) then by <a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.IsCyclic_and_card_coprime_CharP_of_IsConj_d">6.27</a> it follows that \(A\) is cyclic and its cardinality is coprime to \(p\), the characteristic of the field. </p>
<p> \(\pmb {x}\) <b class="bfseries">conjugate to</b> \(\pmb {\pm s_\sigma }\) <b class="bfseries">in</b> \(\pmb {L}\) then by <a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.A_eq_Q_join_Z_of_IsConj_s_or_neg_s">6.35</a> it follows that there exists a subgroup nontrivial finite subgroup \(Q\) of \(\operatorname{SL}_2(F)\) such that which is an elementary abelian \(p\)-Sylow subgroup of \(G\). </p>

  </div>
</div>
<p> <small class="footnotesize"> <pre class="verbatim">
theorem IsCyclic_and_card_coprime_CharP_or_eq_Q_join_Z_of_center_ne
  {F : Type*} [Field F] [IsAlgClosed F] [DecidableEq F] {p : ℕ} [hp' : Fact (Nat.Prime p)]
  [hC : CharP F p] (G : Subgroup SL(2,F))[hG₀ : Finite G] (A : Subgroup SL(2,F))
  (hA : A ∈ MaximalAbelianSubgroupsOf G) (center_le_G : center SL(2,F) ≤ G)
  (center_ne_G : G ≠ center SL(2,F)) : (IsCyclic A ∧ Nat.Coprime (Nat.card A) p)
  ∨
  (
  ∃ Q : Subgroup SL(2,F),
  Nontrivial Q ∧
  Finite Q ∧
  Q ≤ G ∧
  A = Q ⊔ Z F ∧
  IsElementaryAbelian p Q ∧
  ∃ S : Sylow p G, Q.subgroupOf G = S
  ) := by
  have center_ne_A : center SL(2,F) ≠ A :=
    (ne_of_mem_of_not_mem hA (center_not_mem G center_ne_G.symm)).symm
  have center_lt_A : center SL(2,F) &lt; A :=
    lt_of_le_of_ne (center_le G A hA center_le_G) center_ne_A
  -- Take the element that belongs to A but does not belong to Z
  -- We will use this element to show A = centralizer {x} ⊓ G
  obtain ⟨x, ⟨x_in_G, x_not_in_center⟩, A_eq_centra⟩ :=
    eq_centralizer_meet_of_center_lt A G center_lt_A hA
  -- Once shown A = centralizer {x} ⊓ G and recalling x is conjugate to d δ or ± s σ
  -- We show the centralizer in each of these cases is conjugate to finite
  -- commutative subgroups of either D or SZ
  rcases SL2_IsConj_d_or_IsConj_s_or_IsConj_neg_s_of_AlgClosed x with
    (⟨δ, x_IsConj_d⟩ | x_IsConj_s_or_neg_s)
  -- x is conjugate to d δ
  · left
    exact
      IsCyclic_and_card_coprime_CharP_of_IsConj_d G A x x_not_in_center A_eq_centra δ x_IsConj_d
  -- x is conjugate to s σ
  · right
    have x_IsConj_s_or_neg_s : ∃ σ, IsConj (s σ) x ∨ IsConj (-s σ) x := by
      rcases x_IsConj_s_or_neg_s with (⟨σ, hσ⟩ | ⟨σ, hσ⟩) &lt;;&gt; use σ
      exact Or.inl hσ
      exact Or.inr hσ
    obtain ⟨σ, x_IsConj_s_or_neg_s⟩ := x_IsConj_s_or_neg_s
    exact
      A_eq_Q_join_Z_of_IsConj_s_or_neg_s G A hA center_le_G center_lt_A x x_in_G
        x_not_in_center A_eq_centra σ x_IsConj_s_or_neg_s
</pre> </small> </p>
<div class="theorem_thmwrapper theorem-style-plain" id="MaximalAbelianSubgroup.IsCyclic_and_card_coprime_CharP_or_eq_Q_join_Z">
  <div class="theorem_thmheading">
    <span class="theorem_thmcaption">
    Theorem
    </span>
    <span class="theorem_thmlabel">6.37</span>
    <div class="thm_header_extras">

    
    ✓
        </div>
    <div class="thm_header_hidden_extras">

    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.IsCyclic_and_card_coprime_CharP_or_eq_Q_join_Z">#</a>
    
    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#a0000000305"><svg  class="icon icon-cogs "><use xlink:href="symbol-defs.svg#icon-cogs"></use></svg>
</a>
    
    
    <button class="modal"><svg  class="icon icon-mindmap "><use xlink:href="symbol-defs.svg#icon-mindmap"></use></svg>
</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Uses</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroupsOf">Definition 6.5</a></li>
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.IsCyclic_and_card_coprime_CharP_or_eq_Q_join_Z_of_center_ne">Lemma 6.36</a></li>
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.IsCyclic_and_card_Coprime_CharP_of_center_eq">Lemma 6.22</a></li>
          
        </ul>
    
      </div>
    </div>

    
    
    <button class="modal lean">L∃∀N</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="https://AlexBrodbelt.github.io/ClassificationOfFiniteSubgroupsOfPGL/docs/find/#doc/MaximalAbelianSubgroup.IsCyclic_and_card_coprime_CharP_or_eq_Q_join_Z" class="lean_decl">MaximalAbelianSubgroup.IsCyclic_and_card_coprime_CharP_or_eq_Q_join_Z</a></li>
          
        </ul>
    
      </div>
    </div>

    
        </div>
  </div>
  <div class="theorem_thmcontent">
  <p>   An element \(A\) of \(\mathfrak {M}\) is either a cyclic group whose order is relatively prime to \(p\), or of the form \(Q \times Z\) where \(Q\) is an elementary abelian Sylow \(p\)-subgroup of \(G\).  </p>

  </div>
</div>
<div class="proof_wrapper" id="a0000000305">
  <div class="proof_heading">
    <span class="proof_caption">
    Proof
    </span>
    <span class="expand-proof">▶</span>
  </div>
  <div class="proof_content">
  <p> First consider the trivial case of \(G=Z\). By <a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.IsCyclic_and_card_Coprime_CharP_of_center_eq">6.22</a> we yield that \(A\) is cyclic and has cardinality coprime to \(p\). <br />Now assume \(G \neq Z\). By <a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.IsCyclic_and_card_coprime_CharP_or_eq_Q_join_Z_of_center_ne">6.36</a> we yield that \(A\) is either a cyclic group whose order is relatively prime to \(p\), or of the form \(Q \times Z\) where \(Q\) is an elementary abelian Sylow \(p\)-subgroup of \(G\). </p>

  </div>
</div>
<p> <small class="footnotesize"> <pre class="verbatim">
theorem IsCyclic_and_card_coprime_CharP_or_eq_Q_join_Z {F : Type*}
  [Field F] [IsAlgClosed F] [DecidableEq F] {p : ℕ} [hp' : Fact (Nat.Prime p)] [hC : CharP F p]
  (G : Subgroup SL(2, F)) [hG₀ : Finite ↥G] (A : Subgroup SL(2, F))
  (hA : A ∈ MaximalAbelianSubgroupsOf G) (center_le_G : center SL(2, F) ≤ G)  :
  IsCyclic ↥A ∧ (Nat.card ↥A).Coprime p
  ∨
  ∃ Q : Subgroup SL(2,F),
    Nontrivial Q ∧ Finite Q ∧ Q ≤ G ∧ A = Q ⊔ Z F ∧
      IsElementaryAbelian p Q ∧ ∃ S : Sylow p G, Q.subgroupOf G = S := by
  obtain (center_eq_G | center_ne_G ) := eq_or_ne G (center SL(2, F))
  case inl =&gt;
    left
    exact IsCyclic_and_card_Coprime_CharP_of_center_eq hp'.out A G hA center_eq_G
  case inr =&gt;
    exact IsCyclic_and_card_coprime_CharP_or_eq_Q_join_Z_of_center_ne G A hA
        center_le_G center_ne_G
</pre> </small> </p>
<div class="theorem_thmwrapper theorem-style-plain" id="MaximalAbelianSubgroup.index_normalizer_le_two">
  <div class="theorem_thmheading">
    <span class="theorem_thmcaption">
    Theorem
    </span>
    <span class="theorem_thmlabel">6.38</span>
    <div class="thm_header_extras">

        </div>
    <div class="thm_header_hidden_extras">

    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.index_normalizer_le_two">#</a>
    
    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#a0000000306"><svg  class="icon icon-cogs "><use xlink:href="symbol-defs.svg#icon-cogs"></use></svg>
</a>
    
    
    <button class="modal"><svg  class="icon icon-mindmap "><use xlink:href="symbol-defs.svg#icon-mindmap"></use></svg>
</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Uses</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroupsOf">Definition 6.5</a></li>
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.IsCyclic_and_card_coprime_CharP_or_eq_Q_join_Z">Theorem 6.37</a></li>
          
          <li><a href="Ch5_PropertiesOfSLOverAlgClosedField.html#normalizer_subgroup_D_eq_DW">Proposition 5.57</a></li>
          
        </ul>
    
      </div>
    </div>

    
    
    <button class="modal lean">L∃∀N</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="https://AlexBrodbelt.github.io/ClassificationOfFiniteSubgroupsOfPGL/docs/find/#doc/MaximalAbelianSubgroup.index_normalizer_le_two" class="lean_decl">MaximalAbelianSubgroup.index_normalizer_le_two</a></li>
          
        </ul>
    
      </div>
    </div>

    
        </div>
  </div>
  <div class="theorem_thmcontent">
  <p>   If \(A \in \mathfrak {M}\) and \(|A|\) is relatively prime to \(p\), then we have \([N_G(A): A] \leq 2\). </p>

  </div>
</div>
<div class="proof_wrapper" id="a0000000306">
  <div class="proof_heading">
    <span class="proof_caption">
    Proof
    </span>
    <span class="expand-proof">▶</span>
  </div>
  <div class="proof_content">
  <p> (iv) If \(|A| \leq 2\) then \(A=Z=G\). So \(A\) is trivially normal in \(G\) and \([N_G(A): A] = 1\). <br /><br />Now assume that \(|A| {\gt} 2\). Since \(|A|\) is relatively prime to \(p\), we have that \(A\) is a cyclic group conjugate to a finite subgroup of \(D\) in \(\operatorname{SL}_2(F)\) by the proof of part <a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.IsCyclic_and_card_coprime_CharP_or_eq_Q_join_Z">6.37</a>, call this subgroup \({\widetilde{A}}\). Thus both \({\widetilde{A}}\) and \(D\) have orders greater than 2. Applying Proposition <a href="Ch5_PropertiesOfSLOverAlgClosedField.html#normalizer_subgroup_D_eq_DW">5.57</a> we observe that </p>
<div class="displaymath" id="norm1">
  \begin{align} \label{norm1} N_{\operatorname{SL}_2(F)}({\widetilde{A}}) = \langle D , w \rangle = N_{\operatorname{SL}_2(F)}(D). \end{align}
</div>
<p>Since \(A\) and \({\widetilde{A}}\) are conjugate in \(\operatorname{SL}_2(F)\), there exists an element \(z \in L\) such that \(zAz^{-1} = {\widetilde{A}}\). This \(z\) determines an inner automorphism of \(\operatorname{SL}_2(F)\) defined by </p>
<div class="displaymath" id="a0000000307">
  \begin{align*}  i_z: L \longrightarrow L, \qquad \text{where} \quad i_z(t) = z t z^{-1} \quad \forall \;  t \in L. \end{align*}
</div>
<p>Let \(i_z(G) = {\widetilde{G}}\) denote the image of \(G\) under \(i_z\). Since \(A\) is a maximal abelain subgroup of \(G\) it’s a simple task to show that \({\widetilde{A}}\) is a maximal abelian subgroup of \({\widetilde{G}}\) and I will leave this to the reader to verify. We now show that \(i_z(N_G(A)) = N_{\widetilde{G}}({\widetilde{A}})\) . Take an arbitrary \(g \in N_G(A)\). </p>
<div class="displaymath" id="a0000000308">
  \begin{align*}  (z g z^{-1}) {\widetilde{A}} (z g z^{-1})^{-1} & = z g (z^{-1} {\widetilde{A}} z) g^{-1} z^{-1} \\ & = z (g A g^{-1}) z^{-1} \tag {since $zAz^{-1} = {\widetilde{A}}$ } \\ & = z A z^{-1} \tag {since $g \in N_G(A)$} \\ & = {\widetilde{A}}. \end{align*}
</div>
<p>So \(z g z^{-1} = i_z(g) \in N_{\widetilde{G}}({\widetilde{A}})\) and since it was chosen arbitrarily, \(i_z(N_G(A)) \subset N_{\widetilde{G}}({\widetilde{A}})\). Now take an arbitrary \(z h z^{-1} \in N_{\widetilde{G}}({\widetilde{A}})\). </p>
<div class="displaymath" id="a0000000309">
  \begin{align*}  {\widetilde{A}} & = (z h z^{-1}) {\widetilde{A}} (z h z^{-1})^{-1} \\ & = z h (z^{-1} {\widetilde{A}} z) h^{-1} z^{-1} \\ & = z h A h^{-1} z^{-1}. \tag {since $A = z^{-1} {\widetilde{A}} z$} \end{align*}
</div>
<p>Now multiplication on the left by \(z^{-1}\) and right by \(z\) gives: </p>
<div class="displaymath" id="a0000000310">
  \begin{align*}  A = z^{-1} {\widetilde{A}} z = h A h^{-1}, \end{align*}
</div>
<p>so \(h \in N_G(A)\). Furthermore, \(z h z^{-1}\) and indeed the whole of \(N_{\widetilde{G}}({\widetilde{A}})\) is contained in \(i_z(N_G(A))\). Thus \( i_z(N_G(A)) = N_{\widetilde{G}}({\widetilde{A}})\). In particular, we have, </p>
<div class="displaymath" id="6.8iv1">
  \begin{align} \label{6.8iv1} [N_G(A): A] = [N_{\widetilde{G}}({\widetilde{A}}): {\widetilde{A}}]. \end{align}
</div>
<p>Since \({\widetilde{G}} {\lt} L\), the normaliser of \({\widetilde{A}}\) in \({\widetilde{G}}\) is simply the normaliser of \({\widetilde{A}}\) in \(\operatorname{SL}_2(F)\) restricted to \({\widetilde{G}}\), thus \(N_{\widetilde{G}}({\widetilde{A}}) {\lt} N_{\operatorname{SL}_2(F)}({\widetilde{A}}) = N_{\operatorname{SL}_2(F)}(D)\) by (<a href="Ch6_MaximalAbelianSubgroupClassEquation.html#norm1">2</a>). Now since \(D \vartriangleleft N_{\operatorname{SL}_2(F)}(D)\), the Second Isomorphism Theorem shows that, </p>
<div class="displaymath" id="2iso">
  \begin{align} \label{2iso} N_{\widetilde{G}}({\widetilde{A}})/( N_{\widetilde{G}}({\widetilde{A}}) \cap D) \;  \cong \;  DN_{\widetilde{G}}({\widetilde{A}}) / D. \end{align}
</div>
<p> <br />Clearly \({\widetilde{A}} \subset {\widetilde{G}} \cap D\). We show that this inclusion is infact an equality. Assume that there exists some \(d_\delta \in {\widetilde{G}} \cap D\) which is not in \({\widetilde{A}}\). The group \(\langle d_\delta , {\widetilde{A}} \rangle \) is thus an abelian subgroup of \({\widetilde{G}}\), strictly larger than \({\widetilde{A}}\) and contradicting the fact that \({\widetilde{A}}\) is maximal abelian in \({\widetilde{G}}\). Thus \({\widetilde{A}} = {\widetilde{G}} \cap D\). It is trivial to see that \({\widetilde{A}} \subset N_{\widetilde{G}}({\widetilde{A}}) \cap D\). Also \(N_{\widetilde{G}}({\widetilde{A}}) \cap D \subset {\widetilde{G}} \cap D = {\widetilde{A}}\). So, </p>
<div class="displaymath" id="parti">
  \begin{align} \label{parti} {\widetilde{A}} = N_{\widetilde{G}}({\widetilde{A}}) \cap D. \end{align}
</div>
<p>Observe also that, </p>
<div class="displaymath" id="index1or2">
  \begin{align} \label{index1or2} DN_{\widetilde{G}}({\widetilde{A}}) = \{  D, \langle D, w \rangle \}  \subset \langle D, w \rangle = N_{\operatorname{SL}_2(F)}(D). \end{align}
</div>
<p>Now we piece the preceding results together to give the desired result. </p>
<div class="displaymath" id="a0000000311">
  \begin{align*}  N_{\widetilde{G}}({\widetilde{A}}) / {\widetilde{A}} \;  &  \cong \;  N_{\widetilde{G}}({\widetilde{A}})/( N_{\widetilde{G}}({\widetilde{A}}) \cap D) \\ &  \cong \;  DN_{\widetilde{G}}({\widetilde{A}}) / D \\ &  \subset N_{\operatorname{SL}_2(F)}(D) / D \\ & = \langle D, w \rangle / D \;  \cong \;  \mathbb {Z}_2. \end{align*}
</div>
<p>We have shown that \(N_{\widetilde{G}}({\widetilde{A}}) / {\widetilde{A}}\) is isomorphic to a subset of \(\mathbb {Z}_2\). Thus by (<a href="Ch6_MaximalAbelianSubgroupClassEquation.html#6.8iv1">3</a>) we have established that, </p>
<div class="displaymath" id="a0000000312">
  \[ [N_G(A): A] = [N_{\widetilde{G}}({\widetilde{A}}): {\widetilde{A}}] \leq 2. \]
</div>


  </div>
</div>
<p> <small class="footnotesize"> <pre class="verbatim">
theorem index_normalizer_le_two {F : Type*} [Field F] {p : ℕ}(A G : Subgroup SL(2,F))
  (center_le_G : center SL(2,F) ≤ G) (hA : A ∈ MaximalAbelianSubgroupsOf G)
  (hA' : Nat.Coprime (Nat.card A) p) : (A.subgroupOf G).normalizer.index ≤ 2 := by
  sorry
</pre> </small> </p>
<div class="theorem_thmwrapper theorem-style-plain" id="MaximalAbelianSubgroup.of_index_normalizer_eq_two">
  <div class="theorem_thmheading">
    <span class="theorem_thmcaption">
    Theorem
    </span>
    <span class="theorem_thmlabel">6.39</span>
    <div class="thm_header_extras">

    
    ✓
        </div>
    <div class="thm_header_hidden_extras">

    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.of_index_normalizer_eq_two">#</a>
    
    
    <button class="modal"><svg  class="icon icon-mindmap "><use xlink:href="symbol-defs.svg#icon-mindmap"></use></svg>
</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Uses</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroupsOf">Definition 6.5</a></li>
          
        </ul>
    
      </div>
    </div>

    
    
    <button class="modal lean">L∃∀N</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="https://AlexBrodbelt.github.io/ClassificationOfFiniteSubgroupsOfPGL/docs/find/#doc/MaximalAbelianSubgroup.of_index_normalizer_eq_two" class="lean_decl">MaximalAbelianSubgroup.of_index_normalizer_eq_two</a></li>
          
        </ul>
    
      </div>
    </div>

    
        </div>
  </div>
  <div class="theorem_thmcontent">
  <p>   If \(A \in \mathfrak {M}\), \(|A|\) is relatively prime to \(p\), and if \([N_G(A): A] = 2\), then there is an element \(y\) of \(N_G(A) \!  \setminus \!  A\) such that,  </p>
<div class="displaymath" id="a0000000313">
  \begin{align*}  yxy^{-1} = x^{-1} \qquad \forall x \in A.\end{align*}
</div>

  </div>
</div>
<div class="theorem_thmwrapper theorem-style-plain" id="a0000000314">
  <div class="theorem_thmheading">
    <span class="theorem_thmcaption">
    Theorem
    </span>
    <div class="thm_header_extras">

        </div>
    <div class="thm_header_hidden_extras">

    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#a0000000314">#</a>
    
    
    
        </div>
  </div>
  <div class="theorem_thmcontent">
  
  </div>
</div>
<div class="proof_wrapper" id="a0000000315">
  <div class="proof_heading">
    <span class="proof_caption">
    Proof
    </span>
    <span class="expand-proof">▶</span>
  </div>
  <div class="proof_content">
  
<p>If \([N_G(A): A] = 2\), then the above argument at <a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.index_normalizer_le_two">6.38</a> shows that \(N_{\widetilde{G}}({\widetilde{A}}) / {\widetilde{A}} \;  \cong \;  \mathbb {Z}_2\). Thus \(DN_{\widetilde{G}}({\widetilde{A}}) = N_{\operatorname{SL}_2(F)}(D) = \langle D, w \rangle \). This means that \(N_{\widetilde{G}}({\widetilde{A}})\) contains some element \(wd_\omega \). In fact, since \(w d_\delta \not\in D\), we have \(w d_\delta \in N_{\widetilde{G}}({\widetilde{A}}) \!  \setminus \!  {\widetilde{A}}\). Take any element \(x \in A\). Since \({\widetilde{A}} = zAz^{-1}\), \(zxz^{-1} \in {\widetilde{A}}\), call it \(d_\sigma \). Let \(y = z^{-1}w d_\delta z\). Since \(wd_\omega \in N_{\widetilde{G}}({\widetilde{A}}) \!  \setminus \!  {\widetilde{A}}\) it follows that \(y \in N_G(A)\!  \setminus \!  A\). We show that this \(y\) inverts \(x\): </p>
<div class="displaymath" id="a0000000316">
  \begin{align*}  yxy^{-1} & = (z^{-1}w d_\delta z)(z^{-1} d_\sigma z)(z^{-1}d^{-1}_\omega w^{-1} z) \\ & = z^{-1} w d_\delta d_\sigma d^{-1}_\omega w^{-1} z \\ & = z^{-1} w d_\sigma w^{-1} z \\ & = z^{-1} d^{-1}_\sigma z \\ & = x^{-1}. \end{align*}
</div>

  </div>
</div>
<p> <small class="footnotesize"> <pre class="verbatim">
theorem of_index_normalizer_eq_two {F : Type*} [Field F] {p : ℕ }(A G : Subgroup SL(2,F))
  (hA : A ∈ MaximalAbelianSubgroupsOf G) (hA' : Nat.Coprime (Nat.card A) p)
  (hNA : A.normalizer.index = 2) (x : A) :
  ∃ y ∈ A.normalizer.carrier \ A, y * x * y⁻¹ = x⁻¹ := by sorry
</pre> </small> </p>
<div class="theorem_thmwrapper theorem-style-plain" id="MaximalAbelianSubgroup.exists_IsCyclic_K_normalizer_eq_Q_join_K">
  <div class="theorem_thmheading">
    <span class="theorem_thmcaption">
    Theorem
    </span>
    <span class="theorem_thmlabel">6.40</span>
    <div class="thm_header_extras">

        </div>
    <div class="thm_header_hidden_extras">

    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.exists_IsCyclic_K_normalizer_eq_Q_join_K">#</a>
    
    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#a0000000317"><svg  class="icon icon-cogs "><use xlink:href="symbol-defs.svg#icon-cogs"></use></svg>
</a>
    
    
    <button class="modal"><svg  class="icon icon-mindmap "><use xlink:href="symbol-defs.svg#icon-mindmap"></use></svg>
</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Uses</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.IsCyclic_and_card_coprime_CharP_or_eq_Q_join_Z">Theorem 6.37</a></li>
          
          <li><a href="Ch5_PropertiesOfSLOverAlgClosedField.html#normalizer_subgroup_S_le_L">Proposition 5.55</a></li>
          
        </ul>
    
      </div>
    </div>

    
    
    <button class="modal lean">L∃∀N</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="https://AlexBrodbelt.github.io/ClassificationOfFiniteSubgroupsOfPGL/docs/find/#doc/MaximalAbelianSubgroup.exists_IsCyclic_K_normalizer_eq_Q_join_K" class="lean_decl">MaximalAbelianSubgroup.exists_IsCyclic_K_normalizer_eq_Q_join_K</a></li>
          
        </ul>
    
      </div>
    </div>

    
        </div>
  </div>
  <div class="theorem_thmcontent">
  <p>   Let \(Q\) be a Sylow \(p\)-subgroup of \(G\). If \(Q \neq \{ I_G\} \), then there is a cyclic subgroup \(K\) of \(G\) such that \(N_G(Q) = Q \sqcup K = QK\). <br /></p>

  </div>
</div>
<div class="proof_wrapper" id="a0000000317">
  <div class="proof_heading">
    <span class="proof_caption">
    Proof
    </span>
    <span class="expand-proof">▶</span>
  </div>
  <div class="proof_content">
  <p> By part <a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.IsCyclic_and_card_coprime_CharP_or_eq_Q_join_Z">6.37</a>, \(Q\) is conjugate to a finite subgroup of \(S\) in \(\operatorname{SL}_2(F)\). In fact, without loss of generality we can assume that \(Q \subset S\), moreoever \(Q \subset S \cap G\). We show that this is in fact an equality by showing that the reverse inclusion also holds. Let \(s_\sigma \) be an arbitrary element of \(S \cap G\). Then \(\langle s_\sigma , Q \rangle \) is a \(p\)-group of \(G\) which must be equal to \(Q\) since it is a Sylow \(p\)-subgroup of \(G\). Thus \(s_\sigma \in Q\) and </p>
<div class="displaymath" id="Q=TNG">
  \begin{align} \label{Q=TNG} Q = S \cap G. \end{align}
</div>
<p>Since \(|Q| {\gt} 1\), Proposition <a href="Ch5_PropertiesOfSLOverAlgClosedField.html#normalizer_subgroup_S_le_L">5.55</a> gives that \(N_G(Q) \subset N_{\operatorname{SL}_2(F)}(Q) \subset H\). So \(N_G(Q) \subset H \cap G\). Now take an arbitrarily chosen \(d_\delta s_\sigma \in H \cap G\) and \(s_\gamma \in Q\). </p>
<div class="displaymath" id="a0000000318">
  \begin{align*}  (d_\delta s_\sigma ) s_\gamma (d_\delta s_\sigma )^{-1} & = d_\delta ( s_\sigma s_\gamma s_{-\sigma }) d^{-1}_\delta \\ & = d_\delta s_\gamma d^{-1}_\delta \\ & = s_\sigma . \end{align*}
</div>
<p>Since it is a product of elements of \(G\), \(s_\sigma \in S \cap G = Q\) by (<a href="Ch6_MaximalAbelianSubgroupClassEquation.html#Q=TNG">7</a>). Thus \(d_\delta s_\sigma \in N_G(Q)\) and indeed the whole of \(H \cap G\) is contained in \(N_G(Q)\) and </p>
<div class="displaymath" id="normQ=HNG">
  \begin{align} \label{normQ=HNG} N_G(Q) = H \cap G. \end{align}
</div>
<p>We now define a map \(\phi \) by, </p>
<div class="displaymath" id="a0000000319">
  \begin{align*}  \phi : N_G(Q) \longrightarrow D, \qquad \text{where} \quad \!  \phi (d_\delta s_\sigma ) = d_\delta \quad \forall \;  d_\delta s_\sigma \in N_G(Q). \end{align*}
</div>
<p>Next we determine the kernel of \(\phi \). </p>
<div class="displaymath" id="a0000000320">
  \begin{align*}  \ker (\phi ) & = \{  d_\delta s_\sigma \in N_G(Q) : \phi (d_\delta s_\sigma ) = I_G \}  \\ & = N_G(Q) \cap S \\ & = H \cap G \cap S \\ & = S \cap G = Q. \end{align*}
</div>
<p>We show that \(\phi \) is a group homomorphism. Take \(d_\delta s_\sigma \), \(d_\rho s_\gamma \) from \( N_G(Q)\). </p>
<div class="displaymath" id="a0000000321">
  \begin{align*}  \phi (d_\delta s_\sigma d_\rho s_\gamma ) & = \phi (d_\delta d_\rho s_\sigma s_\gamma ) \\ & = d_\delta d_\rho \\ & = \phi (d_\delta s_\sigma ) \phi (d_\rho s_\gamma ). \end{align*}
</div>
<p>Thus by the First Isomorphism Theorem, </p>
<div class="displaymath" id="6.8viso">
  \begin{align} \label{6.8viso} N_G(Q) / Q & \cong \phi (N_G(Q)), \end{align}
</div>
<p>Since \(N_G(Q)\) is a finite group, it’s image under \(\phi \) is thus a finite subgroup of \(D\). Furthermore, since \(D \cong F^\times \) (by Lemma <a href="Ch5_PropertiesOfSLOverAlgClosedField.html#SpecialSubgroups.D_iso_units">5.27</a>), \(\phi (N_G(Q))\) is a cyclic group whose order divides \(p^m-1\) and is therefore relatively prime to \(p\), and by <a href="Ch6_MaximalAbelianSubgroupClassEquation.html#6.8viso" class="eqref">9</a>, so too is \(N_G(Q) / Q\). <br /><br />Let \(r\) be the order of \(N_G(Q) / Q\). Since it is cyclic, \(N_G(Q)/Q\) is generated by a single element, namely a coset of \(Q\) in \(N_G(Q)\), call it \(kQ\). So \(|kQ| = r\). Observe that, </p>
<div class="displaymath" id="a0000000322">
  \begin{align*}  (kQ)^r & = Q, \\ k^rQ & = Q, \\ k^r & \in Q. \end{align*}
</div>
<p> Since \(Q\) is elementary abelian, each of it’s non-trivial elements has order \(p\), so \(k\) has order \(r\) or \(rp\). In either case, since gcd\((r,p)=1\), the order of \(k^p\) is \(r\). Let \(K = \langle k^p \rangle \). Now \(|K| = r\) and </p>
<div class="displaymath" id="a0000000323">
  \begin{align*}  |N_G(Q)| & = r|Q| \\ & = |K||Q| \\ & = |QK|. \tag {since $Q \cap K = I_G$} \end{align*}
</div>
<p> Thus, </p>
<div class="displaymath" id="QK">
  \begin{align} \label{QK} N_G(Q) & = QK. \end{align}
</div>

  </div>
</div>
<p> <small class="footnotesize"> <pre class="verbatim">
theorem exists_IsCyclic_K_normalizer_eq_Q_join_K {F : Type*} [Field F] { p : ℕ }
  (hp : Nat.Prime p)
  (G : Subgroup SL(2,F))
  (Q : Sylow p G)
  (h : Q.toSubgroup ≠ ⊥) :
  ∃ K : Subgroup G, IsCyclic K ∧ normalizer Q.toSubgroup = Q.toSubgroup ⊔ K := by sorry
</pre> </small> </p>
<div class="theorem_thmwrapper theorem-style-plain" id="MaximalAbelianSubgroup.K_mem_MaximalAbelianSubgroups_of_center_lt_card_K">
  <div class="theorem_thmheading">
    <span class="theorem_thmcaption">
    Theorem
    </span>
    <span class="theorem_thmlabel">6.41</span>
    <div class="thm_header_extras">

        </div>
    <div class="thm_header_hidden_extras">

    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.K_mem_MaximalAbelianSubgroups_of_center_lt_card_K">#</a>
    
    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#a0000000324"><svg  class="icon icon-cogs "><use xlink:href="symbol-defs.svg#icon-cogs"></use></svg>
</a>
    
    
    <button class="modal"><svg  class="icon icon-mindmap "><use xlink:href="symbol-defs.svg#icon-mindmap"></use></svg>
</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Uses</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.IsCyclic_and_card_coprime_CharP_or_eq_Q_join_Z">Theorem 6.37</a></li>
          
        </ul>
    
      </div>
    </div>

    
    
    <button class="modal lean">L∃∀N</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="https://AlexBrodbelt.github.io/ClassificationOfFiniteSubgroupsOfPGL/docs/find/#doc/MaximalAbelianSubgroup.K_mem_MaximalAbelianSubgroups_of_center_lt_card_K" class="lean_decl">MaximalAbelianSubgroup.K_mem_MaximalAbelianSubgroups_of_center_lt_card_K</a></li>
          
        </ul>
    
      </div>
    </div>

    
        </div>
  </div>
  <div class="theorem_thmcontent">
  <p>   Let \(Q\) be a Sylow \(p\)-subgroup of \(G\). If \(Q \neq \{ I_G\} \), then there is a cyclic subgroup \(K\) of \(G\) such that \(N_G(Q) = Q \sqcup K = QK\). Furthermore, If \(|K| {\gt} |Z|\), then \(K \in \mathfrak {M}\) </p>

  </div>
</div>
<div class="proof_wrapper" id="a0000000324">
  <div class="proof_heading">
    <span class="proof_caption">
    Proof
    </span>
    <span class="expand-proof">▶</span>
  </div>
  <div class="proof_content">
  <p>Assume \(|K| {\gt} |Z|\). Since \(K\) is abelian, it must be contained in some maximal abelian group \(A \in \mathfrak {M}\). By part <a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.IsCyclic_and_card_coprime_CharP_or_eq_Q_join_Z">6.37</a>, \(A\) must also be a cyclic group whose order is relatively prime to \(p\). <br /><br />Since \(A\) is conjugate in \(\operatorname{SL}_2(F)\) to a subgroup of \(D\), each non-central element of \(A\) has exactly 2 fixed points on the projective line \(\mathscr {L}\) by Proposition <a href="Ch5_PropertiesOfSLOverAlgClosedField.html#6.7">5.67</a>. Let \(A = \langle x \rangle \) and let \(P_1\) and \(P_2\) be the points fixed by \(x\). We show by induction on \(n\) that \(x^n\) also fixes \(P_1\) and \(P_2\), for all \(n \in \mathbb {Z^+}\). We do this by assuming first that \(x^{n-1}\) fixes \(P_i\). </p>
<div class="displaymath" id="a0000000325">
  \begin{align*}  x^n P_i = x(x^{n-1} P_i) = x (P_i) = P_i. \end{align*}
</div>
<p>The importance of this is that since each element of \(A\) can be expressed as some power of \(x\), they must have the same two fixed points, namely \(P_1\) and \(P_2\). In other words, </p>
<div class="displaymath" id="stab">
  \begin{align} \label{stab} A \subset S_L(P_i), \qquad (\text{$i$ = 1 or 2}) \end{align}
</div>
<p>By Proposition <a href="Ch5_PropertiesOfSLOverAlgClosedField.html#6.7">5.67</a>(ii), each element of \(S\) has a common fixed point \(P\) and Stab\((P) = H\). Since \(K \subset H\), each element in \(K\) fixes \(P\). Also, since \(K \subset A\), this \(P\) must be equal to either \(P_1\) or \(P_2\). Therefore by (<a href="Ch6_MaximalAbelianSubgroupClassEquation.html#stab">11</a>), \(A \subset \text{Stab}(P) = H\). We arrive at the following result: </p>
<div class="displaymath" id="a0000000326">
  \begin{align*}  A & \subset H \cap G \\ & = N_G(Q) \\ & = QK. \end{align*}
</div>
<p>Furthermore, we get, </p>
<div class="displaymath" id="a0000000327">
  \begin{align*}  A & = QK \cap A \\ & = QK \cap AK \tag {$K \subset A$ so $A = AK$} \\ & = (Q \cap A)K \\ & = K \tag {$Q \cap A = I_G$} \end{align*}
</div>
<p>Thus \(K \in \mathfrak {M}\).<br /><br /></p>

  </div>
</div>
<p> <small class="footnotesize"> <pre class="verbatim">
theorem K_mem_MaximalAbelianSubgroups_of_center_lt_card_K {F : Type*} [Field F] { p : ℕ } [hp' : Fact (Nat.Prime p)] (G : Subgroup SL(2,F))
  (Q : Sylow p G) (h : Q.toSubgroup ≠ ⊥) (K : Subgroup G)(hK : IsCyclic K)
  (hNG : normalizer Q.toSubgroup = Q.toSubgroup ⊔ K) (h : Nat.card K &gt; Nat.card (center SL(2,F))) :
  map G.subtype K ∈ MaximalAbelianSubgroupsOf G := by
  sorry
</pre> </small> </p>
<p>For the duration of this paper, unless otherwise stated, \(Q\) will denote a Sylow \(p\)-subgroup of \(G\) and \(K\) will be as described above. </p>
<h1 id="a0000000044">6.3 Conjugacy of Maximal Abelian Subgroups</h1>
<div class="definition_thmwrapper theorem-style-definition" id="ConjClassOfSet">
  <div class="definition_thmheading">
    <span class="definition_thmcaption">
    Definition
    </span>
    <span class="definition_thmlabel">6.42</span>
    <span class="definition_thmtitle">Conjugacy class of a subgroup</span>
    <div class="thm_header_extras">

    
    ✓
        </div>
    <div class="thm_header_hidden_extras">

    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#ConjClassOfSet">#</a>
    
    
    <button class="modal"><svg  class="icon icon-mindmap "><use xlink:href="symbol-defs.svg#icon-mindmap"></use></svg>
</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Uses</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroupsOf">Definition 6.5</a></li>
          
        </ul>
    
      </div>
    </div>

    
    
    <button class="modal lean">L∃∀N</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="https://AlexBrodbelt.github.io/ClassificationOfFiniteSubgroupsOfPGL/docs/find/#doc/ConjClassOfSet" class="lean_decl">ConjClassOfSet</a></li>
          
        </ul>
    
      </div>
    </div>

    
        </div>
  </div>
  <div class="definition_thmcontent">
  <p>    Let \(G\) be a subgroup of \(\operatorname{SL}_2(F)\) and let \(A \in \mathfrak {M}\) then define the conjugacy class of \(A\) to be </p>
<div class="displaymath" id="a0000000328">
  \[  \mathcal{C}(A) = \{  x A x^{-1} : x \in G \} .  \]
</div>

  </div>
</div>
<p> <small class="footnotesize"> <pre class="verbatim">
  def ConjClassOfSet {F : Type*} [Field F] (G : Subgroup SL(2,F))
    (A : MaximalAbelianSubgroupsOf G)  :=
    { conj x • A.val | x ∈ G }
</pre> </small> </p>
<div class="definition_thmwrapper theorem-style-definition" id="Subgroup.noncenter">
  <div class="definition_thmheading">
    <span class="definition_thmcaption">
    Definition
    </span>
    <span class="definition_thmlabel">6.43</span>
    <span class="definition_thmtitle">Noncenter of a subgroup</span>
    <div class="thm_header_extras">

    
    ✓
        </div>
    <div class="thm_header_hidden_extras">

    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#Subgroup.noncenter">#</a>
    
    
    
    <button class="modal lean">L∃∀N</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="https://AlexBrodbelt.github.io/ClassificationOfFiniteSubgroupsOfPGL/docs/find/#doc/Subgroup.noncenter" class="lean_decl">Subgroup.noncenter</a></li>
          
        </ul>
    
      </div>
    </div>

    
        </div>
  </div>
  <div class="definition_thmcontent">
  <p>   Let \(A\) be a subgroup of a group \(G\) let \(A^* = A \setminus Z(G)\) be the "noncenter" part of \(A\). </p>

  </div>
</div>
<p> <small class="footnotesize"> <pre class="verbatim">
def Subgroup.noncenter {G : Type*} [Group G] (H : Subgroup G) : Set G :=
  H.carrier \ center G
</pre> </small> </p>
<p>Now we define the noncenter version of <a href="Ch6_MaximalAbelianSubgroupClassEquation.html#ConjClassOfSet">6.42</a> </p>
<div class="definition_thmwrapper theorem-style-definition" id="noncenter_ConjClassOfSet">
  <div class="definition_thmheading">
    <span class="definition_thmcaption">
    Definition
    </span>
    <span class="definition_thmlabel">6.44</span>
    <span class="definition_thmtitle">Conjugacy class of a <i class="itshape">noncenter</i> subgroup</span>
    <div class="thm_header_extras">

    
    ✓
        </div>
    <div class="thm_header_hidden_extras">

    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#noncenter_ConjClassOfSet">#</a>
    
    
    <button class="modal"><svg  class="icon icon-mindmap "><use xlink:href="symbol-defs.svg#icon-mindmap"></use></svg>
</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Uses</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroupsOf">Definition 6.5</a></li>
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#Subgroup.noncenter">Definition 6.43</a></li>
          
        </ul>
    
      </div>
    </div>

    
    
    <button class="modal lean">L∃∀N</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="https://AlexBrodbelt.github.io/ClassificationOfFiniteSubgroupsOfPGL/docs/find/#doc/noncenter_ConjClassOfSet" class="lean_decl">noncenter_ConjClassOfSet</a></li>
          
        </ul>
    
      </div>
    </div>

    
        </div>
  </div>
  <div class="definition_thmcontent">
  <p>    Let \(G\) be a subgroup of \(\operatorname{SL}_2(F)\) and let \(A^* \in \mathfrak {M}^*\) then define the conjugacy class of \(A^*\) to be </p>
<div class="displaymath" id="a0000000329">
  \[  \mathcal{C}(A^*) = \left\{ x A^* x^{-1} \;  | \;  x \in G \right\}   \]
</div>

  </div>
</div>
<p> <small class="footnotesize"> <pre class="verbatim">
def noncenter_ConjClassOfSet {F : Type*} [Field F] (G : Subgroup SL(2,F))
  (A : noncenter_MaximalAbelianSubgroupsOf G)  :=
  { conj x • A.val | x ∈ G }
</pre> </small> </p>
<div class="definition_thmwrapper theorem-style-definition" id="noncenter_MaximalAbelianSubgroupsOf">
  <div class="definition_thmheading">
    <span class="definition_thmcaption">
    Definition
    </span>
    <span class="definition_thmlabel">6.45</span>
    <span class="definition_thmtitle">Noncenter Maximal Abelian Subgroups of \(G\)</span>
    <div class="thm_header_extras">

    
    ✓
        </div>
    <div class="thm_header_hidden_extras">

    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#noncenter_MaximalAbelianSubgroupsOf">#</a>
    
    
    <button class="modal"><svg  class="icon icon-mindmap "><use xlink:href="symbol-defs.svg#icon-mindmap"></use></svg>
</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Uses</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroupsOf">Definition 6.5</a></li>
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#Subgroup.noncenter">Definition 6.43</a></li>
          
        </ul>
    
      </div>
    </div>

    
    
    <button class="modal lean">L∃∀N</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="https://AlexBrodbelt.github.io/ClassificationOfFiniteSubgroupsOfPGL/docs/find/#doc/noncenter_MaximalAbelianSubgroupsOf" class="lean_decl">noncenter_MaximalAbelianSubgroupsOf</a></li>
          
        </ul>
    
      </div>
    </div>

    
        </div>
  </div>
  <div class="definition_thmcontent">
  <p>    Let \(\mathfrak {M}^*\) be the set of all \(A^*\) where \(A \in \mathfrak {M}\). </p>

  </div>
</div>
<p> <small class="footnotesize"> <pre class="verbatim">
def noncenter_MaximalAbelianSubgroupsOf {F : Type*} [Field F] (G : Subgroup SL(2,F)) :=
  { noncenter (K : Subgroup SL(2,F)) | K ∈ MaximalAbelianSubgroupsOf G }
</pre> </small> </p>
<div class="definition_thmwrapper theorem-style-definition" id="C">
  <div class="definition_thmheading">
    <span class="definition_thmcaption">
    Definition
    </span>
    <span class="definition_thmlabel">6.46</span>
    <div class="thm_header_extras">

    
    ✓
        </div>
    <div class="thm_header_hidden_extras">

    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#C">#</a>
    
    
    
    <button class="modal lean">L∃∀N</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="https://AlexBrodbelt.github.io/ClassificationOfFiniteSubgroupsOfPGL/docs/find/#doc/C" class="lean_decl">C</a></li>
          
        </ul>
    
      </div>
    </div>

    
        </div>
  </div>
  <div class="definition_thmcontent">
  <p>  Let \(A \in \mathfrak {M}\) and define the union of the conjugacy classes of \(A\) to </p>
<div class="displaymath" id="a0000000330">
  \begin{align*}  C(A) = \bigcup _{x \in G} x A x^{-1} \end{align*}
</div>

  </div>
</div>
<p>Similarly, we define the analogous for the noncenter part of a maximal abelian subgroup: </p>
<div class="definition_thmwrapper theorem-style-definition" id="noncenter_C">
  <div class="definition_thmheading">
    <span class="definition_thmcaption">
    Definition
    </span>
    <span class="definition_thmlabel">6.47</span>
    <span class="definition_thmtitle">Cover of conjugacy class of a noncenter part of a subgroup</span>
    <div class="thm_header_extras">

    
    ✓
        </div>
    <div class="thm_header_hidden_extras">

    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#noncenter_C">#</a>
    
    
    
    <button class="modal lean">L∃∀N</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="https://AlexBrodbelt.github.io/ClassificationOfFiniteSubgroupsOfPGL/docs/find/#doc/noncenter_C" class="lean_decl">noncenter_C</a></li>
          
        </ul>
    
      </div>
    </div>

    
        </div>
  </div>
  <div class="definition_thmcontent">
  <p>   Let \(A^* \in \mathfrak {M}^*\) then denote union of the conjugacy class of \(A^*\) to be the map \(C : \mathfrak {M}^* \rightarrow \mathcal{P}(\operatorname{SL}_2(F))\) be defined by </p>
<div class="displaymath" id="a0000000331">
  \begin{align*}  A^* \mapsto \bigcup _{x \in G} x A^* x^{-1} = \bigcup _{B \in \mathcal{C}(A^*)} B. \end{align*}
</div>

  </div>
</div>
<p> <small class="footnotesize"> <pre class="verbatim">
  def noncenter_C {F : Type*} [Field F] (G : Subgroup SL(2,F)) [Finite G] :
    noncenter_MaximalAbelianSubgroupsOf G → Set SL(2,F) :=
      fun A =&gt; ⋃ x ∈ G, conj x • A.val
  </pre> </small> </p>
<p>Then we define the following maps as we will need to prove some properties about them, and eventually we will need to lift them to state and prove the maximal abelian class equation. </p>
<div class="definition_thmwrapper theorem-style-definition" id="card_noncenter">
  <div class="definition_thmheading">
    <span class="definition_thmcaption">
    Definition
    </span>
    <span class="definition_thmlabel">6.48</span>
    <div class="thm_header_extras">

    
    ✓
        </div>
    <div class="thm_header_hidden_extras">

    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#card_noncenter">#</a>
    
    
    
    <button class="modal lean">L∃∀N</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="https://AlexBrodbelt.github.io/ClassificationOfFiniteSubgroupsOfPGL/docs/find/#doc/card_noncenter" class="lean_decl">card_noncenter</a></li>
          
        </ul>
    
      </div>
    </div>

    
        </div>
  </div>
  <div class="definition_thmcontent">
  <p>  Let \(A^* \in \mathfrak {M}^*\) then denote the cardinality the noncenter by the map \(| \;  \cdot \;  | : \mathfrak {M}^* \rightarrow \mathbb {N}\) which is defined by \(A^* \mapsto |A^*|\). </p>

  </div>
</div>
<p> <small class="footnotesize"> <pre class="verbatim">
noncomputable def card_noncenter {F : Type*} [Field F]
  (G : Subgroup SL(2,F)) [Finite G] : noncenter_MaximalAbelianSubgroupsOf G → ℕ :=
  fun A =&gt; Nat.card A.val
</pre> </small> </p>
<div class="definition_thmwrapper theorem-style-definition" id="card_noncenter_ConjClassOfSet">
  <div class="definition_thmheading">
    <span class="definition_thmcaption">
    Definition
    </span>
    <span class="definition_thmlabel">6.49</span>
    <div class="thm_header_extras">

    
    ✓
        </div>
    <div class="thm_header_hidden_extras">

    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#card_noncenter_ConjClassOfSet">#</a>
    
    
    
    <button class="modal lean">L∃∀N</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="https://AlexBrodbelt.github.io/ClassificationOfFiniteSubgroupsOfPGL/docs/find/#doc/card_noncenter_ConjClassOfSet" class="lean_decl">card_noncenter_ConjClassOfSet</a></li>
          
        </ul>
    
      </div>
    </div>

    
        </div>
  </div>
  <div class="definition_thmcontent">
  <p>  Let \(A^* \in \mathfrak {M}^*\) then denote the cardinality of the conjugacy class of \(A^*\) by the map \(\varphi _{\mathcal{C}^*} : \mathfrak {M}^* \rightarrow \mathbb {N}\) which is defined by \(A^* \mapsto |\mathcal{C}(A^*)|\). </p>

  </div>
</div>
<p> <small class="footnotesize"> <pre class="verbatim">
noncomputable def card_noncenter_ConjClassOfSet {F : Type*} [Field F]
  (G : Subgroup SL(2,F)) : noncenter_MaximalAbelianSubgroupsOf G → ℕ :=
  fun A =&gt; Nat.card (noncenter_ConjClassOfSet G A)
</pre> </small> </p>
<p>In other words, \(C(A)\) denotes the set of elements of \(G\) which belong to some element of \(\mathcal{C}(A)\). It’s evident that \(C(A^*) = C(A) \setminus Z\) and that there is a \(C(A)\) corresponding to each \(\mathcal{C}(A)\). Clearly we have the relation, </p>
<div class="lemma_thmwrapper theorem-style-plain" id="card_noncenter_C_eq_noncenter_MaximalAbelianSubgroup_mul_noncenter_ConjClassOfSet">
  <div class="lemma_thmheading">
    <span class="lemma_thmcaption">
    Lemma
    </span>
    <span class="lemma_thmlabel">6.50</span>
    <div class="thm_header_extras">

    
    ✓
        </div>
    <div class="thm_header_hidden_extras">

    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#card_noncenter_C_eq_noncenter_MaximalAbelianSubgroup_mul_noncenter_ConjClassOfSet">#</a>
    
    
    <button class="modal"><svg  class="icon icon-mindmap "><use xlink:href="symbol-defs.svg#icon-mindmap"></use></svg>
</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Uses</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#noncenter_MaximalAbelianSubgroupsOf">Definition 6.45</a></li>
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#noncenter_C">Definition 6.47</a></li>
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#card_noncenter_ConjClassOfSet">Definition 6.49</a></li>
          
        </ul>
    
      </div>
    </div>

    
    
    <button class="modal lean">L∃∀N</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="https://AlexBrodbelt.github.io/ClassificationOfFiniteSubgroupsOfPGL/docs/find/#doc/card_noncenter_C_eq_noncenter_MaximalAbelianSubgroup_mul_noncenter_ConjClassOfSet" class="lean_decl">card_noncenter_C_eq_noncenter_MaximalAbelianSubgroup_mul_noncenter_ConjClassOfSet</a></li>
          
        </ul>
    
      </div>
    </div>

    
        </div>
  </div>
  <div class="lemma_thmcontent">
  <p>   For all \(A^* \in \mathfrak {M}^*\), noncenter maximal abelian subgroups we have that </p>
<div class="displaymath" id="a0000000332">
  \begin{align}  |C(A^*)| = |A^*||\mathcal{C}(A^*)|. \end{align}
</div>

  </div>
</div>
<p><small class="footnotesize"> <pre class="verbatim">
lemma card_noncenter_C_eq_noncenter_MaximalAbelianSubgroup_mul_noncenter_ConjClassOfSet
  {F : Type*} [Field F] (G : Subgroup SL(2,F)) [Finite G]
  (A : noncenter_MaximalAbelianSubgroupsOf G) :
  Nat.card (noncenter_C G A) =
    Nat.card A * card_noncenter_ConjClassOfSet G A  := sorry
</pre> </small> </p>
<p>Here the argument from Christopher Butler’s exposition has been modified, it turns out to be significantly more idiomatic to Lean to first define the following equivalence relation and its corresponding quotient to eventually set up the maximal abelian class equation. </p>
<div class="lemma_thmwrapper theorem-style-plain" id="lift_noncenter_MaximalAbelianSubgroupsOf">
  <div class="lemma_thmheading">
    <span class="lemma_thmcaption">
    Lemma
    </span>
    <span class="lemma_thmlabel">6.51</span>
    <span class="lemma_thmtitle">Equivalence relation on \(\mathfrak {M}^*\)</span>
    <div class="thm_header_extras">

    
    ✓
        </div>
    <div class="thm_header_hidden_extras">

    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#lift_noncenter_MaximalAbelianSubgroupsOf">#</a>
    
    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#a0000000333"><svg  class="icon icon-cogs "><use xlink:href="symbol-defs.svg#icon-cogs"></use></svg>
</a>
    
    
    <button class="modal"><svg  class="icon icon-mindmap "><use xlink:href="symbol-defs.svg#icon-mindmap"></use></svg>
</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Uses</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroupsOf">Definition 6.5</a></li>
          
        </ul>
    
      </div>
    </div>

    
    
    <button class="modal lean">L∃∀N</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="https://AlexBrodbelt.github.io/ClassificationOfFiniteSubgroupsOfPGL/docs/find/#doc/lift_noncenter_MaximalAbelianSubgroupsOf" class="lean_decl">lift_noncenter_MaximalAbelianSubgroupsOf</a></li>
          
        </ul>
    
      </div>
    </div>

    
        </div>
  </div>
  <div class="lemma_thmcontent">
  <p>    Let \(G\) be a finite subgroup of \(\operatorname{SL}_2(F)\), then the relation \(\sim \) on the set of noncenter part of maximal abelian subgroups of \(G\), \(\mathfrak {M}^*\) defined by </p>
<div class="displaymath" id="a0000000334">
  \[  A \sim B \text{ if and only if } \exists x \in G \text{ such that } x A x^{-1} = B  \]
</div>
<p> is in fact an equivalence relation. </p>

  </div>
</div>
<div class="proof_wrapper" id="a0000000333">
  <div class="proof_heading">
    <span class="proof_caption">
    Proof
    </span>
    <span class="expand-proof">▶</span>
  </div>
  <div class="proof_content">
  <p>We show the relation \(\sim \) defined above is in fact an equivalence relation on \(\mathfrak {M}^*\): </p>
<ul class="itemize">
  <li><p>\(\sim \) is reflexive: </p>
<p>For any \(x \in A\) as conjugation by an element in the subgroup defines an automorphism and so \(A = x A x^{-1}\) as this automorphism fixes the subgroup. </p>
<p>Therefore, \(A \sim A\) and \(\sim \) is thus reflexive. </p>
</li>
  <li><p>\(\sim \) is symmetric: </p>
<p>If \(A \sim B\), then \(\exists \;  x \in G\) such that, </p>
<div class="displaymath" id="a0000000335">
  \begin{align*}  A = xBx^{-1} \iff x^{-1}Ax = B \iff B = yAy^{-1} \quad \text{for} \;  y = x^{-1} \in G. \end{align*}
</div>
<p>Thus \(B \sim A\) and \(\sim \) is symmetric.<br /></p>
</li>
  <li><p>\(\sim \) is transitive: </p>
<p>If \(A \sim B\) and \(B \sim C\), then \(\exists \;  x, y \in G\) such that, </p>
<div class="displaymath" id="a0000000336">
  \begin{align*}  A = xBx^{-1} \;  \text{and} \;  B = yCy^{-1} \Rightarrow A = xyCy^{-1}x^{-1} = (xy)C(xy)^{-1}. \end{align*}
</div>
<p> Thus \(A \sim C\) (since \(xy \in G\)), which shows that \(\sim \) is transitive. <br /></p>
</li>
</ul>
<p> Therefore, we have shown that \(\sim \) relation is in fact an equivalence relation on \(\mathfrak {M}\) </p>

  </div>
</div>
<p> <small class="footnotesize"> <pre class="verbatim">
instance lift_noncenter_MaximalAbelianSubgroupsOf {F : Type*} [Field F] (G : Subgroup SL(2,F)) :
  Setoid (noncenter_MaximalAbelianSubgroupsOf G) where
  r A B := ∃ x ∈ G, conj x • A.val = B.val
  iseqv := {
    refl A := ⟨1, Subgroup.one_mem G, by simp⟩
    symm := by
      rintro A B ⟨x, x_in_G, hx⟩
      use x⁻¹
      simp at hx ⊢
      rw [inv_smul_eq_iff]
      exact ⟨x_in_G, hx.symm⟩
    trans := by
      rintro A B C ⟨x, x_in_G,  hx⟩ ⟨y, y_in_G, hy⟩
      use y * x
      rw [← hy, ← hx, smul_smul, MonoidHom.map_mul]
      exact ⟨Subgroup.mul_mem G y_in_G x_in_G, rfl⟩
  }
</pre> </small> </p>
<div class="remark_thmwrapper theorem-style-remark" id="a0000000337">
  <div class="remark_thmheading">
    <span class="remark_thmcaption">
    Remark
    </span>
    <span class="remark_thmlabel">6.52</span>
    <span class="remark_thmtitle">Setoid typeclass in Lean</span>
    <div class="thm_header_extras">

        </div>
    <div class="thm_header_hidden_extras">

    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#a0000000337">#</a>
    
    
    
        </div>
  </div>
  <div class="remark_thmcontent">
  <p> A setoid is a type with a distinguished equivalence relation, that is to say, if one wants to attach the <span class="ttfamily">Setoid</span> typeclass to a type, and so say define the corresponding <span class="ttfamily">Quotient</span> type which allows one to clump together objects which are equivalent, one has to: </p>
<ol class="enumerate">
  <li><p>Define the binary relation <span class="ttfamily">r</span>. </p>
</li>
  <li><p>Prove the binary relation is an equivalence relation, that is a provide a proof term for the field <span class="ttfamily">iseqv</span> which in itself requires proof terms for the fields corresponding to reflexivity, symmetry and transitivity; <span class="ttfamily">refl</span>, <span class="ttfamily">symm</span> and <span class="ttfamily">trans</span>. </p>
</li>
</ol>

  </div>
</div>
<p>Now that we have set up the equivalence relation on maximal abelian subgroups we proceed to lift particular functions that will be of interest to set up the maximal abelian class equation and other suitable results. </p>
<div class="lemma_thmwrapper theorem-style-plain" id="card_noncenter_eq_of_related">
  <div class="lemma_thmheading">
    <span class="lemma_thmcaption">
    Lemma
    </span>
    <span class="lemma_thmlabel">6.53</span>
    <div class="thm_header_extras">

    
    ✓
        </div>
    <div class="thm_header_hidden_extras">

    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#card_noncenter_eq_of_related">#</a>
    
    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#a0000000338"><svg  class="icon icon-cogs "><use xlink:href="symbol-defs.svg#icon-cogs"></use></svg>
</a>
    
    
    <button class="modal"><svg  class="icon icon-mindmap "><use xlink:href="symbol-defs.svg#icon-mindmap"></use></svg>
</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Uses</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#Subgroup.noncenter">Definition 6.43</a></li>
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#lift_noncenter_MaximalAbelianSubgroupsOf">Lemma 6.51</a></li>
          
        </ul>
    
      </div>
    </div>

    
    
    <button class="modal lean">L∃∀N</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="https://AlexBrodbelt.github.io/ClassificationOfFiniteSubgroupsOfPGL/docs/find/#doc/card_noncenter_eq_of_related" class="lean_decl">card_noncenter_eq_of_related</a></li>
          
        </ul>
    
      </div>
    </div>

    
        </div>
  </div>
  <div class="lemma_thmcontent">
  <p>   Let \(A^*, B^* \in \mathfrak {M}\) and suppose \(A^* \sim B^*\) then \(|A^*| = |B^*|\) </p>

  </div>
</div>
<div class="proof_wrapper" id="a0000000338">
  <div class="proof_heading">
    <span class="proof_caption">
    Proof
    </span>
    <span class="expand-proof">▶</span>
  </div>
  <div class="proof_content">
  <p>Let \(G\) be a finite subgroup of \(\operatorname{SL}_2(F)\), recall that if \(A^* \sim B^*\) then there exists a \(x \in G\) such that \(x A x^{-1} = B^*\). Since conjugation by an element \(x \in G\) of group defines an automorphism, \(\phi _x : \operatorname{SL}_2(F) \rightarrow \operatorname{SL}_2(F)\). In particular, an automorphism is injective; therefore the cardinality of the image of a finite set </p>
<div class="displaymath" id="a0000000339">
  \[  |A^*| = |\phi _x(A^*)| = |B^*|  \]
</div>

  </div>
</div>
<p> <small class="footnotesize"> <pre class="verbatim">
lemma card_noncenter_eq_of_related {F : Type*} [Field F] (G : Subgroup SL(2,F))
  [hG : Finite G] :
  ∀ (A B : (noncenter_MaximalAbelianSubgroupsOf G)),
    A ≈ B → card_noncenter G A =
      card_noncenter G B := by
  rintro ⟨A_star, A, A_in_MaxAbSub, hA⟩ ⟨B_star, B, B_in_MaxAbSub, hB⟩ ⟨x, x_in_G, rfl⟩
  simp only [card_noncenter, center_toSubmonoid,
    Submonoid.center_toSubsemigroup, pointwise_smul_toSubmonoid, Set.Nat.card_coe_set_eq]
  let center_finite : Finite (center SL(2, F)) := by
    rw [center_SL2_eq_Z]
    infer_instance
  simp
</pre> </small> </p>
<p>We are now ready to lift the function which computes the cardinality of a noncenter maximal abelian subgroup </p>
<div class="definition_thmwrapper theorem-style-definition" id="lift_card_noncenter">
  <div class="definition_thmheading">
    <span class="definition_thmcaption">
    Definition
    </span>
    <span class="definition_thmlabel">6.54</span>
    <div class="thm_header_extras">

    
    ✓
        </div>
    <div class="thm_header_hidden_extras">

    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#lift_card_noncenter">#</a>
    
    
    <button class="modal"><svg  class="icon icon-mindmap "><use xlink:href="symbol-defs.svg#icon-mindmap"></use></svg>
</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Uses</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#lift_noncenter_MaximalAbelianSubgroupsOf">Lemma 6.51</a></li>
          
        </ul>
    
      </div>
    </div>

    
    
    <button class="modal lean">L∃∀N</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="https://AlexBrodbelt.github.io/ClassificationOfFiniteSubgroupsOfPGL/docs/find/#doc/lift_card_noncenter" class="lean_decl">lift_card_noncenter</a></li>
          
        </ul>
    
      </div>
    </div>

    
        </div>
  </div>
  <div class="definition_thmcontent">
  <p>   Given for all \(A^* \sim B^* \in \mathfrak {M}^*\) we have that \(|A^*| = |B^*|\) by <a href="Ch6_MaximalAbelianSubgroupClassEquation.html#card_noncenter_eq_of_related">6.53</a> we can define the lift \(|\;  \cdot \; | : \mathfrak {M}^* / \sim \;  \rightarrow \mathbb {N}\) which is given by \([A^*] \mapsto |A^*|\). </p>

  </div>
</div>
<p> <small class="footnotesize"> <pre class="verbatim">
noncomputable def lift_card_noncenter {F : Type*} [Field F] (G : Subgroup SL(2,F))
  [Finite G] := @Quotient.lift _ _ (s := lift_noncenter_MaximalAbelianSubgroupsOf G)
    (f := card_noncenter G)
    (card_noncenter_eq_of_related G)
</pre> </small> </p>
<p>Similarly, we now proceed to show that the map which sends a noncenter maximal abelian subgroup to the cover generated by its conjugacy class is respected by the equivalence relation \(\sim \) on \(\mathfrak {M}^*\) </p>
<div class="lemma_thmwrapper theorem-style-plain" id="noncenter_C_eq_of_related">
  <div class="lemma_thmheading">
    <span class="lemma_thmcaption">
    Lemma
    </span>
    <span class="lemma_thmlabel">6.55</span>
    <span class="lemma_thmtitle">Equivalent noncenter subgroups of \(\mathfrak {M}^*\) have the equal union of their conjugacy class</span>
    <div class="thm_header_extras">

        </div>
    <div class="thm_header_hidden_extras">

    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#noncenter_C_eq_of_related">#</a>
    
    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#a0000000340"><svg  class="icon icon-cogs "><use xlink:href="symbol-defs.svg#icon-cogs"></use></svg>
</a>
    
    
    <button class="modal"><svg  class="icon icon-mindmap "><use xlink:href="symbol-defs.svg#icon-mindmap"></use></svg>
</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Uses</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#noncenter_C">Definition 6.47</a></li>
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#noncenter_MaximalAbelianSubgroupsOf">Definition 6.45</a></li>
          
        </ul>
    
      </div>
    </div>

    
    
    <button class="modal lean">L∃∀N</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="https://AlexBrodbelt.github.io/ClassificationOfFiniteSubgroupsOfPGL/docs/find/#doc/noncenter_C_eq_of_related" class="lean_decl">noncenter_C_eq_of_related</a></li>
          
        </ul>
    
      </div>
    </div>

    
        </div>
  </div>
  <div class="lemma_thmcontent">
  <p>    Let \(G\) be a subgroup of \(\operatorname{SL}_2(F)\) and let \(A^* , B^* \in \mathfrak {M}*\) be a noncenter maximal abelian subgroups of \(G\) where \(A^* \sim B^*\) then </p>
<div class="displaymath" id="a0000000341">
  \[  \bigcup _{x \in G} x A^* x^{-1} = \bigcup _{x \in G} x B^* x^{-1}  \]
</div>

  </div>
</div>
<div class="proof_wrapper" id="a0000000340">
  <div class="proof_heading">
    <span class="proof_caption">
    Proof
    </span>
    <span class="expand-proof">▶</span>
  </div>
  <div class="proof_content">
  <p>By assumption \(A^* \sim B^*\) and thus there exists an \(y \in G\) such that \(A^* = yBy^{-1}\), by reindexing the union we get the desired equality </p>
<div class="displaymath" id="a0000000342">
  \[  \bigcup _{x \in G} x A^* x^{-1} = \bigcup _{xy \in G} (xy) A^* (xy)^{-1} = \bigcup _{x \in G} x B^* x^{-1}  \]
</div>

  </div>
</div>
<p> <small class="footnotesize"> <pre class="verbatim">
lemma noncenter_C_eq_of_related {F : Type*} [Field F] (G : Subgroup SL(2,F)) [Finite G] :
  (∀ (A B : (noncenter_MaximalAbelianSubgroupsOf G)),
   A ≈ B → noncenter_C G A = noncenter_C G B) := by
   intro A B ArB
   obtain ⟨r, r_in_G, hr⟩ := ArB
   simp [noncenter_C]
   ext y
   constructor
   &lt;;&gt; intro hy
   &lt;;&gt; simp only [Set.mem_iUnion, exists_prop] at hy ⊢
   &lt;;&gt; obtain ⟨g, g_in_G, y_in_conj⟩ := hy
   · simp only [← hr]
     use g * r⁻¹
     split_ands
     · exact Subgroup.mul_mem G g_in_G (inv_mem r_in_G)
     · simp only [_root_.map_mul, map_inv, ← MulAction.mul_smul, inv_mul_cancel_right]
       exact y_in_conj
   · simp only [←  hr] at y_in_conj
     use g * r
     split_ands
     · exact Subgroup.mul_mem G g_in_G r_in_G
     rw [_root_.map_mul, MulAction.mul_smul]
     exact y_in_conj
</pre> </small> </p>
<div class="definition_thmwrapper theorem-style-definition" id="lift_noncenter_C">
  <div class="definition_thmheading">
    <span class="definition_thmcaption">
    Definition
    </span>
    <span class="definition_thmlabel">6.56</span>
    <span class="definition_thmtitle">Lift of the union of the conjugacy class of noncenter of a subgroup</span>
    <div class="thm_header_extras">

    
    ✓
        </div>
    <div class="thm_header_hidden_extras">

    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#lift_noncenter_C">#</a>
    
    
    <button class="modal"><svg  class="icon icon-mindmap "><use xlink:href="symbol-defs.svg#icon-mindmap"></use></svg>
</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Uses</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#noncenter_C">Definition 6.47</a></li>
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#noncenter_C_eq_of_related">Lemma 6.55</a></li>
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#noncenter_MaximalAbelianSubgroupsOf">Definition 6.45</a></li>
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#lift_noncenter_MaximalAbelianSubgroupsOf">Lemma 6.51</a></li>
          
        </ul>
    
      </div>
    </div>

    
    
    <button class="modal lean">L∃∀N</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="https://AlexBrodbelt.github.io/ClassificationOfFiniteSubgroupsOfPGL/docs/find/#doc/lift_noncenter_C" class="lean_decl">lift_noncenter_C</a></li>
          
        </ul>
    
      </div>
    </div>

    
        </div>
  </div>
  <div class="definition_thmcontent">
  <p>    Given for all \(A^* \sim B^* \in \mathfrak {M}^*\) we have that \(C(A^*) = C(B^*)\) by <a href="Ch6_MaximalAbelianSubgroupClassEquation.html#noncenter_C_eq_of_related">6.55</a> we can define the lift of \(C : \mathfrak {M}^* \rightarrow \mathcal{P}(\operatorname{SL}_2(F))\) to be \(\tilde{C}([A^*]) = \bigcup _{x \in G} x A^* x^{-1}\) where this map is well-defined for any choice of a representative of \([A^*]\). </p>

  </div>
</div>
<p> <small class="footnotesize"> <pre class="verbatim">
def lift_noncenter_C {F : Type*} [Field F] (G : Subgroup SL(2,F)) [Finite G] :=
  @Quotient.lift _ _ (s := lift_noncenter_MaximalAbelianSubgroupsOf G)
    (f := noncenter_C G) (noncenter_C_eq_of_related G)
</pre> </small> </p>
<div class="theorem_thmwrapper theorem-style-plain" id="union_lift_noncenter_C_eq_G_diff_center">
  <div class="theorem_thmheading">
    <span class="theorem_thmcaption">
    Theorem
    </span>
    <span class="theorem_thmlabel">6.57</span>
    <span class="theorem_thmtitle">The union of conjugacy classes of the set representatives of \(\mathfrak {M}^* / \sim \) cover \(G \setminus Z(\operatorname{SL}_2(F))\)</span>
    <div class="thm_header_extras">

        </div>
    <div class="thm_header_hidden_extras">

    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#union_lift_noncenter_C_eq_G_diff_center">#</a>
    
    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#a0000000343"><svg  class="icon icon-cogs "><use xlink:href="symbol-defs.svg#icon-cogs"></use></svg>
</a>
    
    
    <button class="modal"><svg  class="icon icon-mindmap "><use xlink:href="symbol-defs.svg#icon-mindmap"></use></svg>
</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Uses</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#lift_noncenter_MaximalAbelianSubgroupsOf">Lemma 6.51</a></li>
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#lift_noncenter_C">Definition 6.56</a></li>
          
        </ul>
    
      </div>
    </div>

    
    
    <button class="modal lean">L∃∀N</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="https://AlexBrodbelt.github.io/ClassificationOfFiniteSubgroupsOfPGL/docs/find/#doc/union_lift_noncenter_C_eq_G_diff_center" class="lean_decl">union_lift_noncenter_C_eq_G_diff_center</a></li>
          
        </ul>
    
      </div>
    </div>

    
        </div>
  </div>
  <div class="theorem_thmcontent">
  <p>    Let \(G\) be a finite subgroup of \(\operatorname{SL}_2(F)\) provided \(\mathfrak {M}^* / \sim \) is a finite then we have the set equality </p>
<div class="displaymath" id="a0000000344">
  \[  G \setminus Z(\operatorname{SL}_2(F)) = \bigcup _{[A^*] \in \mathfrak {M}^* / \sim } C([A^*])  \]
</div>

  </div>
</div>
<div class="proof_wrapper" id="a0000000343">
  <div class="proof_heading">
    <span class="proof_caption">
    Proof
    </span>
    <span class="expand-proof">▶</span>
  </div>
  <div class="proof_content">
  <p>Since \(\bigcup _{A^* \in \mathfrak {M}} A^*\) cover \(G \setminus Z\), since \(C_{\operatorname{SL}_2(F)}(x) \cap G\) is a maximal abelian subgroup for all \(x \in G \setminus Z\) we have that the cover generated by the quotient also generates \(G \setminus Z\). </p>

  </div>
</div>
<p> <small class="footnotesize"> <pre class="verbatim">
lemma union_lift_noncenter_C_eq_G_diff_center {F : Type*} [Field F]
  (G : Subgroup SL(2,F)) [hG : Finite G] :
  G.carrier \ center SL(2,F) =
    ⋃ A_star : Quotient (lift_noncenter_MaximalAbelianSubgroupsOf G),
      lift_noncenter_C G A_star := by
    sorry
</pre> </small> </p>
<div class="theorem_thmwrapper theorem-style-plain" id="disjoint_of_ne_lift_noncenter_MaximalAbelianSubgroupsOf">
  <div class="theorem_thmheading">
    <span class="theorem_thmcaption">
    Theorem
    </span>
    <span class="theorem_thmlabel">6.58</span>
    <span class="theorem_thmtitle">Distinct elements of \(\mathfrak {M}^* / \sim \) are mapped to disjoint sets through \(\tilde{C}\)</span>
    <div class="thm_header_extras">

    
    ✓
        </div>
    <div class="thm_header_hidden_extras">

    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#disjoint_of_ne_lift_noncenter_MaximalAbelianSubgroupsOf">#</a>
    
    
    <button class="modal"><svg  class="icon icon-mindmap "><use xlink:href="symbol-defs.svg#icon-mindmap"></use></svg>
</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Uses</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#lift_noncenter_MaximalAbelianSubgroupsOf">Lemma 6.51</a></li>
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#lift_noncenter_C">Definition 6.56</a></li>
          
        </ul>
    
      </div>
    </div>

    
    
    <button class="modal lean">L∃∀N</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="https://AlexBrodbelt.github.io/ClassificationOfFiniteSubgroupsOfPGL/docs/find/#doc/disjoint_of_ne_lift_noncenter_MaximalAbelianSubgroupsOf" class="lean_decl">disjoint_of_ne_lift_noncenter_MaximalAbelianSubgroupsOf</a></li>
          
        </ul>
    
      </div>
    </div>

    
        </div>
  </div>
  <div class="theorem_thmcontent">
  <p>    Let \([A^*], [B^*] \in \mathfrak {M}^* / \sim \) then </p>
<div class="displaymath" id="a0000000345">
  \[  \tilde{C}([A^*]) = \tilde{C}([B^*]) \iff [A^*] = [B^*]  \]
</div>
<p> Or equivalently, </p>
<div class="displaymath" id="a0000000346">
  \[  C(A^*) \cap C(B^*) = \varnothing , \qquad \forall \;  A^* \not\sim B^*  \]
</div>

  </div>
</div>
<p> <small class="footnotesize"> <pre class="verbatim">
lemma disjoint_of_ne_lift_noncenter_MaximalAbelianSubgroupsOf {F : Type*} [Field F]
  (G : Subgroup SL(2,F)) [hG : Finite G]
  (A B : Quotient (lift_noncenter_MaximalAbelianSubgroupsOf G)) (A_ne_B : A ≠ B) :
  Disjoint (lift_noncenter_C G A) (lift_noncenter_C G B) := by sorry
</pre> </small> </p>
<div class="theorem_thmwrapper theorem-style-plain" id="card_noncenter_ConjClassOfSet_eq_card_ConjClassOfSet">
  <div class="theorem_thmheading">
    <span class="theorem_thmcaption">
    Theorem
    </span>
    <span class="theorem_thmlabel">6.59</span>
    <div class="thm_header_extras">

        </div>
    <div class="thm_header_hidden_extras">

    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#card_noncenter_ConjClassOfSet_eq_card_ConjClassOfSet">#</a>
    
    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#a0000000347"><svg  class="icon icon-cogs "><use xlink:href="symbol-defs.svg#icon-cogs"></use></svg>
</a>
    
    
    <button class="modal"><svg  class="icon icon-mindmap "><use xlink:href="symbol-defs.svg#icon-mindmap"></use></svg>
</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Uses</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroupsOf">Definition 6.5</a></li>
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#noncenter_MaximalAbelianSubgroupsOf">Definition 6.45</a></li>
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#noncenter_ConjClassOfSet">Definition 6.44</a></li>
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#ConjClassOfSet">Definition 6.42</a></li>
          
        </ul>
    
      </div>
    </div>

    
    
    <button class="modal lean">L∃∀N</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="https://AlexBrodbelt.github.io/ClassificationOfFiniteSubgroupsOfPGL/docs/find/#doc/card_noncenter_ConjClassOfSet_eq_card_ConjClassOfSet" class="lean_decl">card_noncenter_ConjClassOfSet_eq_card_ConjClassOfSet</a></li>
          
        </ul>
    
      </div>
    </div>

    
        </div>
  </div>
  <div class="theorem_thmcontent">
  <p>   For all maximal abelian subgroups \(A \in \mathfrak {M}\) we have that </p>
<div class="displaymath" id="a0000000348">
  \[  |\mathcal{C}(A)| = |\mathcal{C}(A^*)|  \]
</div>

  </div>
</div>
<div class="proof_wrapper" id="a0000000347">
  <div class="proof_heading">
    <span class="proof_caption">
    Proof
    </span>
    <span class="expand-proof">▶</span>
  </div>
  <div class="proof_content">
  <p>Let \(B\) be a maximal abelian subgroup, let \(x A x^{-1} \in \mathcal{C}(B)\) and \(x A^* x^{-1} \in \mathcal{C}(B^*)\). Since \(x A x^{-1} \!  \setminus \!  Z = x A^* x^{-1}\), it is quite clear that, </p>
<div class="displaymath" id="a0000000349">
  \begin{align*}  x A x^{-1} \in \mathcal{C}(B) \iff x A^* x^{-1} \in \mathcal{C}(B^*). \end{align*}
</div>
<p> Thus \(|\mathcal{C}(B^*)| = |\mathcal{C}(B)|\) as desired. <br /><br /></p>

  </div>
</div>
<p> <small class="footnotesize"> <pre class="verbatim">
lemma card_noncenter_ConjClassOfSet_eq_card_ConjClassOfSet {F : Type*} [Field F] (G : Subgroup SL(2,F))
  (A : MaximalAbelianSubgroupsOf G) :
  Nat.card (ConjClassOfSet G A) =
    Nat.card (noncenter_ConjClassOfSet G (
      ⟨noncenter A, noncenter_mem_noncenter_MaximalAbelianSubgroupsOf G A⟩
    )) := by sorry
</pre> </small> </p>
<div class="theorem_thmwrapper theorem-style-plain" id="card_ConjClassOfSet_eq_index_normalizer">
  <div class="theorem_thmheading">
    <span class="theorem_thmcaption">
    Theorem
    </span>
    <span class="theorem_thmlabel">6.60</span>
    <div class="thm_header_extras">

        </div>
    <div class="thm_header_hidden_extras">

    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#card_ConjClassOfSet_eq_index_normalizer">#</a>
    
    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#a0000000350"><svg  class="icon icon-cogs "><use xlink:href="symbol-defs.svg#icon-cogs"></use></svg>
</a>
    
    
    <button class="modal"><svg  class="icon icon-mindmap "><use xlink:href="symbol-defs.svg#icon-mindmap"></use></svg>
</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Uses</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroupsOf">Definition 6.5</a></li>
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#ConjClassOfSet">Definition 6.42</a></li>
          
        </ul>
    
      </div>
    </div>

    
    
    <button class="modal lean">L∃∀N</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="https://AlexBrodbelt.github.io/ClassificationOfFiniteSubgroupsOfPGL/docs/find/#doc/card_ConjClassOfSet_eq_index_normalizer" class="lean_decl">card_ConjClassOfSet_eq_index_normalizer</a></li>
          
        </ul>
    
      </div>
    </div>

    
        </div>
  </div>
  <div class="theorem_thmcontent">
  
<p>Let \(G\) be a finite subgroup of \(\operatorname{SL}_2(F)\) and let \(A\) be a maximal abelian subgroup of \(G\), \(A \in \mathfrak {M}\) then \(|\mathcal{C}(A)| = [G : N_G(A)]\). </p>

  </div>
</div>
<div class="proof_wrapper" id="a0000000350">
  <div class="proof_heading">
    <span class="proof_caption">
    Proof
    </span>
    <span class="expand-proof">▶</span>
  </div>
  <div class="proof_content">
  <p>We define a map \(\phi \) by: </p>
<div class="displaymath" id="a0000000351">
  \begin{align*}  \phi : \mathcal{C}_i & \longrightarrow G / N_G(A), \\ \phi (xAx^{-1}) & = xN_G(A). \tag {$\forall \;  x \in G, \;  A \in \mathfrak {M}$} \end{align*}
</div>
<p>Clearly \(\phi \) is trivially surjective. We now show that it is both well-defined and injective. </p>
<div class="displaymath" id="a0000000352">
  \begin{align*}  xN_G(A) = yN_G(A) & \iff y^{-1}xN_G(A) = N_G(A) \\ & \iff y^{-1}x \in N_G(A) \\ & \iff (y^{-1}x)A(y^{-1}x)^{-1} = A \\ & \iff y^{-1}xAx^{-1}y = A \\ & \iff xAx^{-1} = yAy^{-1}. \end{align*}
</div>
<p>Hence \(\phi \) is well-defined and injective. This shows that \(\phi \) is a bijection proving that \(|\mathcal{C}_i| = [G:N_G(A)]\). This is a crucial result which shows that the number of maximal abelian subgroups conjugate to \(A\) is equal to the index of the normaliser of \(A\) in \(G\). <br /><br /></p>

  </div>
</div>
<p> <small class="footnotesize"> <pre class="verbatim">
lemma card_ConjClassOfSet_eq_index_normalizer {F : Type*} [Field F] (G : Subgroup SL(2,F))
  (A : MaximalAbelianSubgroupsOf G) :
  Nat.card (ConjClassOfSet G A) = index (normalizer (A.val.subgroupOf G)) := by sorry
</pre> </small> </p>
<div class="theorem_thmwrapper theorem-style-plain" id="card_noncenter_fin_subgroup_eq_sum_card_noncenter_mul_index_normalizer">
  <div class="theorem_thmheading">
    <span class="theorem_thmcaption">
    Theorem
    </span>
    <span class="theorem_thmlabel">6.61</span>
    <span class="theorem_thmtitle">The maximal subgroup class equation</span>
    <div class="thm_header_extras">

        </div>
    <div class="thm_header_hidden_extras">

    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#card_noncenter_fin_subgroup_eq_sum_card_noncenter_mul_index_normalizer">#</a>
    
    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#a0000000353"><svg  class="icon icon-cogs "><use xlink:href="symbol-defs.svg#icon-cogs"></use></svg>
</a>
    
    
    <button class="modal"><svg  class="icon icon-mindmap "><use xlink:href="symbol-defs.svg#icon-mindmap"></use></svg>
</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Uses</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#lift_noncenter_MaximalAbelianSubgroupsOf">Lemma 6.51</a></li>
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#lift_card_noncenter">Definition 6.54</a></li>
          
        </ul>
    
      </div>
    </div>

    
    
    <button class="modal lean">L∃∀N</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="https://AlexBrodbelt.github.io/ClassificationOfFiniteSubgroupsOfPGL/docs/find/#doc/card_noncenter_fin_subgroup_eq_sum_card_noncenter_mul_index_normalizer" class="lean_decl">card_noncenter_fin_subgroup_eq_sum_card_noncenter_mul_index_normalizer</a></li>
          
        </ul>
    
      </div>
    </div>

    
        </div>
  </div>
  <div class="theorem_thmcontent">
  
<p>Let \(G\) be a finite subgroup of \(\operatorname{SL}_2(F)\), define the equivalence relation on the maximal abelian subgroups of \(G\), \(\mathfrak {M}^*\) as above in <a href="Ch6_MaximalAbelianSubgroupClassEquation.html#lift_noncenter_MaximalAbelianSubgroupsOf">6.51</a> then \(|G \!  \setminus \!  Z| = \sum _{[A^*] \in \mathfrak {M}^* / \sim } |A^*| [\tilde{C}([A^*])].\) </p>

  </div>
</div>
<div class="proof_wrapper" id="a0000000353">
  <div class="proof_heading">
    <span class="proof_caption">
    Proof
    </span>
    <span class="expand-proof">▶</span>
  </div>
  <div class="proof_content">
  <p>This follows directly from parts (i), (ii) and (iii) and <a href="Ch6_MaximalAbelianSubgroupClassEquation.html#card_noncenter_C_eq_noncenter_MaximalAbelianSubgroup_mul_noncenter_ConjClassOfSet" class="eqref">6.50</a>. </p>
<div class="displaymath" id="a0000000354">
  \begin{align*}  G \!  \setminus \!  Z & = \bigcup \limits _{A^* \in S} C_i^*, \qquad \text{and} \qquad C_i^* \cap C_j^* = \varnothing , \qquad \forall \;  i \neq j, \\ |G \!  \setminus \!  Z| & = \sum _{A^* \in S} |C_i^*| = \sum _{A^* \in S} |A^*||\mathcal{C}_i^*| = \sum _{A^* \in S} |A^*||\mathcal{C}_i| \\ & = \sum _{A^* \in S} |A^*| [G:N_G(A)]. \end{align*}
</div>

  </div>
</div>
<p> <small class="footnotesize"> <pre class="verbatim">
theorem card_noncenter_fin_subgroup_eq_sum_card_noncenter_mul_index_normalizer {F : Type*} [Field F]
  (G : Subgroup SL(2,F)) [Finite G] (center_le_G : center SL(2,F) ≤ G) :
  Nat.card (G.carrier \ (center SL(2,F)).carrier : Set SL(2,F)) =
  ∑ lift_A : Quotient (lift_noncenter_MaximalAbelianSubgroupsOf G),
    lift_card_noncenter G lift_A * Nat.card (lift_noncenter_C G lift_A) := by sorry
</pre> </small> </p>
<p>This theorem proves that the non-central parts of the maximal abelian subgroups form a partition of the non-central part of \(G\). This will serve as a powerful tool in decomposing \(G\) and counting its elements. </p>
<h1 id="a0000000045">6.4 Constructing The Class Equation</h1>
<p>It is necessary to prove the following two short lemmas before we proceed further. </p>
<div class="lemma_thmwrapper theorem-style-plain" id="normalizer_noncentral_eq">
  <div class="lemma_thmheading">
    <span class="lemma_thmcaption">
    Lemma
    </span>
    <span class="lemma_thmlabel">6.62</span>
    <div class="thm_header_extras">

        </div>
    <div class="thm_header_hidden_extras">

    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#normalizer_noncentral_eq">#</a>
    
    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#a0000000355"><svg  class="icon icon-cogs "><use xlink:href="symbol-defs.svg#icon-cogs"></use></svg>
</a>
    
    
    
    <button class="modal lean">L∃∀N</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="https://AlexBrodbelt.github.io/ClassificationOfFiniteSubgroupsOfPGL/docs/find/#doc/normalizer_noncentral_eq" class="lean_decl">normalizer_noncentral_eq</a></li>
          
        </ul>
    
      </div>
    </div>

    
        </div>
  </div>
  <div class="lemma_thmcontent">
  <p>  The normalizers \(N_G(A) =N_G(A^*)\). </p>

  </div>
</div>
<div class="proof_wrapper" id="a0000000355">
  <div class="proof_heading">
    <span class="proof_caption">
    Proof
    </span>
    <span class="expand-proof">▶</span>
  </div>
  <div class="proof_content">
  <p>Let \(x \in N_G(A^*)\). Take an arbitary \(a \in A = A^* \cup Z\). If \(a \in A^*\), then since \(x \in N_G(A^*)\), we have \(xax^{-1} \in A^* \subset A\). If \(a \in Z\), then \(xzx^{-1} = zxx^{-1} = z \in A\). Therefore \(x\) is in the normaliser of \(A\) and \(N_G(A^*) \subset N_G(A)\). <br /><br />Conversely, take \(y \in N_G(A)\) and \(a \in A^*\). \(yay^{-1} \in A = A^* \cup Z\). If \(yay^{-1} \in Z\), then </p>
<div class="displaymath" id="a0000000356">
  \begin{align*}  yay^{-1} & = z, \tag {some $z \in Z$} \\ a & = y^{-1}zy = y^{-1}yz = z \not\in A^*. \end{align*}
</div>
<p> This contradicts the fact that \(a \in A^*\). Therefore \(yay^{-1} \in A^*\) and \(y \in N_G(A^*)\). Since \(y\) was chosen arbitrarily we get \(N_G(A) \subset N_G(A^*)\) and hence \(N_G(A) =N_G(A^*)\). </p>

  </div>
</div>
<p> <small class="footnotesize"> <pre class="verbatim">
lemma normalizer_noncentral_eq {F : Type*} [Field F] (A G : Subgroup SL(2,F)) [Finite G]
  (hA : A ∈ MaximalAbelianSubgroupsOf G) : normalizer (A.subgroupOf G) = setNormalizer (noncenter (A.subgroupOf G)) := by
  sorry
</pre> </small> </p>
<div class="lemma_thmwrapper theorem-style-plain" id="normalizer_Sylow_join_center_eq_normalizer_Sylow">
  <div class="lemma_thmheading">
    <span class="lemma_thmcaption">
    Lemma
    </span>
    <span class="lemma_thmlabel">6.63</span>
    <div class="thm_header_extras">

        </div>
    <div class="thm_header_hidden_extras">

    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#normalizer_Sylow_join_center_eq_normalizer_Sylow">#</a>
    
    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#a0000000357"><svg  class="icon icon-cogs "><use xlink:href="symbol-defs.svg#icon-cogs"></use></svg>
</a>
    
    
    <button class="modal"><svg  class="icon icon-mindmap "><use xlink:href="symbol-defs.svg#icon-mindmap"></use></svg>
</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Uses</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.IsCyclic_and_card_coprime_CharP_or_eq_Q_join_Z">Theorem 6.37</a></li>
          
          <li><a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.index_normalizer_le_two">Theorem 6.38</a></li>
          
        </ul>
    
      </div>
    </div>

    
    
    <button class="modal lean">L∃∀N</button>
        <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Lean declarations</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
        
        <ul class="uses">
          
          <li><a href="https://AlexBrodbelt.github.io/ClassificationOfFiniteSubgroupsOfPGL/docs/find/#doc/normalizer_Sylow_join_center_eq_normalizer_Sylow" class="lean_decl">normalizer_Sylow_join_center_eq_normalizer_Sylow</a></li>
          
        </ul>
    
      </div>
    </div>

    
        </div>
  </div>
  <div class="lemma_thmcontent">
  <p>   \(N_G(Q \times Z) = N_G(Q)\). </p>

  </div>
</div>
<div class="proof_wrapper" id="a0000000357">
  <div class="proof_heading">
    <span class="proof_caption">
    Proof
    </span>
    <span class="expand-proof">▶</span>
  </div>
  <div class="proof_content">
  
<p>If \(p = 2\) then \(Z = I_G\) and the result is trivial. Now assume \(p \neq 2\). Thus \(|Z| = 2\). Let \(x\) and \(q_1\) be arbitrarily chosen elements of \(N_G(Q)\) and \(Q\) respectively. </p>
<div class="displaymath" id="a0000000358">
  \begin{align*}  xq_1x^{-1} & = q_2, \tag {for some $q_2 \in Q$} \\ xq_1x^{-1}z_1 & = q_2z_1, \\ xq_1z_1x^{-1} & = q_2z_1 \in Q \times Z. \end{align*}
</div>
<p> Thus any element \(x\) which is in \(N_G(Q)\) is also in \(N_G(Q \times Z)\) so we have \(N_G(Q) \subset N_G(Q \times Z)\). <br /><br />Let \(q_1 z_1\) be an arbitrarily chosen element of \(Q \times Z\) such that \(q_1 \in Q\) and \(z_1 \in Z\). Now let \(y\) be an arbitrarily chosen element of \(N_G(Q \times Z)\). </p>
<div class="displaymath" id="a0000000359">
  \begin{align*}  y q_1 z_1 y^{-1} = q_2 z_2 \in Q \times Z. \qquad (\text{where $q_2 \in Q$ and $z_2 \in Z$}) \end{align*}
</div>
<p>Consider now the order of \(q_1z_1\) in \(G\). Since \(p \neq 2\), \(Q \cap Z = I_G\) and \(|q_1 z_1| = |q_1| |z_1|\). Note that \(q_1 z_1\) and \(q_2 z_2\) are conjugate in \(G\), and thus their orders are equal. This means that \(|z_1| = |z_2|\), because otherwise 2 would divide one of them and not the other. Thus \(z_1 = z_2\) and, </p>
<div class="displaymath" id="a0000000360">
  \begin{align*}  y q_1z_1 y^{-1} & = q_2z_2 = q_2z_1 \\ y q_1 y^{-1} z_1 & = q_2z_1, \\ y q_1 y^{-1} & = q_2 \in Q \end{align*}
</div>
<p> Hence \(y \in N_G(Q)\). Furthermore, since \(y\) was chosen arbitrarily, any element which is in \(N_G(Q \times Z)\) is also in \(N_G(Q)\), so \(N_G(Q \times Z) = N_G(Q)\) as desired. </p>

  </div>
</div>
<p> <small class="footnotesize"> <pre class="verbatim">
lemma normalizer_Sylow_join_center_eq_normalizer_Sylow {F : Type*} [Field F] {p : ℕ}
  [Fact (Nat.Prime p)] [CharP F p] (G : Subgroup SL(2,F)) [Finite G] (Q : Sylow p G) :
    normalizer (map G.subtype Q.toSubgroup ⊔ center SL(2,F)) =
      normalizer (map G.subtype Q.toSubgroup) := by
    sorry
</pre> </small> </p>
<p>We now start to count the elements of the seperate components of \(G\) and use the preceeding 2 theorems to construct what will be an invaluable formula in determining the structure of \(G\), something we will call the <b class="bfseries">Maximal Abelian Subgroup Class Equation</b> of \(G\). <br /></p>
<div class="remark_thmwrapper theorem-style-remark" id="a0000000361">
  <div class="remark_thmheading">
    <span class="remark_thmcaption">
    Remark
    </span>
    <span class="remark_thmlabel">6.64</span>
    <div class="thm_header_extras">

        </div>
    <div class="thm_header_hidden_extras">

    <a class="icon proof" href="Ch6_MaximalAbelianSubgroupClassEquation.html#a0000000361">#</a>
    
    
    
        </div>
  </div>
  <div class="remark_thmcontent">
  <p>From here on, the formalisation of statements may not be completely accurate or even correct since the approach for formalising the case split which shall be outlined below is still provisional. The main purpose of the Lean statements that follow in the remaining text are to set up the scaffolding for the remaining formalisation. </p>

  </div>
</div>
<p> <br />First we split \(\mathfrak {M}\) into the conjugacy classes of it’s elements. Theorem <a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.IsCyclic_and_card_coprime_CharP_or_eq_Q_join_Z">6.37</a> tells us that every maximal abelian subgroup is either a cyclic subgroup whose order is relatively prime to \(p\) or of the form \(Q \times Z\) where \(Q\) is a Sylow \(p\)-subgroup. Let \(\mathcal{C}_1, \mathcal{C}_2,...,\mathcal{C}_s, \mathcal{C}_{s+1},..., \mathcal{C}_{s+t}\) (where \(s, t \in \mathbb {Z}^+\)) denote the conjugacy classes of the cyclic subgroups whose order is relatively prime to \(p\). Recall that part (iv) of Theorem <a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.index_normalizer_le_two">6.38</a> tells us that \([N_G(A): A] = 1\) or 2. Let \(A\) be a representative from each \(\mathcal{C}_i\) such that, </p>
<div class="displaymath" id="a0000000362">
  \begin{align*}  [N_G(A) : A] & = 1, \tag {for $i \leq s$} \\[2mm] [N_G(A) : A] & = 2. \tag {for $s {\lt} i \leq s+t$}, \end{align*}
</div>
<p>Now let \(Q_1\) and \(Q_2\) be any two Sylow \(p\)-subgroups of \(G\). By the Second Sylow Theorem, \(Q_1\) and \(Q_2\) are conjugate to each other in \(G\). That is, there exists a \(g \in G\) such that \(gQ_1g^{-1} = Q_2\). </p>
<div class="displaymath" id="a0000000363">
  \begin{align*}  gQ_1g^{-1} = Q_2 & \iff gQ_1g^{-1}Z = Q_2Z \\ & \iff gQ_1Zg^{-1} = Q_2Z \\ & \iff g(Q_1 \times Z)g^{-1} = (Q_2 \times Z). \end{align*}
</div>
<p>So \(Q_1 \times Z\) and \(Q_2 \times Z\) belong to the same conjugacy class, furthermore there is thus only 1 conjugacy class of elements of this form in \(\mathfrak {M}\). Let \(\mathcal{C}_{Q \times Z}\) denote this conjugacy class and let \(Q \times Z\) be a representative from it. The following diagram provides a visual representation of \(G\) divided into it’s maximal abelian subgroups. </p>
<p>We can reformulate the counting formula in Theorem <a href="Ch6_MaximalAbelianSubgroupClassEquation.html#card_noncenter_fin_subgroup_eq_sum_card_noncenter_mul_index_normalizer">6.61</a> in the following way. </p>
<p><b class="bfseries">Note</b>: Here we return to Christopher Butler’s notation which uses an indexing set, this formalisation is still in progress. </p>
<div class="displaymath" id="a0000000364">
  \begin{align*}  |G \!  \setminus \!  Z| = \sum _{A_i^* \in S} |A_i^*| [G:N_G(A_i)] = \sum _{A_i^* \in S} |C_i^*| = |C_{Q \times Z}^*| + \sum _{i=1}^{s+t} |C_i^*|. \end{align*}
</div>
<p>We are now able to begin to evaluate \(G\). Firstly, let \(|Z| = e\) and \(|G| = eg\). We know well by now that \(e = 1\) or 2 depending on whether \(p\) equals 2 or not, and by Lagrange’s Theorem, the order of a subgroup divides the order of the group, so \(e\) divides \(|G|\) since \(Z {\lt} G\). <br /><br />We consider the cyclic case first. Again, by Lagrange’s Theorem, since \(Z\) is a subgroup of each \(A_i\), \(e\) divides \(|A_i|\). So set \(|A_i| = eg_i\). Since \(Z \notin \mathfrak {M}\), each \(A_i\) is therefore strictly larger than \(Z\) and so each \(g_i\) is an integer greater than or equal to 2. <br /><br />To determine the order of each \(C_i\), we return to the set \(\mathfrak {M}^*\). The size of one representative of each class is, </p>
<div class="displaymath" id="a0000000365">
  \begin{align*}  |A_i^*| = |A_i \!  \setminus \!  Z| = eg_i-e = e(g_i-1). \end{align*}
</div>
<p> The number of \(A_i^*\) in each conjugacy class \(\mathcal{C}_i\) for \(i \leq s\) is thus, </p>
<div class="displaymath" id="a0000000366">
  \begin{align*}  |\mathcal{C}_i^*| = |\mathcal{C}_i| = [G:N_G(A_i)] = \frac{|G|}{|A_i|} = \frac{eg}{eg_i} = \frac{g}{g_i}. \end{align*}
</div>
<p> <br />Therefore the total number of elements of \(G\) in the noncentral part of \(C_i\) for \(i \leq s\) is, </p>
<div class="displaymath" id="classeq1of3">
  \begin{align}  \label{classeq1of3} \sum _{i=1}^{s} |C_i^*| = \sum _{i=1}^{s} |A_i^*| |\mathcal{C}_i^*| = \sum _{i=1}^{s} \frac{eg(g_i-1)}{g_i}. \end{align}
</div>
<p> <br />The number of \(A_i^*\) in each conjugacy class \(\mathcal{C}_i\) for \(s {\lt} i \leq s+t\) is thus, </p>
<div class="displaymath" id="a0000000367">
  \begin{align*}  |\mathcal{C}_i^*| = |\mathcal{C}_i| = [G:N_G(A_i)] = \frac{|G|}{2|A_i|} = \frac{eg}{2eg_i} = \frac{g}{2g_i}. \end{align*}
</div>
<p> <br />Therefore the total number of elements of \(G\) in the noncentral part of \(C_i\) for \(s {\lt} i \leq s+t\) is, </p>
<div class="displaymath" id="classeq2of3">
  \begin{align} \label{classeq2of3} \sum _{i=s+1}^{s+t} |C_i^*| = \sum _{i=s+1}^{s+t} |A_i^*| |\mathcal{C}_i^*| = \sum _{i=s+1}^{s+t} \frac{eg(g_i-1)}{2g_i}. \end{align}
</div>
<p> We next determine the order of \(C_{Q \times Z}\). Let \(|Q| = q\). If \(p \nmid |G|\) then \(q=1\) and if \(p = 0\), then we consider a Sylow \(p\)-subgroup to simply be \(I_G\). So \(q\) is always at least 1. Since \(Z {\lt} K\), we can let \(|K| = ek\). Observe that if \(K \in \mathfrak {M}\), then by Theorem <a href="Ch6_MaximalAbelianSubgroupClassEquation.html#MaximalAbelianSubgroup.K_mem_MaximalAbelianSubgroups_of_center_lt_card_K">6.41</a>, \(K = A_i\) for some \(0 {\lt} i \leq t\) and \(k = g_i\). Recall that \(N_G(Q) = QK\) and so, </p>
<div class="displaymath" id="a0000000368">
  \begin{align*}  |N_G(Q \times Z)^*| & = |N_G(Q \times Z)| \\ & = |N_G(Q)| \\ & = |QK| = eqk. \end{align*}
</div>
<p>Again we count the size and number of these maximal abelian groups. </p>
<div class="displaymath" id="a0000000369">
  \begin{align*}  |(Q \times Z)^*| = |QZ| - |Z| = e(q-1). \end{align*}
</div>
<p>Since there is only one conjugacy class of \(Q \times Z\), the number of \((Q \times Z)^*\) in \(\mathfrak {M}^*\) is thus, </p>
<div class="displaymath" id="a0000000370">
  \begin{align*}  |\mathcal{C}_{Q \times Z}^*| = |\mathcal{C}_{Q \times Z}| = [G: N_G(Q \times Z)] = \frac{|G|}{|N_G(Q \times Z)^*|} = \frac{eg}{eqk} = \frac{g}{qk}. \end{align*}
</div>
<p>Therefore the total number of elements of \(G\) in the noncentral parts of each \(Q \times Z\) is, </p>
<div class="displaymath" id="classeq3of3">
  \begin{align}  \label{classeq3of3} |C_{Q \times Z}^*| = |(Q \times Z)^*| |\mathcal{C}_{Q \times Z}^*| = \frac{eg(q-1)}{qk}. \end{align}
</div>
<p>We now sum together (<a href="Ch6_MaximalAbelianSubgroupClassEquation.html#classeq1of3">13</a>), (<a href="Ch6_MaximalAbelianSubgroupClassEquation.html#classeq2of3">14</a>) and (<a href="Ch6_MaximalAbelianSubgroupClassEquation.html#classeq3of3">15</a>) to create the <b class="bfseries">Maximal Abelian Subgroup Class Equation</b> of \(G\). </p>
<div class="displaymath" id="classeq">
  \begin{align} \label{classeq} |G \!  \setminus \!  Z| & = |C_{Q \times Z}^*| + \sum _{i=1}^{s+t} |C_i^*|, \nonumber \\ |G \!  \setminus \!  Z| & = |(Q \times Z)^*| |\mathcal{C}_{Q \times Z}^*| + \sum _{i=1}^{s} |A_i^*| |\mathcal{C}_i^*| + \sum _{i=s+1}^{s+t} |A_i^*| |\mathcal{C}_i^*|, \nonumber \\ eg - e & = \frac{eg(q-1)}{qk} + \sum _{i=1}^{s} \frac{eg(g_i-1)}{g_i} + \sum _{i=s+1}^{s+t} \frac{eg(g_i-1)}{2g_i}, \nonumber \\ 1 & = \frac{1}{g} + \frac{q-1}{qk} + \sum _{i=1}^{s} \frac{g_i-1}{g_i} + \sum _{i=s+1}^{s+t} \frac{g_i-1}{2g_i}. \end{align}
</div>
<p>Since \(g,k,q \in \mathbb {Z}^+\) this implies that, </p>
<div class="displaymath" id="a0000000371">
  \begin{align*}  \frac{1}{g} {\gt} 0 \quad \text{and} \quad \frac{q-1}{qk} \geq 0. \end{align*}
</div>
<p>Also, since \(g_i \geq 2\) for \(1 \leq i \leq s + t\), we have, </p>
<div class="displaymath" id="a0000000372">
  \begin{align*}  \frac{g_i-1}{g_i} \geq \frac{1}{2}, \quad \sum _{i=1}^{s} \frac{g_i-1}{g_i} \geq \frac{s}{2} \quad \text{and} \quad \sum _{i=s+1}^{s+t} \frac{g_i-1}{2g_i} \geq \frac{t}{4}. \end{align*}
</div>
<p>Thus we can find a lower bound for (<a href="Ch6_MaximalAbelianSubgroupClassEquation.html#classeq">16</a>) which limits the possible number of conjugacy classes somewhat, </p>
<div class="displaymath" id="a0000000373">
  \begin{align*}  1 {\gt} \frac{s}{2} + \frac{t}{4}. \end{align*}
</div>
<p>There are only 6 possible different pairs of values which \(s\) and \(t\) can take:  </p>
<div class="centered"> <div class="centered"><table class="tabular">
  <tr>
    <td  style="border-top-style:solid; border-top-color:black; border-top-width:1px; text-align:center; border-right:1px solid black; border-left:1px solid black" 
        rowspan=""
        colspan="">
      <p> Case </p>

    </td>
    <td  style="border-top-style:solid; border-top-color:black; border-top-width:1px; text-align:center; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p> I </p>

    </td>
    <td  style="border-top-style:solid; border-top-color:black; border-top-width:1px; text-align:center; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p> II </p>

    </td>
    <td  style="border-top-style:solid; border-top-color:black; border-top-width:1px; text-align:center; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p> III </p>

    </td>
    <td  style="border-top-style:solid; border-top-color:black; border-top-width:1px; text-align:center; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p> IV </p>

    </td>
    <td  style="border-top-style:solid; border-top-color:black; border-top-width:1px; text-align:center; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p> V </p>

    </td>
    <td  style="border-top-style:solid; border-top-color:black; border-top-width:1px; text-align:center; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p> VI </p>

    </td>
  </tr>
  <tr>
    <td  style="border-top-style:solid; border-top-color:black; border-top-width:1px; text-align:center; border-right:1px solid black; border-left:1px solid black" 
        rowspan=""
        colspan="">
      <p> \(s\) </p>

    </td>
    <td  style="border-top-style:solid; border-top-color:black; border-top-width:1px; text-align:center; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p> 1 </p>

    </td>
    <td  style="border-top-style:solid; border-top-color:black; border-top-width:1px; text-align:center; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p> 1 </p>

    </td>
    <td  style="border-top-style:solid; border-top-color:black; border-top-width:1px; text-align:center; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p> 0 </p>

    </td>
    <td  style="border-top-style:solid; border-top-color:black; border-top-width:1px; text-align:center; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p> 0 </p>

    </td>
    <td  style="border-top-style:solid; border-top-color:black; border-top-width:1px; text-align:center; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p> 0 </p>

    </td>
    <td  style="border-top-style:solid; border-top-color:black; border-top-width:1px; text-align:center; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p> 0 </p>

    </td>
  </tr>
  <tr>
    <td  style="border-top-style:solid; border-top-color:black; border-top-width:1px; text-align:center; border-right:1px solid black; border-left:1px solid black; border-bottom-style:solid; border-bottom-color:black; border-bottom-width:1px" 
        rowspan=""
        colspan="">
      <p> \(t\) </p>

    </td>
    <td  style="border-top-style:solid; border-top-color:black; border-top-width:1px; text-align:center; border-right:1px solid black; border-bottom-style:solid; border-bottom-color:black; border-bottom-width:1px" 
        rowspan=""
        colspan="">
      <p> 0 </p>

    </td>
    <td  style="border-top-style:solid; border-top-color:black; border-top-width:1px; text-align:center; border-right:1px solid black; border-bottom-style:solid; border-bottom-color:black; border-bottom-width:1px" 
        rowspan=""
        colspan="">
      <p> 1 </p>

    </td>
    <td  style="border-top-style:solid; border-top-color:black; border-top-width:1px; text-align:center; border-right:1px solid black; border-bottom-style:solid; border-bottom-color:black; border-bottom-width:1px" 
        rowspan=""
        colspan="">
      <p> 0 </p>

    </td>
    <td  style="border-top-style:solid; border-top-color:black; border-top-width:1px; text-align:center; border-right:1px solid black; border-bottom-style:solid; border-bottom-color:black; border-bottom-width:1px" 
        rowspan=""
        colspan="">
      <p> 1 </p>

    </td>
    <td  style="border-top-style:solid; border-top-color:black; border-top-width:1px; text-align:center; border-right:1px solid black; border-bottom-style:solid; border-bottom-color:black; border-bottom-width:1px" 
        rowspan=""
        colspan="">
      <p> 2 </p>

    </td>
    <td  style="border-top-style:solid; border-top-color:black; border-top-width:1px; text-align:center; border-right:1px solid black; border-bottom-style:solid; border-bottom-color:black; border-bottom-width:1px" 
        rowspan=""
        colspan="">
      <p> 3 </p>

    </td>
  </tr>
</table> </div></div>

<p>Each case will be examined individually in the next chapter. </p>

</div> <!--main-text -->
</div> <!-- content-wrapper -->
</div> <!-- content -->
</div> <!-- wrapper -->

<nav class="prev_up_next">
  <svg  id="showmore-minus" class="icon icon-eye-minus showmore"><use xlink:href="symbol-defs.svg#icon-eye-minus"></use></svg>

  <svg  id="showmore-plus" class="icon icon-eye-plus showmore"><use xlink:href="symbol-defs.svg#icon-eye-plus"></use></svg>

  <a href="Ch5_PropertiesOfSLOverAlgClosedField.html" title="Properties of the two dimensional \(\operatorname{SL}_2(F)\)"><svg  class="icon icon-arrow-left "><use xlink:href="symbol-defs.svg#icon-arrow-left"></use></svg>
</a>
  <a href="index.html" title="Classification of finite subgroups of PGL"><svg  class="icon icon-arrow-up "><use xlink:href="symbol-defs.svg#icon-arrow-up"></use></svg>
</a>
  <a href="Ch7_DicksonsClassificationTheorem.html" title="Dickson’s Classification Theorem for finite subgroups of \(\operatorname{SL}_2(F)\)"><svg  class="icon icon-arrow-right "><use xlink:href="symbol-defs.svg#icon-arrow-right"></use></svg>
</a>
</nav>

<script type="text/javascript" src="js/jquery.min.js"></script>
<script type="text/javascript" src="js/plastex.js"></script>
<script type="text/javascript" src="js/svgxuse.js"></script>
<script type="text/javascript" src="js/js.cookie.min.js"></script>
<script type="text/javascript" src="js/showmore.js"></script>
</body>
</html>